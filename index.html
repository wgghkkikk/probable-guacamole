<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ğŸ‘‘ Ù…Ù…Ù„ÙƒØ© Ø¹Ù„ÙˆØ´ | Ù†Ø¸Ø§Ù… Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ø°ÙƒÙŠ</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        :root { --gold: #d4af37; --bg: #0a0a0a; }
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background: var(--bg); color: white; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠ Ù…Ø¹ Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
        header { 
            background: #111; padding: 10px 15px; display: flex; justify-content: space-between; 
            align-items: center; border-bottom: 2px solid var(--gold); z-index: 1000;
        }
        .toggle-btn { background: var(--gold); border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; font-weight: bold; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
        #main-wrapper { display: flex; flex: 1; position: relative; overflow: hidden; }

        /* Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© (Ù…Ø®ÙÙŠØ© Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹) */
        .sidebar { 
            position: absolute; top: 0; width: 240px; height: 100%; 
            background: #151515; transition: 0.4s ease; z-index: 500; border: 1px solid #333; 
        }
        #users-list { right: -250px; border-left: 2px solid var(--gold); } /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† ÙŠÙ…ÙŠÙ†Ø§Ù‹ */
        #admin-tools { left: -250px; border-right: 2px solid var(--gold); } /* Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ÙŠØ³Ø§Ø±Ø§Ù‹ */

        /* Ø§Ù„Ø­Ø§Ù„Ø© Ø¹Ù†Ø¯ Ø§Ù„ÙØªØ­ */
        .sidebar.open-right { right: 0 !important; }
        .sidebar.open-left { left: 0 !important; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø´Ø§Øª */
        #chat-window { flex: 1; display: flex; flex-direction: column; background: #000; transition: 0.4s; }

        #messages { flex: 1; overflow-y: auto; padding: 15px; }
        .line { border-bottom: 1px solid #222; padding: 8px 0; font-size: 14px; animation: fadeIn 0.3s; }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ */
        footer { background: #111; padding: 15px; display: flex; gap: 10px; border-top: 1px solid var(--gold); }
        input { flex: 1; padding: 12px; border-radius: 25px; border: 1px solid #444; background: #000; color: #fff; outline: none; }
        .send-btn { background: var(--gold); border: none; padding: 0 25px; border-radius: 25px; font-weight: bold; cursor: pointer; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <header>
        <button class="toggle-btn" onclick="toggleSide('admin-tools', 'open-left')">âš™ï¸ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</button>
        <div style="font-weight: bold; color: var(--gold);">ğŸ‘‘ Ù…Ù€Ù…Ù€Ù„Ù€ÙƒÙ€Ø© Ø¹Ù€Ù„Ù€ÙˆØ´</div>
        <button class="toggle-btn" onclick="toggleSide('users-list', 'open-right')">ğŸ‘¥ Ø§Ù„Ù…ØªØµÙ„ÙˆÙ†</button>
    </header>

    <div id="main-wrapper">
        <div id="admin-tools" class="sidebar">
            <div style="padding:20px;">
                <h3 style="color:var(--gold); border-bottom: 1px solid #333;">âš™ï¸ ØªØ­ÙƒÙ… Ø§Ù„Ù…Ù„Ùƒ</h3>
                <button onclick="clearChat()" style="width:100%; padding:10px; background:red; color:white; border:none; margin-top:10px; cursor:pointer;">ğŸ§¹ Ù…Ø³Ø­ Ø§Ù„Ø´Ø§Øª</button>
                <button onclick="changeName()" style="width:100%; padding:10px; background:#444; color:white; border:none; margin-top:10px; cursor:pointer;">âœï¸ ØªØºÙŠÙŠØ± Ø§Ø³Ù…ÙŠ</button>
            </div>
        </div>

        <div id="chat-window">
            <div id="messages"></div>
        </div>

        <div id="users-list" class="sidebar">
            <div style="padding:20px;">
                <h3 style="color:var(--gold); border-bottom: 1px solid #333;">ğŸ‘¥ Ø§Ù„Ù…ØªÙˆØ§Ø¬Ø¯ÙˆÙ†</h3>
                <div style="margin-top:10px;">ğŸŸ¢ Ø§Ù„Ù…Ù„Ùƒ Ø¹Ù„ÙˆØ´</div>
            </div>
        </div>
    </div>

    <footer>
        <input type="text" id="msg-input" placeholder="Ø§ÙƒØªØ¨ Ù…Ø±Ø³ÙˆÙ…Ùƒ Ø§Ù„Ù…Ù„ÙƒÙŠ...">
        <button class="send-btn" onclick="send()">Ø¥Ø±Ø³Ø§Ù„</button>
    </footer>

    <script>
        const firebaseConfig = { databaseURL: "https://alloush-kingdom-default-rtdb.firebaseio.com" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // Ø¯Ø§Ù„Ø© ÙØªØ­ ÙˆØ¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù…
        function toggleSide(id, className) {
            document.getElementById(id).classList.toggle(className);
        }

        function send() {
            const inp = document.getElementById('msg-input');
            const myName = localStorage.getItem('kingName') || "Ø¹Ù„ÙˆØ´";
            if(inp.value.trim()) {
                db.ref("messages").push().set({
                    user: myName,
                    text: inp.value,
                    time: new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})
                });
                inp.value = "";
            }
        }

        db.ref("messages").limitToLast(40).on("child_added", (snap) => {
            const data = snap.val();
            const msgBox = document.getElementById('messages');
            const line = document.createElement('div');
            line.className = 'line';
            line.innerHTML = `<b style="color:var(--gold)">${data.user}:</b> <span style="color:#ddd">${data.text}</span> <small style="color:#555; float:left;">${data.time}</small>`;
            msgBox.appendChild(line);
            msgBox.scrollTop = msgBox.scrollHeight;
        });

        function clearChat() { if(confirm("Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„ØŸ")) db.ref("messages").remove(); location.reload(); }
        function changeName() { let n = prompt("Ø§Ø³Ù…Ùƒ Ø§Ù„Ø¬Ø¯ÙŠØ¯:"); if(n) localStorage.setItem('kingName', n); }

        document.getElementById('msg-input').onkeypress = (e) => { if(e.key === 'Enter') send(); };
    </script>
</body>
</html>
