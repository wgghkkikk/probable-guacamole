<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‘‘ Ø¥Ø¯Ø§Ø±Ø© Ù…Ù…Ù„ÙƒØ© Ø¹Ù„ÙˆØ´ Ø§Ù„Ù…Ø·Ù„Ù‚Ø©</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        :root { --king-gold: #d4af37; --bg: #000; }
        body { margin: 0; font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--bg); color: white; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¹Ù„ÙˆÙŠ */
        header { 
            background: #111; padding: 12px 20px; display: flex; justify-content: space-between; 
            align-items: center; border-bottom: 2px solid var(--king-gold); box-shadow: 0 2px 15px rgba(212, 175, 55, 0.2);
        }
        .nav-btn { background: transparent; border: 1px solid var(--king-gold); color: var(--king-gold); padding: 8px 18px; border-radius: 5px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .nav-btn:hover { background: var(--king-gold); color: black; }

        #main-content { flex: 1; display: flex; position: relative; }

        /* Ø§Ù„Ù„ÙˆØ­Ø§Øª Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© */
        .side-panel { 
            position: absolute; top: 0; width: 260px; height: 100%; 
            background: #111; transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1); 
            z-index: 1000; border: 1px solid #222; 
        }
        #left-admin { right: -265px; border-left: 2px solid var(--king-gold); } /* Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… */
        #right-users { left: -265px; border-right: 2px solid var(--king-gold); } /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† */

        /* ÙØ¦Ø© Ø§Ù„ØªÙØ¹ÙŠÙ„ */
        .panel-open { transform: translateX(0); }
        #left-admin.panel-open { transform: translateX(-265px); }
        #right-users.panel-open { transform: translateX(265px); }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© */
        #chat-area { flex: 1; display: flex; flex-direction: column; background: #080808; z-index: 100; }
        #msg-container { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 12px; }

        /* Ø³Ø·Ø± Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© */
        .chat-line { border-bottom: 1px solid #1a1a1a; padding: 8px 0; font-size: 15px; }
        .king-label { color: var(--king-gold); font-weight: bold; }
        .time-label { color: #444; font-size: 11px; margin-right: 10px; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø³ÙÙ„ÙŠ */
        footer { padding: 15px 25px; background: #111; display: flex; gap: 12px; border-top: 2px solid #222; }
        #user-input { flex: 1; padding: 12px; border-radius: 8px; border: 1px solid #333; background: #000; color: #fff; outline: none; font-size: 16px; }
        .send-btn { background: var(--king-gold); color: black; border: none; padding: 0 35px; border-radius: 8px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>

    <header>
        <button class="nav-btn" onclick="togglePanel('left-admin')">âš™ï¸ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</button>
        <div style="font-size: 22px; font-weight: bold; letter-spacing: 2px;">ğŸ‘‘ Ù…Ù€Ù…Ù€Ù„Ù€ÙƒÙ€Ø© Ø¹Ù€Ù„Ù€ÙˆØ´</div>
        <button class="nav-btn" onclick="togglePanel('right-users')">ğŸ‘¥ Ø§Ù„Ù…ØªØµÙ„ÙˆÙ†</button>
    </header>

    <div id="main-content">
        <div id="left-admin" class="side-panel">
            <div style="padding: 25px;">
                <h3 style="color: var(--king-gold);">ğŸ› ï¸ Ù…Ø±ÙƒØ² Ø§Ù„ØªØ­ÙƒÙ…</h3>
                <hr style="border: 0.5px solid #333;">
                <button class="nav-btn" style="width: 100%; margin-top: 15px;" onclick="clearDatabase()">ğŸ§¹ ØªØµÙÙŠØ± Ø§Ù„Ø³ÙŠØ±ÙØ±</button>
                <button class="nav-btn" style="width: 100%; margin-top: 15px;" onclick="changeKingProfile()">ğŸ‘¤ ØªØ¹Ø¯ÙŠÙ„ Ø¨Ø±ÙˆÙØ§ÙŠÙ„ÙŠ</button>
                <p style="font-size: 12px; color: #666; margin-top: 20px;">Ø£Ù†Øª Ø§Ù„Ø¢Ù† ØªØªØ­ÙƒÙ… Ø¨ÙƒÙ„ Ø´ÙŠØ¡ ÙŠØ§ Ø¹Ù„ÙˆØ´.</p>
            </div>
        </div>

        <div id="chat-area">
            <div id="msg-container"></div>
        </div>

        <div id="right-users" class="side-panel">
            <div style="padding: 25px;">
                <h3 style="color: var(--king-gold);">ğŸ‘¥ ÙØ±Ø³Ø§Ù† Ø§Ù„Ù…Ù…Ù„ÙƒØ©</h3>
                <div style="margin-top: 15px;">ğŸŸ¢ Ø§Ù„Ù…Ù„Ùƒ Ø¹Ù„ÙˆØ´ (Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†)</div>
            </div>
        </div>
    </div>

    <footer>
        <input type="text" id="user-input" placeholder="Ø§ÙƒØªØ¨ Ù…Ø±Ø³ÙˆÙ…Ùƒ Ø§Ù„Ù…Ù„ÙƒÙŠ ÙŠØ§ Ù…Ù„Ùƒ...">
        <button class="send-btn" onclick="sendMessage()">Ø¥Ø±Ø³Ø§Ù„</button>
    </footer>

    <script>
        const firebaseConfig = { databaseURL: "https://alloush-kingdom-default-rtdb.firebaseio.com" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // Ù†Ø¸Ø§Ù… ÙØªØ­ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù…
        function togglePanel(id) {
            const panel = document.getElementById(id);
            panel.classList.toggle('panel-open');
        }

        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
        function sendMessage() {
            const input = document.getElementById('user-input');
            if(input.value.trim() !== "") {
                db.ref("messages").push().set({
                    user: "Ø¹Ù„ÙˆØ´",
                    text: input.value,
                    time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})
                });
                input.value = "";
            }
        }

        // Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
        db.ref("messages").limitToLast(50).on("child_added", (snapshot) => {
            const data = snapshot.val();
            const container = document.getElementById('msg-container');
            const div = document.createElement('div');
            div.className = 'chat-line';
            div.innerHTML = `<span class="king-label">[Ø§Ù„Ù…Ù„Ùƒ] ${data.user}:</span> <span style="color:#ddd">${data.text}</span> <span class="time-label">${data.time}</span>`;
            container.appendChild(div);
            container.scrollTop = container.scrollHeight;
        });

        // Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ù…Ù„Ùƒ
        function clearDatabase() { if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø·Ø±Ø¯ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø±ÙˆØ§Ø­ ÙˆÙ…Ø³Ø­ Ø§Ù„Ø´Ø§ØªØŸ")) db.ref("messages").remove(); location.reload(); }
        function changeKingProfile() { alert("Ù…ÙŠØ²Ø© ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„ ØªØ­Øª ÙŠØ¯Ùƒ Ø§Ù„Ø¢Ù†."); }

        document.getElementById('user-input').onkeypress = (e) => { if(e.key === 'Enter') sendMessage(); };
    </script>
</body>
</html>
