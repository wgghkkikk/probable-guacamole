</html>
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ø¹Ù„ÙˆØ´ V2 ğŸ‘‘</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        :root { --gold: #ffd700; --bg: #050505; --panel: #111; }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; overflow: hidden; }
        
        /* ØµÙØ­Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ */
        #login-screen { position: fixed; inset: 0; background: #000; z-index: 10000; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 20px; }
        .login-box { background: #111; padding: 30px; border-radius: 15px; border: 1px solid var(--gold); width: 300px; text-align: center; }
        .login-box input { width: 90%; padding: 10px; margin: 10px 0; border-radius: 5px; border: 1px solid #333; background: #222; color: #fff; }
        
        /* Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ */
        .header { height: 50px; background: var(--panel); display: flex; align-items: center; justify-content: space-between; padding: 0 15px; border-bottom: 1px solid #222; }
        #wrapper { display: flex; height: calc(100vh - 50px); }

        /* Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© */
        .sidebar { width: 0; transition: 0.3s; background: var(--panel); overflow: hidden; position: relative; }
        .sidebar.active { width: 250px; border-left: 1px solid #222; border-right: 1px solid #222; }
        
        /* Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù…ØªØ­Ø±Ùƒ Ù„Ù„Ù…Ø§Ø³ØªØ± */
        .name-master { 
            background: linear-gradient(90deg, #ffd700, #fff, #ffd700);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shine 2s linear infinite;
            font-weight: bold;
        }
        @keyframes shine { to { background-position: 200% center; } }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø´Ø§Øª */
        .chat-main { flex: 1; display: flex; flex-direction: column; position: relative; }
        #chat-messages { flex: 1; overflow-y: auto; padding: 15px; }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… */
        .icon-btn { cursor: pointer; font-size: 20px; color: var(--gold); }
        .plus-btn { position: absolute; bottom: 80px; left: 20px; width: 40px; height: 40px; background: var(--gold); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #000; font-size: 24px; cursor: pointer; }

        .footer { padding: 15px; display: flex; gap: 10px; background: #111; }
        input#msg-input { flex: 1; padding: 12px; border-radius: 20px; border: 1px solid #333; background: #222; color: #fff; }
    </style>
</head>
<body>

<div id="login-screen">
    <div class="login-box">
        <h2 style="color:var(--gold)">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ©</h2>
        <input type="text" id="user-name" placeholder="Ø§Ù„Ø§Ø³Ù…">
        <input type="password" id="user-pass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± (Ù„Ù„Ù…Ù„ÙˆÙƒ)">
        <button class="icon-btn" onclick="app.login()">Ø¯Ø®ÙˆÙ„</button>
    </div>
</div>

<div class="header">
    <div onclick="app.toggleSide('left')">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</div>
    <div id="room-name">Ø´Ø§Øª Ø¹Ù„ÙˆØ´ Ø§Ù„Ù…Ù„ÙƒÙŠ</div>
    <div onclick="app.toggleSide('right')">ğŸ‘¥ Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†</div>
</div>

<div id="wrapper">
    <div id="side-left" class="sidebar">
        <div style="padding: 20px;">
            <h3>Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</h3>
            <div id="my-profile"></div>
            <hr>
            <button onclick="app.setTheme('gold')">Ø«ÙŠÙ… Ø°Ù‡Ø¨ÙŠ</button>
            <button onclick="app.setTheme('dark')">Ø«ÙŠÙ… Ù„ÙŠÙ„ÙŠ</button>
            <hr>
            <button onclick="app.showDaily()">ğŸ“– Ø§Ù„ÙŠÙˆÙ…ÙŠØ§Øª</button>
        </div>
    </div>

    <div class="chat-main">
        <div id="chat-messages"></div>
        <div class="plus-btn" onclick="app.triggerUpload()">+</div>
        <div class="footer">
            <input type="text" id="msg-input" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ...">
            <button onclick="app.send()" style="background:var(--gold); border:none; border-radius:50%; width:40px; height:40px;">â</button>
        </div>
    </div>

    <div id="side-right" class="sidebar">
        <div style="padding: 15px;" id="online-list">
            <h4>Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†</h4>
        </div>
    </div>
</div>

<script>
    // ØªÙ‡ÙŠØ¦Ø© Firebase (ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¶Ø¹ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù‡Ù†Ø§)
    const config = { databaseURL: "https://masterchat-f2da9-default-rtdb.firebaseio.com" };
    firebase.initializeApp(config);
    const db = firebase.database();

    const app = {
        user: null,
        login: function() {
            let name = document.getElementById('user-name').value;
            let pass = document.getElementById('user-pass').value;
            
            if(!name) return alert("Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ");
            
            this.user = { name: name, role: 'Ø¹Ø¶Ùˆ' };
            
            if(name === "Ø¹Ù„ÙˆØ´" && pass === "Allosh#King@2025") {
                this.user.role = "Ø§Ù„Ù…Ø§Ø³ØªØ±";
            }
            
            document.getElementById('login-screen').style.display = 'none';
            this.initChat();
        },
        
        toggleSide: function(side) {
            document.getElementById('side-' + side).classList.toggle('active');
        },

        initChat: function() {
            // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªÙˆØ§Ø¬Ø¯
            db.ref('online/' + this.user.name).set(this.user);
            db.ref('online/' + this.user.name).onDisconnect().remove();

            // Ø³Ù…Ø§Ø¹ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
            db.ref('messages').limitToLast(50).on('child_added', snap => {
                this.renderMsg(snap.val());
            });

            // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†
            db.ref('online').on('value', snap => {
                let list = document.getElementById('online-list');
                list.innerHTML = "<h4>Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†</h4>";
                snap.forEach(u => {
                    let ud = u.val();
                    list.innerHTML += `<div class="${ud.role==='Ø§Ù„Ù…Ø§Ø³ØªØ±'?'name-master':''}">â— ${ud.name} (${ud.role})</div>`;
                });
            });
        },

        send: function() {
            let txt = document.getElementById('msg-input').value;
            if(!txt) return;
            db.ref('messages').push({
                sender: this.user.name,
                role: this.user.role,
                content: txt
            });
            document.getElementById('msg-input').value = "";
        },

        renderMsg: function(data) {
            let area = document.getElementById('chat-messages');
            let isM = data.role === "Ø§Ù„Ù…Ø§Ø³ØªØ±";
            let div = document.createElement('div');
            div.innerHTML = `<b class="${isM?'name-master':''}">${data.sender}:</b> ${data.content}`;
            area.appendChild(div);
            area.scrollTop = area.scrollHeight;
        },

        triggerUpload: function() {
            alert("Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ù†Ø¸Ø§Ù… Ø±ÙØ¹ Ø§Ù„ØµÙˆØ± ÙÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¯Ù…!");
        }
    };
</script>
</body>
</html>
