<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ğŸ‘‘ Ø´Ø§Øª Ù…Ù…Ù„ÙƒØ© Ø¹Ù„ÙˆØ´ Ø§Ù„Ø£Ø³Ø·ÙˆØ±ÙŠ</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background: #050505; color: #fff; display: flex; height: 100vh; }
        
        /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© - Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ */
        #side-menu { width: 280px; background: #111; border-left: 1px solid #d4af37; display: flex; flex-direction: column; }
        .user-profile { padding: 20px; text-align: center; border-bottom: 1px solid #222; background: linear-gradient(to bottom, #1a1a1a, #111); }
        .avatar { width: 80px; height: 80px; border-radius: 50%; border: 2px solid gold; margin-bottom: 10px; box-shadow: 0 0 10px gold; }
        
        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ */
        #chat-area { flex-grow: 1; display: flex; flex-direction: column; }
        header { padding: 15px; background: #111; border-bottom: 2px solid gold; display: flex; justify-content: space-between; align-items: center; }
        #msg-display { flex-grow: 1; overflow-y: auto; padding: 20px; background: #0a0a0a; }
        
        /* Ø´ÙƒÙ„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ */
        .bubble { max-width: 80%; margin-bottom: 15px; padding: 12px; border-radius: 15px; position: relative; }
        .king-style { background: #1a1a1a; border-right: 5px solid gold; align-self: flex-start; color: gold; font-weight: bold; }
        
        /* Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… ÙˆØ§Ù„Ù…Ø¯Ø®Ù„Ø§Øª */
        .input-bar { padding: 15px; background: #111; border-top: 1px solid #222; display: flex; gap: 10px; }
        input { flex-grow: 1; padding: 12px; border-radius: 20px; border: 1px solid gold; background: #000; color: #fff; outline: none; }
        .btn { padding: 10px 25px; border-radius: 20px; background: gold; color: #000; font-weight: bold; border: none; cursor: pointer; }
        
        #admin-tool { position: fixed; top: 70px; left: 20px; background: #111; border: 1px solid gold; padding: 10px; border-radius: 10px; display: none; }
    </style>
</head>
<body>

    <aside id="side-menu">
        <div class="user-profile">
            <img src="https://via.placeholder.com/80/gold/black?text=ğŸ‘‘" id="my-avatar" class="avatar">
            <div style="color:gold; font-weight:bold;">Ø¹Ù„ÙˆØ´ (Ø§Ù„Ù…Ù„Ùƒ)</div>
            <button onclick="changeMyPic()" style="font-size:10px; background:none; color:gray; border:none; cursor:pointer;">ØªØºÙŠÙŠØ± ØµÙˆØ±ØªÙŠ</button>
        </div>
        <div style="padding:15px; color:gold; font-size:14px;">ğŸŸ¢ Ø§Ù„Ù…ØªØµÙ„ÙˆÙ† Ø§Ù„Ø¢Ù† (1)</div>
    </aside>

    <main id="chat-area">
        <header>
            <div style="font-size:20px; font-weight:bold;">ğŸ‘‘ Ù…Ù…Ù„ÙƒØ© Ø¹Ù„ÙˆØ´</div>
            <button onclick="showAdmin()" style="background:none; color:gold; border:1px solid gold; border-radius:5px; cursor:pointer;">âš™ï¸ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</button>
        </header>

        <div id="msg-display" style="display:flex; flex-direction:column;"></div>

        <div id="admin-tool">
            <button class="btn" onclick="clearChat()" style="background:red; color:white;">Ù…Ø³Ø­ Ø§Ù„Ø´Ø§Øª</button>
        </div>

        <div class="input-bar">
            <input type="text" id="user-input" placeholder="Ø§ÙƒØªØ¨ Ù…Ø±Ø³ÙˆÙ…Ùƒ Ø§Ù„Ù…Ù„ÙƒÙŠ...">
            <button class="btn" onclick="send()">Ø¥Ø±Ø³Ø§Ù„</button>
        </div>
    </main>

    <script>
        const firebaseConfig = { databaseURL: "https://alloush-kingdom-default-rtdb.firebaseio.com" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        function send() {
            const txt = document.getElementById('user-input');
            if(txt.value.trim()){
                db.ref("messages").push().set({ user: "ğŸ‘‘ Ø¹Ù„ÙˆØ´", text: txt.value, time: new Date().toLocaleTimeString() });
                txt.value = "";
            }
        }

        db.ref("messages").limitToLast(20).on("child_added", (s) => {
            const m = s.val();
            const div = document.createElement('div');
            div.className = 'bubble king-style';
            div.innerHTML = `<small style="display:block; font-size:10px;">${m.user} - ${m.time}</small>${m.text}`;
            document.getElementById('msg-display').appendChild(div);
            document.getElementById('msg-display').scrollTop = document.getElementById('msg-display').scrollHeight;
        });

        function showAdmin() { let x = document.getElementById('admin-tool'); x.style.display = x.style.display === "none" ? "block" : "none"; }
        function clearChat() { if(confirm("Ù…Ø³Ø­ØŸ")) db.ref("messages").remove(); location.reload(); }
        function changeMyPic() { 
            let p = prompt("Ø±Ø§Ø¨Ø· ØµÙˆØ±ØªÙƒ Ø§Ù„Ù…Ø±Ø¨Ø¹Ø©:"); 
            if(p) { document.getElementById('my-avatar').src = p; localStorage.setItem('king_img', p); }
        }
        window.onload = () => { if(localStorage.getItem('king_img')) document.getElementById('my-avatar').src = localStorage.getItem('king_img'); };
    </script>
</body>
</html>
