<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ø§Ù„Ù…Ø§Ø³ØªØ± v3.0</title>
    <script src="https://cdn.pubnub.com/sdk/javascript/pubnub.7.2.2.min.js"></script>
    <style>
        :root { --glow: #00f2ff; --master: #ff004c; }
        body { background: #000; color: #fff; margin: 0; display: flex; flex-direction: column; height: 100vh; font-family: 'Tahoma', sans-serif; overflow: hidden; }
        header { height: 50px; border-bottom: 2px solid var(--glow); text-align: center; line-height: 50px; color: var(--glow); font-weight: bold; box-shadow: 0 0 15px var(--glow); }
        .wrapper { display: flex; flex: 1; overflow: hidden; }
        
        /* Ø§Ù„ÙŠÙ…ÙŠÙ†: Ø£Ø¯ÙˆØ§Øª ÙˆØºØ±Ù */
        #right { width: 220px; background: #050505; border-left: 1px solid #222; padding: 15px; }
        /* Ø§Ù„ÙŠØ³Ø§Ø±: Ù…ØªØµÙ„ÙŠÙ† ÙˆØ¨Ø±ÙˆÙØ§ÙŠÙ„ */
        #left { width: 220px; background: #050505; border-right: 1px solid #222; padding: 15px; }
        /* Ø§Ù„ÙˆØ³Ø·: Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© */
        #center { flex: 1; display: flex; flex-direction: column; background: #0a0a0a; }
        
        #msgs { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
        .input-bar { padding: 15px; background: #000; display: flex; gap: 10px; border-top: 1px solid #222; }
        input { flex: 1; background: #111; border: 1px solid #333; color: #fff; padding: 10px; border-radius: 20px; outline: none; }
        
        .btn { background: var(--glow); color: #000; border: none; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: bold; width: 100%; margin-bottom: 10px; }
        .rank { background: var(--master); font-size: 10px; padding: 2px 8px; border-radius: 10px; animation: pulse 1s infinite; display: inline-block; }
        .name { color: var(--glow); font-weight: bold; display: block; animation: move 2s infinite; margin-top: 5px; text-shadow: 0 0 5px var(--glow); }
        
        @keyframes pulse { 50% { opacity: 0.5; } }
        @keyframes move { 50% { transform: translateX(5px); } }
        
        .msg-line { background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px; border-right: 4px solid var(--glow); margin-bottom: 5px; }
    </style>
</head>
<body>

<header>MASTER REAL-TIME CHAT</header>

<div class="wrapper">
    <div id="right">
        <div style="color:var(--glow); font-size:12px; margin-bottom:10px;">ğŸ“‚ Ø§Ù„ØºØ±Ù</div>
        <button class="btn" onclick="addRoom()">+ Ø¥Ø¶Ø§ÙØ© ØºØ±ÙØ©</button>
        <div id="room-list"></div>
    </div>

    <div id="center">
        <div id="msgs"></div>
        <div class="input-bar">
            <input type="text" id="minp" placeholder="Ø§ÙƒØªØ¨ Ù‡Ù†Ø§ ÙˆØ³ØªØµÙ„ Ù„ÙƒÙ„ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©...">
            <button class="btn" style="width:auto; margin:0;" onclick="sendMsg()">Ø¥Ø±Ø³Ø§Ù„</button>
        </div>
    </div>

    <div id="left">
        <div style="color:var(--glow); font-size:12px; text-align:center; margin-bottom:15px;">ğŸ‘¤ Ø§Ù„Ù…ØªØµÙ„ÙˆÙ†</div>
        <div style="background:#111; padding:15px; border-radius:10px; text-align:center; border:1px solid #222;">
            <span class="rank">ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Øª</span>
            <span class="name">Ø§Ù„Ù…Ø§Ø³ØªØ±</span>
            <div style="margin-top:10px; letter-spacing: 5px;">ğŸ“© ğŸ¤ â¤ï¸</div>
        </div>
    </div>
</div>

<script>
    // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…ÙØ§ØªÙŠØ­ Ø¹Ø§Ù„Ù…ÙŠØ© Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø±Ø¨Ø·
    const pn = new PubNub({
        publishKey: 'pub-c-db838685-3004-4363-9524-7667858c0394',
        subscribeKey: 'sub-c-576a166e-c14d-11eb-a010-02da5302672a',
        uuid: "MasterDevice_" + Math.random()
    });

    pn.subscribe({ channels: ['master_final_v3'] });

    pn.addListener({
        message: function(s) {
            document.getElementById('msgs').innerHTML += `<div class="msg-line"><b style="color:var(--master)">[Ø§Ù„Ù…Ø§Ø³ØªØ±]:</b> ${s.message.text}</div>`;
            document.getElementById('msgs').scrollTop = document.getElementById('msgs').scrollHeight;
        }
    });

    function sendMsg() {
        const i = document.getElementById('minp');
        if(i.value.trim()) {
            pn.publish({ channel: 'master_final_v3', message: { text: i.value } });
            i.value = '';
        }
    }

    function addRoom() {
        let n = prompt("Ø§Ø³Ù… Ø§Ù„ØºØ±ÙØ©:");
        if(n) {
            document.getElementById('room-list').innerHTML += `<button class="btn" style="background:#111; color:#fff; border:1px solid #333;"># ${n}</button>`;
        }
    }

    document.getElementById('minp').onkeypress = (e) => { if(e.key === 'Enter') sendMsg(); };
</script>
</body>
</html
