<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø§Ø³ØªØ± Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ</title>
    <style>
        :root { --glow: #00f2ff; --bg: #050505; --panel: #111; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Tahoma', sans-serif; }
        
        body { background: var(--bg); color: #fff; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }

        /* --- Ø§Ù„Ù‡ÙŠØ¯Ø± --- */
        header { 
            height: 60px; background: #000; border-bottom: 2px solid var(--glow);
            display: flex; justify-content: space-between; align-items: center; padding: 0 15px;
            box-shadow: 0 0 15px var(--glow); z-index: 1000;
        }

        /* --- Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ --- */
        .wrapper { flex: 1; display: flex; overflow: hidden; position: relative; }

        /* --- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØºØ±Ù (Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„ÙØ¹Ù„ÙŠ) --- */
        #rooms-nav { 
            width: 80px; background: #000; border-left: 1px solid #222; 
            display: flex; flex-direction: column; align-items: center; padding: 15px 0; gap: 15px;
        }
        .room-unit { 
            width: 55px; height: 55px; background: #111; border: 1px solid #333; 
            border-radius: 12px; cursor: pointer; display: flex; align-items: center; 
            justify-content: center; font-size: 10px; text-align: center; color: #777;
        }
        .room-unit.active { border-color: var(--glow); color: var(--glow); box-shadow: 0 0 10px var(--glow); }

        /* --- Ø³Ø§Ø­Ø© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© --- */
        #chat-main { flex: 1; display: flex; flex-direction: column; position: relative; }
        #msg-screen { flex: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }

        /* --- Ø§Ù„Ø±ØªØ¨ ÙˆØ§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…ØªÙˆÙ‡Ø¬Ø© --- */
        .msg-neon { 
            background: rgba(255,255,255,0.03); padding: 10px; border-radius: 10px;
            border-right: 4px solid var(--glow); animation: fadeIn 0.3s;
        }
        .master-rank { color: #ff004c; text-shadow: 0 0 8px #ff004c; font-weight: bold; }
        .king-rank { color: #f1c40f; text-shadow: 0 0 8px #f1c40f; font-weight: bold; }

        /* --- Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© --- */
        .modal { 
            position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 9999; 
            display: none; justify-content: center; align-items: center;
        }
        .modal-box { 
            background: #111; border: 2px solid var(--glow); padding: 20px; 
            border-radius: 15px; width: 300px; text-align: center;
        }

        /* --- Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ --- */
        .input-bar { padding: 10px; background: #000; display: flex; gap: 10px; border-top: 1px solid #222; }
        #main-inp { flex: 1; padding: 12px; background: #111; border: 1px solid #333; color: #fff; border-radius: 25px; outline: none; }
        .btn-send { background: var(--glow); border: none; padding: 0 20px; border-radius: 25px; font-weight: bold; cursor: pointer; }

        /* --- Ù…Ø´ØºÙ„ ÙŠÙˆØªÙŠÙˆØ¨ --- */
        #yt-box {
            position: absolute; top: 10px; left: 10px; width: 300px; background: #000;
            border: 2px solid var(--glow); border-radius: 10px; display: none; z-index: 5000;
        }
    </style>
</head>
<body>

    <header>
        <div onclick="openM('room-modal')" style="cursor:pointer; color:var(--glow)">â•<br>ØºØ±ÙØ©</div>
        <h2 style="text-shadow: 0 0 10px var(--glow);">MASTER CONTROL</h2>
        <div onclick="openM('profile-modal')" style="cursor:pointer; color:var(--glow)">ğŸ‘¤<br>Ù…Ù„ÙÙŠ</div>
    </header>

    <div class="wrapper">
        <div id="rooms-nav">
            <div class="room-unit active" onclick="switchRoom('Ø§Ù„Ø¹Ø§Ù…Ø©', this)">ØºØ±ÙØ©<br>Ø¹Ø§Ù…Ø©</div>
        </div>

        <div id="chat-main">
            <div id="msg-screen"></div>

            <div id="yt-box">
                <div style="background:#222; padding:5px; display:flex; justify-content:space-between; font-size:10px;">
                    <span>ğŸ“º ÙŠÙˆØªÙŠÙˆØ¨</span>
                    <span onclick="document.getElementById('yt-box').style.display='none'" style="color:red; cursor:pointer;">X</span>
                </div>
                <div id="yt-frame"></div>
            </div>

            <div class="input-bar">
                <input type="text" id="main-inp" placeholder="Ø§ÙƒØªØ¨ Ù‡Ù†Ø§...">
                <button class="btn-send" onclick="send()">Ø¥Ø±Ø³Ø§Ù„</button>
            </div>
        </div>
    </div>

    <div id="room-modal" class="modal">
        <div class="modal-box">
            <h3>Ø¥Ù†Ø´Ø§Ø¡ ØºØ±ÙØ© Ø¬Ø¯ÙŠØ¯Ø©</h3>
            <input type="text" id="room-name" placeholder="Ø§Ø³Ù… Ø§Ù„ØºØ±ÙØ©" style="width:100%; padding:10px; margin:15px 0; background:#000; color:#fff; border:1px solid #333;">
            <button onclick="addRoom()" style="width:100%; padding:10px; background:var(--glow); border:none; font-weight:bold;">ØªØ£ÙƒÙŠØ¯</button>
            <button onclick="closeM('room-modal')" style="width:100%; padding:10px; background:#333; color:#fff; border:none; margin-top:5px;">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>

    <div id="profile-modal" class="modal">
        <div class="modal-box">
            <h3 id="p-name" class="master-rank">Ø§Ù„Ù…Ø§Ø³ØªØ±</h3>
            <input type="text" id="name-inp" placeholder="ØªØºÙŠÙŠØ± Ø§Ø³Ù…Ùƒ" style="width:100%; padding:10px; margin:15px 0; background:#000; color:#fff; border:1px solid #333;">
            <button onclick="saveP()" style="width:100%; padding:10px; background:var(--glow); border:none; font-weight:bold;">Ø­ÙØ¸</button>
            <button onclick="closeM('profile-modal')" style="width:100%; padding:10px; background:#333; color:#fff; border:none; margin-top:5px;">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>

    <script>
        let currentR = "Ø§Ù„Ø¹Ø§Ù…Ø©";
        let rooms = { "Ø§Ù„Ø¹Ø§Ù…Ø©": [] }; // Ù‡Ù†Ø§ ØªØ®Ø²Ù† Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ÙØ¹Ù„ÙŠØ§Ù‹ Ù„ÙƒÙ„ ØºØ±ÙØ©
        let myName = "Ø§Ù„Ù…Ø§Ø³ØªØ±";

        function openM(id) { document.getElementById(id).style.display = 'flex'; }
        function closeM(id) { document.getElementById(id).style.display = 'none'; }

        // ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
        function send() {
            const inp = document.getElementById('main-inp');
            if(!inp.value.trim()) return;

            // ÙƒØ´Ù ÙŠÙˆØªÙŠÙˆØ¨
            if(inp.value.includes('youtube.com')) {
                const id = inp.value.split('v=')[1];
                document.getElementById('yt-box').style.display = 'block';
                document.getElementById('yt-frame').innerHTML = `<iframe width="100%" height="180" src="https://www.youtube.com/embed/${id}" frameborder="0"></iframe>`;
                inp.value = ''; return;
            }

            const html = `<div class="msg-neon"><span class="master-rank">${myName}:</span><br>${inp.value}</div>`;
            rooms[currentR].push(html); // ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙÙŠ Ø§Ù„ØºØ±ÙØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ© ÙÙ‚Ø·
            render();
            inp.value = '';
        }

        // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØºØ±ÙØ© (ÙØªØ­ Ø´ÙŠØ¡ ÙØ¹Ù„ÙŠ)
        function switchRoom(name, el) {
            currentR = name;
            document.querySelectorAll('.room-unit').forEach(u => u.classList.remove('active'));
            el.classList.add('active');
            render(); // Ù…Ø³Ø­ Ø§Ù„Ø´Ø§Ø´Ø© ÙˆØªØ­Ù…ÙŠÙ„ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØºØ±ÙØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
        }

        // Ø¥Ø¶Ø§ÙØ© ØºØ±ÙØ© Ø¬Ø¯ÙŠØ¯Ø© ÙØ¹Ø§Ù„Ø©
        function addRoom() {
            const name = document.getElementById('room-name').value;
            if(name && !rooms[name]) {
                rooms[name] = [];
                const btn = document.createElement('div');
                btn.className = 'room-unit';
                btn.innerText = name;
                btn.onclick = function() { switchRoom(name, this); };
                document.getElementById('rooms-nav').appendChild(btn);
                closeM('room-modal');
            }
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
        function render() {
            const screen = document.getElementById('msg-screen');
            screen.innerHTML = rooms[currentR].join(''); // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØºØ±ÙØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ© ÙÙ‚Ø·
            screen.scrollTop = screen.scrollHeight;
        }

        function saveP() {
            const n = document.getElementById('name-inp').value;
            if(n) { myName = n; document.getElementById('p-name').innerText = n; }
            closeM('profile-modal');
        }

        document.getElementById('main-inp').onkeypress = (e) => { if(e.key === 'Enter') send(); };
    </script>
</body>
</html>
