<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Master Chat v2025</title>
    <style>
        :root { --accent: #00e5ff; --bg: #08080c; --card: #14141a; --text: #f0f0f0; }
        
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, sans-serif; }
        
        body { background: var(--bg); color: var(--text); height: 100vh; display: flex; overflow: hidden; }

        /* --- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© Ø§Ù„Ø°ÙƒÙŠØ© --- */
        #sidebar { 
            width: 280px; background: var(--card); border-left: 1px solid #222;
            transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1); display: flex; flex-direction: column; z-index: 2000;
        }

        /* --- Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© --- */
        main { flex: 1; display: flex; flex-direction: column; position: relative; }

        header { 
            height: 60px; background: #000; border-bottom: 1px solid var(--accent);
            display: flex; justify-content: space-between; align-items: center; padding: 0 15px;
        }

        #chat-window { flex: 1; padding: 20px; overflow-y: auto; background-image: radial-gradient(#1a1a2e 0.5px, transparent 0.5px); background-size: 20px 20px; }

        /* --- ÙÙ‚Ø§Ø¹Ø§Øª Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© (Ù…ÙˆØ¯Ø±Ù†) --- */
        .msg-box { display: flex; gap: 12px; margin-bottom: 20px; animation: slideIn 0.3s; }
        .u-pic { width: 48px; height: 48px; border-radius: 12px; border: 2px solid var(--accent); box-shadow: 0 0 10px rgba(0,229,255,0.3); }
        .u-data { background: #1a1a24; padding: 12px 15px; border-radius: 0 15px 15px 15px; max-width: 80%; border-right: 3px solid var(--accent); }
        .u-info { font-size: 13px; font-weight: bold; color: var(--accent); display: block; margin-bottom: 5px; }
        .u-signature { font-size: 10px; color: #666; margin-top: 8px; border-top: 1px solid #333; padding-top: 5px; font-style: italic; }

        /* --- Ù…Ø´ØºÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ --- */
        #pip-video {
            position: absolute; top: 70px; left: 15px; width: 320px; background: #000;
            border: 1px solid var(--accent); border-radius: 12px; display: none; z-index: 3000;
            box-shadow: 0 15px 40px rgba(0,0,0,0.8);
        }
        .pip-bar { background: #111; padding: 6px 12px; display: flex; justify-content: space-between; font-size: 12px; border-radius: 12px 12px 0 0; }
        .pip-body iframe { width: 100%; height: 180px; border-radius: 0 0 12px 12px; }
        #pip-video.minimized { width: 120px; height: 40px; }
        #pip-video.minimized .pip-body { display: none; }

        /* --- Ø´Ø±ÙŠØ· Ø§Ù„ØºØ±Ù --- */
        .rooms-row { display: flex; gap: 10px; padding: 12px; background: #0a0a0f; overflow-x: auto; border-bottom: 1px solid #111; }
        .room-tag { background: #1a1a24; padding: 6px 16px; border-radius: 50px; font-size: 12px; cursor: pointer; white-space: nowrap; border: 1px solid #333; }
        .room-tag.active { border-color: var(--accent); color: var(--accent); }

        /* --- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ÙƒØªØ§Ø¨Ø© --- */
        .input-bar { padding: 15px; background: #000; border-top: 1px solid #222; display: flex; gap: 10px; }
        #msg-inp { flex: 1; padding: 12px; background: #111; border: 1px solid #333; color: #fff; border-radius: 10px; outline: none; }
        .send-btn { background: var(--accent); color: #000; border: none; padding: 0 20px; border-radius: 10px; font-weight: bold; cursor: pointer; }

        /* --- Ø§Ù„ØªÙˆØ§Ø²Ù† (Responsive) --- */
        @media (max-width: 768px) {
            #sidebar { position: fixed; right: -280px; height: 100%; }
            #sidebar.active { right: 0; }
            #pip-video { width: 90%; left: 5%; }
        }

        @keyframes slideIn { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }
    </style>
</head>
<body>

    <div id="sidebar">
        <div style="padding: 25px; text-align: center;">
            <img id="avatar-preview" src="https://cdn-icons-png.flaticon.com/512/149/149071.png" style="width: 90px; height: 90px; border-radius: 20px; border: 2px solid var(--accent);">
            <h3 style="margin-top: 15px; color: var(--accent);">Ù…Ù€Ø§Ø³Ù€ØªÙ€Ø± Ø§Ù„Ù€Ø´Ù€Ø§Øª</h3>
            <p id="user-status" style="font-size: 12px; color: #00ff00;">ğŸŸ¢ Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù†</p>
        </div>
        <div style="padding: 15px;">
            <input type="file" id="img-upload" style="font-size: 10px; margin-bottom: 20px; width: 100%;">
            <input type="text" id="sig-inp" placeholder="Ø§ÙƒØªØ¨ ØªÙˆÙ‚ÙŠØ¹Ùƒ Ù‡Ù†Ø§..." style="width: 100%; padding: 10px; background:#000; border:1px solid #333; color:var(--accent); border-radius:5px; margin-bottom:10px;">
            <button onclick="addRoom()" style="width: 100%; padding: 12px; background: var(--accent); color: #000; border: none; font-weight: bold; border-radius: 5px; cursor: pointer;">â• Ø¥Ø¶Ø§ÙØ© ØºØ±ÙØ© Ø¬Ø¯ÙŠØ¯Ø©</button>
            <button onclick="document.getElementById('chat-window').innerHTML=''" style="width: 100%; padding: 12px; background: #111; color: red; border: 1px solid red; font-weight: bold; border-radius: 5px; margin-top: 10px; cursor: pointer;">ğŸ§¹ Ù…Ø³Ø­ Ø§Ù„Ø´Ø§Øª</button>
        </div>
    </div>

    <main>
        <header>
            <button onclick="toggleMenu()" style="background:none; border:none; color:var(--accent); font-size:22px; cursor:pointer;">â˜°</button>
            <div style="font-weight: bold; font-size: 18px; letter-spacing: 2px;">PRINCE <span style="color:var(--accent)">MASTER</span></div>
            <div style="width: 30px;"></div>
        </header>

        <div class="rooms-row" id="roomsList">
            <div class="room-tag active">Ø§Ù„Ø¹Ø§Ù…Ø©</div>
            <div class="room-tag">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù„ÙŠØ§</div>
        </div>

        <div id="chat-window">
            <div style="text-align: center; color: #444; font-size: 11px; margin-top: 50px;">-- Ø¨Ù€ÙˆØ§Ø¨Ù€Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ù…Ù€ÙÙ€ØªÙ€ÙˆØ­Ù€Ø© --</div>
        </div>

        <div id="pip-video">
            <div class="pip-bar">
                <span>ğŸ“º Ø¨Ù€Ø« Ù…Ù€Ø¨Ø§Ø´Ù€Ø±</span>
                <div>
                    <span onclick="minVideo()" style="cursor:pointer; margin-left:12px;">-</span>
                    <span onclick="closeVideo()" style="cursor:pointer; color:red;">X</span>
                </div>
            </div>
            <div class="pip-body" id="pipBody"></div>
        </div>

        <div class="input-bar">
            <input type="text" id="msg-inp" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø© Ø£Ùˆ Ø±Ø§Ø¨Ø· ÙŠÙˆØªÙŠÙˆØ¨...">
            <button class="send-btn" onclick="sendMessage()">Ø¥Ø±Ø³Ø§Ù„</button>
        </div>
    </main>

    <script>
        let myPhoto = "https://cdn-icons-png.flaticon.com/512/149/149071.png";

        function toggleMenu() { document.getElementById('sidebar').classList.toggle('active'); }

        function sendMessage() {
            const inp = document.getElementById('msg-inp');
            const box = document.getElementById('chat-window');
            if(!inp.value.trim()) return;

            // ÙƒØ´Ù ÙŠÙˆØªÙŠÙˆØ¨
            if(inp.value.includes('youtube.com') || inp.value.includes('youtu.be')) {
                const vidId = inp.value.split('v=')[1] || inp.value.split('/').pop();
                document.getElementById('pip-video').style.display = 'block';
                document.getElementById('pipBody').innerHTML = `<iframe src="https://www.youtube.com/embed/${vidId.split('&')[0]}?autoplay=1" frameborder="0" allowfullscreen></iframe>`;
                inp.value = ''; return;
            }

            const sig = document.getElementById('sig-inp').value || "Ø¥Ø¯Ø§Ø±Ø© Ø´Ø§Øª Ø§Ù„Ø¨Ø±Ù†Ø³";
            const html = `
                <div class="msg-box">
                    <img src="${myPhoto}" class="u-pic">
                    <div class="u-data">
                        <span class="u-info">Ø§Ù„Ù€Ø¨Ù€Ø±Ù†Ù€Ø³ (Ø§Ù„Ù…Ø§Ø³ØªØ±)</span>
                        <div style="color:#fff;">${inp.value}</div>
                        <span class="u-signature">ğŸ“ ${sig}</span>
                    </div>
                </div>`;
            box.innerHTML += html;
            inp.value = '';
            box.scrollTop = box.scrollHeight;
            if(window.innerWidth < 768) document.getElementById('sidebar').classList.remove('active');
        }

        function addRoom() {
            const name = prompt("Ù…Ø§ Ø§Ø³Ù… Ø§Ù„ØºØ±ÙØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©ØŸ");
            if(name) {
                const tag = document.createElement('div');
                tag.className = 'room-tag';
                tag.innerText = name;
                tag.onclick = function() {
                    document.querySelectorAll('.room-tag').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                };
                document.getElementById('roomsList').appendChild(tag);
            }
        }

        function closeVideo() { 
            document.getElementById('pip-video').style.display = 'none'; 
            document.getElementById('pipBody').innerHTML = '';
        }

        function minVideo() {
            document.getElementById('pip-video').classList.toggle('minimized');
        }

        document.getElementById('img-upload').onchange = function(e) {
            const r = new FileReader();
            r.onload = function() {
                myPhoto = r.result;
                document.getElementById('avatar-preview').src = r.result;
            };
            r.readAsDataURL(e.target.files[0]);
        };

        document.getElementById('msg-inp').onkeypress = (e) => { if(e.key === 'Enter') sendMessage(); };
    </script>
</body>
</html>
