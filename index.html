<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ALLOSH DOMINATION V22 ğŸ‘‘</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@700;900&display=swap');
        :root { --gold: #ffd700; --red: #ff3c00; --glass: rgba(0,0,0,0.8); }
        * { box-sizing: border-box; font-family: 'Cairo', sans-serif; margin: 0; padding: 0; }
        
        body { background: #000; color: white; overflow: hidden; height: 100vh; position: fixed; width: 100%; }
        
        /* Ø®Ù„ÙÙŠØ© ÙØ®Ù…Ø© Ø¬Ø¯Ø§Ù‹ */
        .royal-bg { position: fixed; inset: 0; background: radial-gradient(circle at center, #1a0a00 0%, #000 100%); z-index: -2; }
        .stars-anim { position: fixed; inset: 0; background: url('https://www.transparenttextures.com/patterns/stardust.png'); z-index: -1; animation: move 100s linear infinite; opacity: 0.4; }
        @keyframes move { from { background-position: 0 0; } to { background-position: 1000px 1000px; } }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠ */
        .top-nav { height: 65px; background: var(--glass); border-bottom: 2px solid var(--gold); display: flex; align-items: center; justify-content: space-between; padding: 0 15px; z-index: 2000; position: relative; }
        .nav-btn { background: none; border: none; font-size: 28px; cursor: pointer; color: var(--gold); filter: drop-shadow(0 0 5px gold); }

        /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙŠÙ…Ù†Ù‰ ÙˆØ§Ù„ÙŠØ³Ø±Ù‰ (ØªÙ†Ø³Ø¯ ÙˆØªÙ†ÙØªØ­) */
        .drawer { position: fixed; top: 65px; bottom: 85px; width: 260px; background: rgba(10,5,0,0.95); border: 1px solid var(--gold); transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); z-index: 1500; overflow-y: auto; backdrop-filter: blur(10px); }
        #right-drawer { right: -265px; border-radius: 20px 0 0 20px; }
        #left-drawer { left: -265px; border-radius: 0 20px 20px 0; }
        .drawer.open { right: 0 !important; left: 0 !important; }

        /* Ø§Ù„Ø´Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
        .chat-container { position: absolute; top: 65px; bottom: 85px; width: 100%; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; }
        .msg-line { display: flex; gap: 10px; align-items: flex-start; animation: pop 0.3s ease; }
        @keyframes pop { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }
        
        .u-pic { width: 50px; height: 50px; border-radius: 50%; border: 2px solid var(--gold); box-shadow: 0 0 10px gold; }
        .bubble { background: rgba(255,255,255,0.05); padding: 12px; border-radius: 18px; border: 1px solid rgba(255,215,0,0.2); max-width: 75%; position: relative; }
        .owner-bubble { border-right: 4px solid var(--red); background: rgba(255,60,0,0.1); }

        /* Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ù…Ø§Ù„Ùƒ ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† */
        .king-card { text-align: center; padding: 20px; border-bottom: 1px solid #333; }
        .king-crown { font-size: 50px; animation: bounce 2s infinite; display: block; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

        /* Ø§Ù„Ø¨Ø§Ø± Ø§Ù„Ø³ÙÙ„ÙŠ */
        .bottom-bar { position: fixed; bottom: 0; width: 100%; height: 85px; background: #000; border-top: 2px solid var(--gold); display: flex; align-items: center; padding: 0 15px; gap: 10px; z-index: 2000; }
        #msg-input { flex: 1; height: 50px; background: #111; border: 1px solid #333; border-radius: 25px; color: #fff; padding: 0 20px; outline: none; }
        .send-btn { width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(45deg, var(--gold), var(--red)); border: none; color: #000; font-size: 20px; cursor: pointer; }

        /* Ù„ÙˆØ­Ø© Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠØ§Øª */
        #emoji-box { position: absolute; bottom: 90px; width: 100%; height: 200px; background: #000; border: 1px solid var(--gold); display: none; grid-template-columns: repeat(5, 1fr); padding: 10px; overflow-y: auto; }
    </style>
</head>
<body>

<div class="royal-bg"></div>
<div class="stars-anim"></div>

<div class="top-nav">
    <button class="nav-btn" onclick="toggleD('left-drawer')">âš™ï¸</button>
    <div style="text-align:center">
        <div style="color:var(--gold); font-weight:900; font-size:18px; text-shadow:0 0 10px gold;">ALLOSH DOMINATION</div>
        <div style="font-size:10px; color:var(--red);">â— Ù†Ø¸Ø§Ù… Ø§Ù„Ø³ÙŠØ§Ø¯Ø© Ù…ÙØ¹Ù„</div>
    </div>
    <button class="nav-btn" onclick="toggleD('right-drawer')">ğŸ‘¥</button>
</div>

<div id="right-drawer" class="drawer">
    <div class="king-card">
        <span class="king-crown">ğŸ‘‘</span>
        <h2 id="king-name" style="color:var(--gold)">Ø¹Ù„ÙˆØ´</h2>
        <small style="color:var(--red)">Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠ</small>
    </div>
    <div id="online-list" style="padding:10px"></div>
</div>

<div id="left-drawer" class="drawer">
    <div style="padding:20px; text-align:center;">
        <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" style="width:80px; border:3px solid var(--gold); border-radius:50%;">
        <h3>Ù…Ù„Ù Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±</h3>
        <hr style="margin:20px 0; opacity:0.1;">
        <button onclick="clearChat()" style="width:100%; padding:12px; background:none; border:1px solid red; color:red; border-radius:10px; margin-bottom:10px;">Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„Ø§Øª ğŸ§¹</button>
        <button onclick="location.reload()" style="width:100%; padding:12px; background:none; border:1px solid var(--gold); color:var(--gold); border-radius:10px;">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø¸Ø§Ù… ğŸ”„</button>
    </div>
</div>

<div class="chat-container" id="chat-box"></div>

<div id="emoji-box">
    <span onclick="sendEmoji('ğŸ‘‘')" style="font-size:30px; cursor:pointer">ğŸ‘‘</span>
    <span onclick="sendEmoji('ğŸ”¥')" style="font-size:30px; cursor:pointer">ğŸ”¥</span>
    <span onclick="sendEmoji('ğŸ’')" style="font-size:30px; cursor:pointer">ğŸ’</span>
    <span onclick="sendEmoji('ğŸš€')" style="font-size:30px; cursor:pointer">ğŸš€</span>
</div>

<div class="bottom-bar">
    <button class="nav-btn" onclick="toggleEmoji()">ğŸ˜Š</button>
    <input type="text" id="msg-input" placeholder="ØªÙƒÙ„Ù… Ù„Ù€ÙŠØ³Ù…Ø¹ Ø§Ù„Ø¹Ø§Ù„Ù…..." onkeypress="if(event.key==='Enter') send()">
    <button class="send-btn" onclick="send()">ğŸš€</button>
</div>

<script>
    const config = { databaseURL: "https://masterchat-f2da9-default-rtdb.firebaseio.com" };
    firebase.initializeApp(config);
    const db = firebase.database();

    let me = { name: "Ø¹Ù„ÙˆØ´", avatar: "https://cdn-icons-png.flaticon.com/512/3135/3135715.png", rank: "Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±" };

    function toggleD(id) {
        document.querySelectorAll('.drawer').forEach(d => { if(d.id !== id) d.classList.remove('open'); });
        document.getElementById(id).classList.toggle('open');
    }
    
    function toggleEmoji() { let b = document.getElementById('emoji-box'); b.style.display = (b.style.display==='grid'?'none':'grid'); }

    function send() {
        let i = document.getElementById('msg-input'); if(!i.value) return;
        db.ref('msgs_v22').push({ sender: me.name, text: i.value, avatar: me.avatar, isOwner: true });
        i.value = "";
    }

    function sendEmoji(e) { db.ref('msgs_v22').push({ sender: me.name, text: e, avatar: me.avatar, isOwner: true }); toggleEmoji(); }

    db.ref('msgs_v22').limitToLast(40).on('child_added', s => {
        let d = s.val();
        let box = document.getElementById('chat-box');
        let div = document.createElement('div');
        div.className = "msg-line";
        div.innerHTML = `<img src="${d.avatar}" class="u-pic">
                         <div class="bubble ${d.isOwner?'owner-bubble':''}">
                            <b style="color:var(--gold); font-size:12px;">${d.sender}</b><br>${d.text}
                         </div>`;
        box.appendChild(div);
        box.scrollTop = box.scrollHeight;
    });

    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„Ø¨ÙˆØª
    db.ref('online_v22/'+me.name).set(true);
    db.ref('online_v22/'+me.name).onDisconnect().remove();
    
    db.ref('online_v22').on('value', s => {
        let list = document.getElementById('online-list');
        list.innerHTML = "";
        s.forEach(u => {
            list.innerHTML += `<div style="padding:10px; border-bottom:1px solid #111;">ğŸŸ¢ ${u.key}</div>`;
        });
    });

    function clearChat() { if(confirm("Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„Ø§ØªØŸ")) db.ref('msgs_v22').remove(); }

    setTimeout(() => {
        db.ref('msgs_v22').push({ sender: "Ø¹Ù„ÙˆØ´ Ø¨ÙˆØª ğŸ¤–", text: "ØªÙ… ÙØªØ­ Ø¨ÙˆØ§Ø¨Ø§Øª Ø§Ù„Ø¹Ø±Ø´.. Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø£ÙˆØ§Ù…Ø±Ùƒ ÙŠØ§ Ù…Ù„Ùƒ!", avatar: "https://cdn-icons-png.flaticon.com/512/4712/4712035.png", isOwner: false });
    }, 1500);
</script>
</body>
</html>
