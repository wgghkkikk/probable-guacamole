<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>ğŸ‘‘ Ù…Ù…Ù„ÙƒØ© Ø¹Ù„ÙˆØ´ Ø§Ù„Ø£Ø³Ø·ÙˆØ±ÙŠØ© ğŸ‘‘</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { background: #000; color: gold; font-family: sans-serif; text-align: center; margin: 0; overflow: hidden; }
        #royal-header { background: linear-gradient(#d4af37, #8a6d3b); color: #000; padding: 10px; font-weight: bold; font-size: 22px; }
        #chat-screen { height: 50vh; overflow-y: auto; background: rgba(0,0,0,0.9); border: 2px solid gold; margin: 15px auto; width: 90%; padding: 10px; border-radius: 15px; text-align: left; }
        #video-box { position: absolute; top: 60px; right: 10px; width: 240px; background: #111; border: 2px solid gold; padding: 10px; border-radius: 12px; z-index: 1000; }
        #player-frame { width: 100%; height: 150px; border-radius: 8px; border: 1px solid #444; background: #000; }
        #search-input { width: 85%; padding: 8px; margin-bottom: 5px; border-radius: 5px; border: 1px solid gold; background: #222; color: #fff; }
        #input-area { position: fixed; bottom: 15px; width: 100%; }
        .royal-btn { background: gold; color: #000; border: none; padding: 10px 20px; border-radius: 20px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>

    <div id="royal-header">ğŸ‘‘ Ù…Ù…Ù„ÙƒØ© Ø¹Ù„ÙˆØ´: Ø¥ØµØ¯Ø§Ø± Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ ğŸ‘‘</div>

    <div id="video-box">
        <input id="video-query" type="text" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„ÙÙŠØ¯ÙŠÙˆ...">
        <button class="royal-btn" onclick="playNow()" style="width:100%; margin-top:5px;">ØªØ´ØºÙŠÙ„ Ø¯Ø§Ø®Ù„ÙŠ ğŸ¬</button>
        <div id="player-container" style="margin-top:10px;">
             <div id="placeholder" style="color:#555; font-size:12px; padding:20px;">Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø³ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§</div>
        </div>
    </div>

    <div id="chat-screen"></div>

    <div id="input-area">
        <input id="chat-input" type="text" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ...">
        <button class="royal-btn" onclick="sendMsg()">Ø¥Ø±Ø³Ø§Ù„ âœ¨</button>
    </div>

    <script>
        const firebaseConfig = { databaseURL: "https://alloush-kingdom-default-rtdb.firebaseio.com" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        function playNow() {
            let query = document.getElementById('video-query').value;
            if(query) {
                // ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ù€ "no-cookie" Ù„ØªØ¬Ø§ÙˆØ² Ù‚ÙŠÙˆØ¯ ÙŠÙˆØªÙŠÙˆØ¨ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠØ© ÙˆØ§Ù„ØªÙ‚Ù†ÙŠØ©
                let cleanQuery = encodeURIComponent(query);
                let embedUrl = `https://www.youtube-nocookie.com/embed?listType=search&list=${cleanQuery}&autoplay=1`;
                
                document.getElementById('player-container').innerHTML = 
                    `<iframe id="player-frame" src="${embedUrl}" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>`;
            }
        }

        function sendMsg() {
            let input = document.getElementById('chat-input');
            if(input.value.trim() !== "") {
                db.ref("messages").push().set({ user: "Ø¹Ù„ÙˆØ´", text: input.value, rank: "Ù…Ù„Ùƒ" });
                input.value = "";
            }
        }

        db.ref("messages").on("child_added", (snapshot) => {
            let data = snapshot.val();
            document.getElementById('chat-screen').innerHTML += `<div><b>[${data.rank}] ${data.user}:</b> ${data.text}</div>`;
            document.getElementById('chat-screen').scrollTop = document.getElementById('chat-screen').scrollHeight;
        });
    </script>
</body>
</html>
