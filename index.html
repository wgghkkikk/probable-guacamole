<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø´Ø§Øª Ø§Ù„Ø¨Ø±Ù†Ø³ | Ù…ØªØ¬Ø§ÙˆØ¨</title>
    <style>
        :root { --gold: #ff9800; --bg: #0b0b0b; --panel: #1a1a1a; --admin: #ff3e3e; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Tahoma', sans-serif; }
        
        body { background: var(--bg); color: #fff; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }

        /* --- Ø§Ù„Ù‡ÙŠØ¯Ø± --- */
        header { 
            background: #000; padding: 10px 15px; border-bottom: 2px solid var(--gold); 
            display: flex; justify-content: space-between; align-items: center; z-index: 1001; 
        }
        .logo { font-weight: bold; color: var(--gold); font-size: 1.2rem; }

        /* --- Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ --- */
        .app-main { display: flex; flex: 1; overflow: hidden; position: relative; }

        /* --- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© (Ù…ØªØ¬Ø§ÙˆØ¨Ø©) --- */
        #sidebar { 
            width: 260px; background: var(--panel); border-left: 1px solid #333;
            transition: 0.3s; display: flex; flex-direction: column; z-index: 1000;
        }

        /* --- Ø³Ø§Ø­Ø© Ø§Ù„Ø´Ø§Øª --- */
        .chat-container { flex: 1; display: flex; flex-direction: column; background: #050505; position: relative; }
        #chat-box { flex: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; }

        /* --- Ø§Ù„Ø±Ø³Ø§Ù„Ø© --- */
        .msg { display: flex; gap: 10px; align-items: flex-start; max-width: 90%; }
        .msg img { width: 45px; height: 45px; border-radius: 50%; border: 1px solid var(--gold); object-fit: cover; }
        .msg-body { background: #1a1a1a; padding: 10px; border-radius: 12px; border-bottom-right-radius: 2px; }
        .msg-name { color: var(--admin); font-weight: bold; font-size: 13px; display: block; margin-bottom: 4px; }
        .msg-text { font-size: 15px; line-height: 1.4; color: #eee; word-break: break-word; }
        .msg-sig { font-size: 10px; color: var(--gold); margin-top: 8px; border-top: 1px solid #333; padding-top: 4px; display: block; }

        /* --- Ù…Ø´ØºÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ --- */
        #video-wrap {
            position: absolute; top: 10px; left: 10px; width: 300px; background: #000;
            border: 2px solid var(--gold); border-radius: 10px; display: none; z-index: 2000;
        }
        .vid-head { background: #222; padding: 5px 10px; display: flex; justify-content: space-between; cursor: move; }
        #video-frame { height: 180px; width: 100%; }

        /* --- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ÙƒØªØ§Ø¨Ø© --- */
        .input-area { padding: 10px; background: #111; border-top: 1px solid #333; display: flex; gap: 10px; }
        #main-input { flex: 1; padding: 12px; background: #000; border: 1px solid #444; color: #fff; border-radius: 8px; outline: none; }
        .send-btn { background: var(--gold); border: none; padding: 0 20px; border-radius: 8px; cursor: pointer; font-weight: bold; }

        /* --- Ù†Ø¸Ø§Ù… Ø§Ù„ØºØ±Ù --- */
        .rooms { display: flex; gap: 8px; padding: 10px; background: #0f0f0f; border-bottom: 1px solid #222; overflow-x: auto; }
        .room-btn { background: #222; padding: 5px 15px; border-radius: 20px; font-size: 12px; white-space: nowrap; cursor: pointer; border: 1px solid #333; }
        .room-btn.active { border-color: var(--gold); color: var(--gold); }

        /* --- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ (Responsive) --- */
        @media (max-width: 768px) {
            #sidebar { 
                position: absolute; right: -260px; height: 100%; 
            }
            #sidebar.open { right: 0; }
            #video-wrap { width: 95%; left: 2.5%; }
            .msg { max-width: 95%; }
        }

        /* Ø²Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
        .menu-toggle { background: none; border: 1px solid var(--gold); color: var(--gold); padding: 5px 10px; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>

    <header>
        <button class="menu-toggle" onclick="toggleSidebar()">â˜° Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
        <div class="logo">Ø´Ø§Øª Ø§Ù„Ø¨Ø±Ù†Ø³</div>
        <button class="menu-toggle" onclick="toggleProfile()">ğŸ‘¤ Ù…Ù„ÙÙŠ</button>
    </header>

    <div class="app-main">
        <div id="sidebar">
            <div style="padding: 20px; text-align: center; border-bottom: 1px solid #333;">
                <img id="myImg" src="https://cdn-icons-png.flaticon.com/512/149/149071.png" style="width: 80px; height: 80px; border-radius: 50%; border: 2px solid var(--gold); object-fit: cover;">
                <h4 id="myName" style="margin-top: 10px; color: var(--admin);">Ø§Ù„Ù…Ø§Ø³ØªØ±</h4>
                <select id="myStatus" style="background:#000; color:#00ff00; border:none; font-size:11px; margin-top:5px;">
                    <option value="Ù…ØªØµÙ„">ğŸŸ¢ Ù…ØªØµÙ„</option>
                    <option value="Ù…Ø´ØºÙˆÙ„">ğŸ”´ Ù…Ø´ØºÙˆÙ„</option>
                </select>
            </div>
            <div style="padding: 15px;">
                <p style="font-size: 11px; color: #777;">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:</p>
                <button onclick="addRoom()" style="width:100%; padding:8px; margin-top:5px; background:var(--gold); border:none; border-radius:5px; cursor:pointer; font-weight:bold;">â• Ø¥Ø¶Ø§ÙØ© ØºØ±ÙØ©</button>
                <p style="font-size: 11px; color: #777; margin-top:15px;">ØªØºÙŠÙŠØ± Ø§Ù„ØµÙˆØ±Ø©:</p>
                <input type="file" id="fileInput" style="font-size:10px; margin-top:5px; width:100%;">
            </div>
        </div>

        <div class="chat-container">
            <div class="rooms" id="roomsList">
                <div class="room-btn active">Ø§Ù„ØºØ±ÙØ© Ø§Ù„Ø¹Ø§Ù…Ø©</div>
            </div>

            <div id="chat-box">
                <div style="color:var(--gold); text-align:center; font-size:12px; margin-top:20px;">âœ¨ ØªÙ… Ø§Ù†Ø¶Ù…Ø§Ù… ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Øª âœ¨</div>
            </div>

            <div id="video-wrap">
                <div class="vid-head">
                    <span style="font-size:10px; color:var(--gold);">ğŸ“º ÙŠÙˆØªÙŠÙˆØ¨ Ù…Ø¨Ø§Ø´Ø±</span>
                    <div>
                        <span onclick="minVid()" style="cursor:pointer; margin-left:10px;">-</span>
                        <span onclick="closeVid()" style="cursor:pointer; color:red;">X</span>
                    </div>
                </div>
                <div id="video-content"></div>
            </div>

            <div class="input-area">
                <input type="text" id="main-input" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø© Ø£Ùˆ Ø±Ø§Ø¨Ø· ÙŠÙˆØªÙŠÙˆØ¨...">
                <button class="send-btn" onclick="send()">Ø¥Ø±Ø³Ø§Ù„</button>
            </div>
        </div>
    </div>

    <script>
        let userData = { name: "Ø§Ù„Ø¨Ø±Ù†Ø³", photo: "https://cdn-icons-png.flaticon.com/512/149/149071.png", sig: "Ø³Ù„Ø·Ø§Ù† Ø²Ù…Ø§Ù†ÙŠ" };

        function toggleSidebar() { document.getElementById('sidebar').classList.toggle('open'); }
        function toggleProfile() { toggleSidebar(); } // ÙÙŠ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ ÙŠÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©

        function send() {
            const inp = document.getElementById('main-input');
            const box = document.getElementById('chat-box');
            if(!inp.value.trim()) return;

            // ÙƒØ´Ù ÙŠÙˆØªÙŠÙˆØ¨
            if(inp.value.includes('youtube.com') || inp.value.includes('youtu.be')) {
                const vidId = inp.value.split('v=')[1] || inp.value.split('/').pop();
                document.getElementById('video-wrap').style.display = 'block';
                document.getElementById('video-content').innerHTML = `<iframe id="video-frame" src="https://www.youtube.com/embed/${vidId.split('&')[0]}?autoplay=1" frameborder="0" allowfullscreen></iframe>`;
                inp.value = ''; return;
            }

            const html = `
                <div class="msg">
                    <img src="${userData.photo}">
                    <div class="msg-body">
                        <span class="msg-name">${userData.name}</span>
                        <div class="msg-text">${inp.value}</div>
                        <span class="msg-sig">ğŸ“ ${userData.sig}</span>
                    </div>
                </div>`;
            box.innerHTML += html;
            inp.value = '';
            box.scrollTop = box.scrollHeight;
            if(window.innerWidth < 768) document.getElementById('sidebar').classList.remove('open');
        }

        function addRoom() {
            const r = prompt("Ø§Ø³Ù… Ø§Ù„ØºØ±ÙØ©:");
            if(r) {
                const btn = document.createElement('div');
                btn.className = 'room-btn';
                btn.innerText = r;
                btn.onclick = function() {
                    document.querySelectorAll('.room-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                };
                document.getElementById('roomsList').appendChild(btn);
            }
        }

        function minVid() { 
            const v = document.getElementById('video-content');
            v.style.display = v.style.display === 'none' ? 'block' : 'none';
        }
        function closeVid() { 
            document.getElementById('video-wrap').style.display = 'none';
            document.getElementById('video-content').innerHTML = '';
        }

        document.getElementById('fileInput').onchange = function(e) {
            const reader = new FileReader();
            reader.onload = function() {
                userData.photo = reader.result;
                document.getElementById('myImg').src = reader.result;
            };
            reader.readAsDataURL(e.target.files[0]);
        };

        document.getElementById('main-input').onkeypress = (e) => { if(e.key === 'Enter') send(); };
    </script>
</body>
</html>
