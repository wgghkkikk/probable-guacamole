<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ğŸ‘‘ Ù…Ù…Ù„ÙƒØ© Ø¹Ù„ÙˆØ´ | ØµØ¨Øº Ø§Ù„Ù†Ùƒ ÙˆØ§Ù„Ø®Ø·</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        :root { --main-gold: #d4af37; }
        body { margin: 0; font-family: 'Segoe UI', Tahoma; background: #000; color: #fff; display: flex; height: 100vh; overflow: hidden; }
        
        header { background: #111; padding: 10px; border-bottom: 2px solid var(--main-gold); display: flex; justify-content: space-between; align-items: center; }
        .nav-btn { background: var(--main-gold); border: none; padding: 5px 15px; cursor: pointer; font-weight: bold; border-radius: 4px; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø´Ø§Øª */
        #chat-box { flex: 1; display: flex; flex-direction: column; position: relative; }
        #messages { flex: 1; overflow-y: auto; padding: 15px; background: #080808; }
        
        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø®Ø·ÙˆØ· Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© */
        @keyframes rainbow { 0% {color: red;} 20% {color: yellow;} 40% {color: lime;} 60% {color: cyan;} 80% {color: blue;} 100% {color: magenta;} }
        @keyframes glow { from { text-shadow: 0 0 5px #fff, 0 0 10px var(--main-gold); } to { text-shadow: 0 0 10px #fff, 0 0 20px var(--main-gold); } }
        .rainbow-text { animation: rainbow 2s infinite linear; font-weight: bold; }
        .glow-text { animation: glow 1s infinite alternate; }

        .line { border-bottom: 1px solid #1a1a1a; padding: 8px 0; font-size: 15px; }

        /* Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø£Ù„ÙˆØ§Ù† */
        #admin-panel { 
            position: absolute; top: 0; right: -300px; width: 280px; height: 100%; 
            background: #151515; border-right: 2px solid var(--main-gold); transition: 0.4s; z-index: 1000; padding: 20px; box-sizing: border-box;
        }
        .panel-open { right: 0 !important; }
        .control-group { margin-bottom: 20px; border-bottom: 1px solid #333; padding-bottom: 10px; }
        label { display: block; margin-bottom: 5px; color: var(--main-gold); font-size: 13px; }
        select, input[type="color"] { width: 100%; padding: 5px; background: #000; color: #fff; border: 1px solid #444; }

        footer { padding: 15px; background: #111; display: flex; gap: 10px; border-top: 1px solid var(--main-gold); }
        #msg-in { flex: 1; padding: 12px; border-radius: 5px; border: 1px solid #333; background: #000; color: #fff; outline: none; }
    </style>
</head>
<body>

    <div id="chat-box">
        <header>
            <div style="color:var(--main-gold); font-weight:bold;">ğŸ‘‘ Ù…Ù…Ù„ÙƒØ© Ø¹Ù„ÙˆØ´</div>
            <button class="nav-btn" onclick="document.getElementById('admin-panel').classList.toggle('panel-open')">ğŸ¨ ØµØ¨Øº Ø§Ù„Ø®Ø·</button>
        </header>

        <div id="messages"></div>

        <div id="admin-panel">
            <h3 style="color:var(--main-gold); text-align:center;">ğŸ¨ Ù…Ø®ØªØ¨Ø± Ø§Ù„Ø£Ù„ÙˆØ§Ù†</h3>
            
            <div class="control-group">
                <label>Ù„ÙˆÙ† Ø§Ù„Ø®Ø·:</label>
                <input type="color" id="font-color" value="#ffffff" onchange="updateStyle()">
            </div>

            <div class="control-group">
                <label>Ø­Ø±ÙƒØ© Ø§Ù„Ø®Ø·:</label>
                <select id="font-anim" onchange="updateStyle()">
                    <option value="">Ø¨Ø¯ÙˆÙ† Ø­Ø±ÙƒØ©</option>
                    <option value="rainbow-text">Ù‚ÙˆØ³ Ù‚Ø²Ø­ (Ù…ØªØ­Ø±Ùƒ)</option>
                    <option value="glow-text">ØªÙˆÙ‡Ø¬ Ù…Ù„ÙƒÙŠ</option>
                </select>
            </div>

            <div class="control-group">
                <label>Ø­Ø¬Ù… Ø§Ù„Ø®Ø·:</label>
                <select id="font-size" onchange="updateStyle()">
                    <option value="14px">Ø¹Ø§Ø¯ÙŠ</option>
                    <option value="18px">ÙƒØ¨ÙŠØ±</option>
                    <option value="22px">Ø¶Ø®Ù…</option>
                </select>
            </div>

            <button class="nav-btn" style="width:100%" onclick="document.getElementById('admin-panel').classList.toggle('panel-open')">ØªÙ… Ø§Ù„Ø­ÙØ¸ âœ…</button>
        </div>

        <footer>
            <input type="text" id="msg-in" placeholder="Ø§ÙƒØªØ¨ Ù…Ø±Ø³ÙˆÙ…Ùƒ Ø§Ù„Ù…Ù„ÙˆÙ†...">
            <button class="nav-btn" onclick="send()">Ø¥Ø±Ø³Ø§Ù„</button>
        </footer>
    </div>

    <script>
        const firebaseConfig = { databaseURL: "https://alloush-kingdom-default-rtdb.firebaseio.com" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        let currentStyle = { color: '#ffffff', anim: '', size: '14px' };

        function updateStyle() {
            currentStyle.color = document.getElementById('font-color').value;
            currentStyle.anim = document.getElementById('font-anim').value;
            currentStyle.size = document.getElementById('font-size').value;
        }

        function send() {
            const inp = document.getElementById('msg-in');
            if(inp.value.trim()) {
                db.ref("messages").push().set({
                    user: "Ø¹Ù„ÙˆØ´",
                    text: inp.value,
                    style: currentStyle,
                    time: new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})
                });
                inp.value = "";
            }
        }

        db.ref("messages").limitToLast(40).on("child_added", (snap) => {
            const d = snap.val();
            const m = document.getElementById('messages');
            const div = document.createElement('div');
            div.className = 'line';
            
            // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ù…Ø®ØªØ§Ø±
            const s = d.style || {color: '#fff', anim: '', size: '14px'};
            div.innerHTML = `
                <b style="color:var(--main-gold)">${d.user}:</b> 
                <span class="${s.anim}" style="color:${s.color}; font-size:${s.size};">
                    ${d.text}
                </span>
            `;
            m.appendChild(div);
            m.scrollTop = m.scrollHeight;
        });

        document.getElementById('msg-in').onkeypress = (e) => { if(e.key === 'Enter') send(); };
    </script>
</body>
</html>
