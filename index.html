<!DOCTYPE html>
<html>
<head>
    <title>Ù…Ù…Ù„ÙƒØ© Ø¹Ù„ÙˆØ´</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
</head>
<body style="background: #000; color: #fff; font-family: sans-serif; text-align: center;">

    <h2>ðŸ‘‘ Ø´Ø§Øª Ù…Ù…Ù„ÙƒØ© Ø¹Ù„ÙˆØ´ ðŸ‘‘</h2>
    <div id="chat-screen" style="height: 400px; overflow-y: auto; background: #111; border: 2px solid gold; margin: 20px; padding: 10px; text-align: left;"></div>
    
    <input id="chat-input" type="text" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..." style="width: 70%; padding: 10px;">
    <button onclick="sendMsg()" style="padding: 10px; background: gold; border: none; cursor: pointer;">Ø¥Ø±Ø³Ø§Ù„</button>

    <script>
        // Ø±Ø¨Ø· Ø§Ù„Ø³ÙŠØ±ÙØ±
        const firebaseConfig = { databaseURL: "https://alloush-kingdom-default-rtdb.firebaseio.com" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // Ø¨ØµÙ…Ø© Ø§Ù„Ù…Ù„Ùƒ
        function activateKing() {
            localStorage.setItem("is_king", "true");
            alert("ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨ØµÙ…Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ© Ø¨Ø¬Ù‡Ø§Ø²Ùƒ ÙŠØ§ Ù…Ù„Ùƒ Ø¹Ù„ÙˆØ´! ðŸ‘‘");
        }

        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
        function sendMsg() {
            let input = document.getElementById('chat-input');
            let user = localStorage.getItem("is_king") === "true" ? "ðŸ‘‘ Ø¹Ù„ÙˆØ´" : "Ø²Ø§Ø¦Ø±";
            let rank = localStorage.getItem("is_king") === "true" ? "Ù…Ù„Ùƒ Ø§Ù„Ù…Ù…Ù„ÙƒØ©" : "Ù…ÙˆØ§Ø·Ù†";

            if(input.value.trim() !== "") {
                db.ref("messages").push().set({
                    user: user,
                    text: input.value,
                    rank: rank
                });
                input.value = "";
            }
        }

        // Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ù„Ø§ÙŠÙ
        db.ref("messages").on("child_added", (snapshot) => {
            let msg = snapshot.val();
            document.getElementById('chat-screen').innerHTML += `
                <div style="border-bottom: 1px solid #333; padding: 5px;">
                    <b style="color:gold;">[${msg.rank}] ${msg.user}:</b> ${msg.text}
                </div>`;
            document.getElementById('chat-screen').scrollTop = document.getElementById('chat-screen').scrollHeight;
        });
    </script>
</body>
</html>
