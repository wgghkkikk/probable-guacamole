<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ğŸ‘‘ Ù…Ù…Ù„ÙƒØ© Ø¹Ù„ÙˆØ´ Ø§Ù„Ø£Ø³Ø·ÙˆØ±ÙŠØ© ğŸ‘‘</title>
    <style>
        :root { --gold: #ffd700; --royal-red: #8b0000; }
        body { margin: 0; background: #000; color: white; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; overflow: hidden; }

        /* 1. Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„ÙØ¶Ø§Ø¦ÙŠØ© ÙˆØ§Ù„Ù†Ø¬ÙˆÙ… ÙˆØ§Ù„Ø´Ù‡Ø¨ */
        #star-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2; background: radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%); }
        .star { position: absolute; background: white; border-radius: 50%; animation: twinkle var(--duration) infinite; }
        @keyframes twinkle { 0%, 100% { opacity: 0.3; transform: scale(1); } 50% { opacity: 1; transform: scale(1.2); } }

        /* 2. Ø§Ù„Ø³Ø§Ø¹Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ© Ø§Ù„Ø°Ù‡Ø¨ÙŠØ© */
        #royal-clock { position: fixed; top: 15px; left: 50%; transform: translateX(-50%); color: var(--gold); font-size: 22px; font-weight: bold; text-shadow: 0 0 10px gold; background: rgba(0,0,0,0.6); padding: 5px 25px; border-radius: 50px; border: 2px solid var(--gold); z-index: 2000; letter-spacing: 2px; }

        /* 3. ÙˆÙ…ÙŠØ¶ Ø§Ù„Ø¨Ø±Ù‚ ÙˆØ§Ù‡ØªØ²Ø§Ø² Ø§Ù„Ø´Ø§Ø´Ø© */
        #flash-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; opacity: 0; z-index: 10000; pointer-events: none; }
        .flash-active { animation: flash-anim 0.4s ease-out; }
        @keyframes flash-anim { 0%, 100% { opacity: 0; } 10%, 30% { opacity: 0.8; } }
        .shake-active { animation: shake 0.5s; animation-iteration-count: 2; }
        @keyframes shake { 0% { transform: translate(1px, 1px) rotate(0deg); } 10% { transform: translate(-1px, -2px) rotate(-1deg); } 100% { transform: translate(1px, 1px); } }

        /* 4. Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠØ§Øª (ÙÙŠ Ù†Øµ Ø§Ù„Ø´Ø§Ø´Ø©) */
        #emoji-list { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 85%; max-height: 400px; background: rgba(0,0,0,0.95); border: 3px double var(--gold); z-index: 5000; padding: 20px; display: none; grid-template-columns: repeat(auto-fill, minmax(45px, 1fr)); overflow-y: auto; box-shadow: 0 0 50px red; border-radius: 20px; }
        .emoji-item { cursor: pointer; transition: 0.3s; font-size: 30px; text-align: center; padding: 5px; }
        .pulse { animation: pulse-anim 1.5s infinite; filter: drop-shadow(0 0 5px gold); }
        @keyframes pulse-anim { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.2); } }

        /* 5. Ø§Ù„Ø¨Ø³Ø§Ø· Ø§Ù„Ø£Ø­Ù…Ø± ÙˆØ§Ù„Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø¹ ÙˆØ§Ù„Ù„Ø§ÙˆØ§Øª ğ“†© ğ“†ª */
        .line { padding: 12px; margin: 8px 0; border-radius: 10px; transition: 0.5s; }
        .royal-carpet { background: linear-gradient(90deg, transparent, rgba(139,0,0,0.9), transparent); border-top: 1px solid var(--gold); border-bottom: 1px solid var(--gold); box-shadow: 0 0 20px rgba(255,0,0,0.4); }
        .royal-name { font-weight: bold; background: linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-size: 400%; animation: rainbow-flow 3s linear infinite; }
        @keyframes rainbow-flow { 0% { background-position: 0%; } 100% { background-position: 100%; } }
        .laawat { color: var(--gold); font-weight: normal; }

        /* 6. Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ (Ø§Ù„Ø²Ø± Ø¨Ø§Ù„Ù…Ù‚Ù„ÙˆØ¨) */
        .input-area { position: fixed; bottom: 0; width: 100%; display: flex; flex-direction: row-reverse; background: rgba(0,0,0,0.8); padding: 15px; border-top: 2px solid var(--gold); gap: 10px; z-index: 3000; }
        #msg-in { flex: 1; padding: 12px; border-radius: 25px; border: 1px solid var(--gold); background: #111; color: white; font-size: 16px; outline: none; }
        #send-btn { background: linear-gradient(45deg, #8b0000, #ff0000); color: gold; border: 2px solid gold; padding: 10px 30px; border-radius: 25px; cursor: pointer; font-weight: bold; transform: scaleX(-1); }
        .emoji-toggle { background: none; border: 1px solid var(--gold); color: var(--gold); border-radius: 50%; width: 45px; height: 45px; cursor: pointer; font-size: 20px; }
    </style>
</head>
<body onload="initKingdom()">
    <div id="star-container"></div>
    <div id="flash-overlay"></div>
    <div id="royal-clock">ğŸ•’ 00:00:00</div>
    <div id="emoji-list"></div>

    <div id="chat-container" style="height: 100vh; display: flex; flex-direction: column; justify-content: flex-end;">
        <div id="messages" style="overflow-y: auto; padding: 20px; margin-bottom: 80px;"></div>
        
        <div class="input-area">
            <button id="send-btn" onclick="send()">Ø¥Ø±Ø³Ø§Ù„ âŸ¸</button>
            <input type="text" id="msg-in" placeholder="Ù€ï®©ï®©Ù¨ï®©ï®©ğŸ‘‘ Ù…Ø±Ø³ÙˆÙ… Ø§Ù„Ù…Ù„Ùƒ Ø¹Ù„ÙˆØ´ ğŸ‘‘ï®©ï®©Ù¨ï®©ï®©Ù€">
            <button class="emoji-toggle" onclick="toggleEmoji()">ğŸ˜Š</button>
        </div>
    </div>

    <script>
        // 1. ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³Ø§Ø¹Ø© ÙˆØ§Ù„Ù†Ø¬ÙˆÙ… ÙˆÙ…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„Ø¯Ø®ÙˆÙ„
        function initKingdom() {
            setInterval(() => { document.getElementById('royal-clock').innerText = "ğŸ•’ " + new Date().toLocaleTimeString('en-GB'); }, 1000);
            createStars();
            loadAllEmojis();
            new Audio('https://www.soundjay.com/human/sounds/trumpet-fanfare-01.mp3').play().catch(e => {});
        }

        function createStars() {
            const container = document.getElementById('star-container');
            for (let i = 0; i < 150; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.width = star.style.height = Math.random() * 3 + 'px';
                star.style.left = Math.random() * 100 + 'vw'; star.style.top = Math.random() * 100 + 'vh';
                star.style.setProperty('--duration', Math.random() * 3 + 2 + 's');
                container.appendChild(star);
            }
        }

        // 2. ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠØ§Øª (Ø¨Ù†Øµ Ø§Ù„Ø´Ø§Ø´Ø©) ÙˆØ§Ù„Ù…Ù„ØµÙ‚Ø§Øª Ø§Ù„Ù†Ø§Ø¨Ø¶Ø©
        function loadAllEmojis() {
            const eList = document.getElementById('emoji-list');
            const stickers = ["ğŸ‘‘", "ğŸ”¥", "ğŸ’", "âš¡", "ğŸŒŸ", "ğŸš€", "âš”ï¸", "ğŸ›¡ï¸", "ğŸ§¿", "ğŸ’°"];
            stickers.forEach(stk => {
                let s = document.createElement('span'); s.className = 'emoji-item pulse'; s.innerText = stk;
                s.onclick = () => { document.getElementById('msg-in').value += stk; toggleEmoji(); };
                eList.appendChild(s);
            });
            const ranges = [[0x1F600, 0x1F64F], [0x1F300, 0x1F5FF], [0x1F900, 0x1F9FF], [0x1F1E6, 0x1F1FF]];
            ranges.forEach(range => {
                for (let i = range[0]; i <= range[1]; i++) {
                    let s = document.createElement('span'); s.className = 'emoji-item'; s.innerText = String.fromCodePoint(i);
                    s.onclick = () => { document.getElementById('msg-in').value += s.innerText; };
                    eList.appendChild(s);
                }
            });
        }

        function toggleEmoji() {
            const el = document.getElementById('emoji-list');
            el.style.display = (el.style.display === 'none' || el.style.display === '') ? 'grid' : 'none';
        }

        // 3. Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù…Ø¹ ÙƒÙ„ Ø§Ù„ØªØ£Ø«ÙŠØ±Ø§Øª (Ø²Ù„Ø²Ø§Ù„ØŒ Ù…Ø·Ø±ØŒ Ø¨Ø±Ù‚ØŒ Ø±Ø¹Ø¯)
        function send() {
            const inp = document.getElementById('msg-in');
            if(inp.value.trim()) {
                const msg = "ê§ " + inp.value + " ê§‚";
                renderMessage({u: "Ø¹Ù„ÙˆØ´", t: msg, time: new Date().toLocaleTimeString()});
                triggerRoyalEffects();
                inp.value = "";
            }
        }

        function triggerRoyalEffects() {
            document.getElementById('flash-overlay').classList.add('flash-active');
            document.body.classList.add('shake-active');
            new Audio('https://www.soundjay.com/nature/thunder-storm-01.mp3').play();
            makeItRain();
            setTimeout(() => {
                document.getElementById('flash-overlay').classList.remove('flash-active');
                document.body.classList.remove('shake-active');
            }, 1000);
        }

        function renderMessage(d) {
            const box = document.getElementById('messages');
            const div = document.createElement('div');
            const isKing = (d.u === "Ø¹Ù„ÙˆØ´");
            div.className = isKing ? 'line royal-carpet' : 'line';
            
            const badge = isKing ? "ğŸ‘‘ " : "";
            const nameStyle = isKing ? "royal-name" : "";
            
            div.innerHTML = `<b class="${nameStyle}"><span class="laawat">ğ“†©</span> ${badge}${d.u} <span class="laawat">ğ“†ª</span>:</b> <span>${d.t}</span> <small style="float:left; opacity:0.3">${d.time}</small>`;
            box.appendChild(div);
            box.scrollTop = box.scrollHeight;
        }

        function makeItRain() {
            for (let i = 0; i < 30; i++) {
                const fire = document.createElement('div');
                fire.innerText = "ğŸ”¥"; fire.style.position = 'fixed'; fire.style.left = Math.random() * 100 + 'vw';
                fire.style.top = '-50px'; fire.style.zIndex = '9999'; fire.style.fontSize = '25px';
                fire.style.transition = 'transform 2s linear, opacity 2s'; document.body.appendChild(fire);
                setTimeout(() => { fire.style.transform = `translateY(${window.innerHeight + 100}px)`; fire.style.opacity = '0'; }, 100);
                setTimeout(() => fire.remove(), 2500);
            }
        }
    </script>
</body>
</html>
