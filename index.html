<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù…Ø§Ø³ØªØ± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</title>
    <style>
        /* Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…ØªÙˆÙ‡Ø¬Ø© */
        :root { --main-neon: #00f2ff; --admin-neon: #ff004c; --bg: #080808; }
        
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Tahoma', sans-serif; }
        
        body { background: var(--bg); color: #fff; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠ */
        header { 
            height: 60px; background: #000; border-bottom: 2px solid var(--main-neon);
            display: flex; justify-content: space-between; align-items: center; padding: 0 15px;
            box-shadow: 0 0 15px var(--main-neon); z-index: 1000;
        }

        /* ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø´Ø§Ø´Ø© */
        .app-container { flex: 1; display: flex; overflow: hidden; position: relative; }

        /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØºØ±Ù Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© - Ø«Ø§Ø¨ØªØ© ÙˆÙˆØ§Ø¶Ø­Ø© */
        #rooms-list { 
            width: 80px; background: #000; border-left: 1px solid #222; 
            display: flex; flex-direction: column; align-items: center; padding: 10px 0; gap: 15px;
        }
        .room-tab { 
            width: 55px; height: 55px; background: #111; border: 1px solid #333; 
            border-radius: 12px; cursor: pointer; display: flex; flex-direction: column;
            align-items: center; justify-content: center; font-size: 9px; color: #777; transition: 0.3s;
        }
        .room-tab.active { border-color: var(--main-neon); color: var(--main-neon); box-shadow: 0 0 10px var(--main-neon); }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø´Ø§Øª */
        #chat-main { flex: 1; display: flex; flex-direction: column; background: #050505; }
        #msg-box { flex: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 12px; }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†ÙŠÙˆÙ† */
        .msg { background: rgba(255,255,255,0.03); padding: 12px; border-radius: 12px; border-right: 4px solid var(--main-neon); max-width: 85%; }
        .m-master { color: var(--admin-neon); text-shadow: 0 0 8px var(--admin-neon); font-weight: bold; font-size: 13px; }
        .m-text { color: #eee; font-size: 14px; margin-top: 5px; }

        /* Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© (Popups) */
        .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 9999; display: none; justify-content: center; align-items: center; }
        .modal-content { background: #111; border: 2px solid var(--main-neon); padding: 25px; border-radius: 15px; width: 320px; text-align: center; }

        /* Ù…Ø´ØºÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø¹Ø§Ø¦Ù… */
        #yt-float {
            position: absolute; top: 10px; left: 10px; width: 300px; background: #000;
            border: 2px solid var(--main-neon); border-radius: 10px; display: none; z-index: 5000;
        }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ÙƒØªØ§Ø¨Ø© */
        .input-bar { padding: 10px; background: #000; display: flex; gap: 10px; border-top: 1px solid #222; }
        #user-input { flex: 1; padding: 12px; background: #111; border: 1px solid #333; color: #fff; border-radius: 25px; outline: none; }
        .btn-send { background: var(--main-neon); border: none; padding: 0 25px; border-radius: 25px; font-weight: bold; cursor: pointer; color: #000; }

        /* Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
        @media (max-width: 768px) {
            #rooms-list { width: 65px; }
            #yt-float { width: 90%; left: 5%; }
        }
    </style>
</head>
<body>

    <header>
        <div onclick="openM('room-m')" style="cursor:pointer; color:var(--main-neon); font-size:11px;">ğŸ <br>Ø¥Ø¶Ø§ÙØ© ØºØ±ÙØ©</div>
        <h2 style="text-shadow: 0 0 10px var(--main-neon);">PRINCE CHAT</h2>
        <div onclick="openM('profile-m')" style="cursor:pointer; color:var(--main-neon); font-size:11px;">ğŸ‘¤<br>Ø§Ù„Ù…Ù„Ù</div>
    </header>

    <div class="app-container">
        <div id="rooms-list">
            <div class="room-tab active" onclick="changeRoom('Ø§Ù„Ø¹Ø§Ù…Ø©', this)"><b>Ø§Ù„Ø¹Ø§Ù…Ø©</b></div>
        </div>

        <div id="chat-main">
            <div id="msg-box">
                <div style="text-align:center; color:#333; font-size:11px; margin-top:50px;">-- Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„ÙƒØ§Ù…Ù„ --</div>
            </div>

            <div id="yt-float">
                <div style="background:#222; padding:5px 10px; display:flex; justify-content:space-between; font-size:11px;">
                    <span>ğŸ“º ÙÙŠØ¯ÙŠÙˆ Ù…Ø¨Ø§Ø´Ø±</span>
                    <span onclick="closeYt()" style="color:red; cursor:pointer; font-weight:bold;">X</span>
                </div>
                <div id="yt-content"></div>
            </div>

            <div class="input-bar">
                <input type="text" id="user-input" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø© Ø£Ùˆ Ø±Ø§Ø¨Ø· ÙÙŠØ¯ÙŠÙˆ...">
                <button class="btn-send" onclick="sendMsg()">Ø¥Ø±Ø³Ø§Ù„</button>
            </div>
        </div>
    </div>

    <div id="room-m" class="modal">
        <div class="modal-content">
            <h3>Ø¥Ù†Ø´Ø§Ø¡ ØºØ±ÙØ© Ø¬Ø¯ÙŠØ¯Ø©</h3>
            <input type="text" id="new-room-inp" placeholder="Ø§Ø³Ù… Ø§Ù„ØºØ±ÙØ©..." style="width:100%; padding:10px; margin:15px 0; background:#000; color:#fff; border:1px solid #333; border-radius:5px;">
            <button onclick="saveRoom()" style="width:100%; padding:10px; background:var(--main-neon); border:none; font-weight:bold; border-radius:5px;">ØªØ£ÙƒÙŠØ¯</button>
            <button onclick="closeM('room-m')" style="width:100%; padding:10px; background:#333; color:#fff; border:none; margin-top:5px; border-radius:5px;">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>

    <div id="profile-m" class="modal">
        <div class="modal-content">
            <h3 class="m-master" id="display-name">Ø§Ù„Ø¨Ø±Ù†Ø³</h3>
            <p style="font-size:11px; color:#555; margin-bottom:15px;">Ø±ØªØ¨Ø©: Ù…Ø¯ÙŠØ± Ø§Ù„Ø³ÙŠØ±ÙØ±</p>
            <input type="text" id="change-name-inp" placeholder="ØªØºÙŠÙŠØ± Ø§Ù„Ø§Ø³Ù…..." style="width:100%; padding:10px; margin-bottom:15px; background:#000; color:#fff; border:1px solid #333; border-radius:5px;">
            <button onclick="saveProfile()" style="width:100%; padding:10px; background:var(--main-neon); border:none; font-weight:bold; border-radius:5px;">Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª</button>
            <button onclick="closeM('profile-m')" style="width:100%; padding:10px; background:#333; color:#fff; border:none; margin-top:5px; border-radius:5px;">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>

    <script>
        // Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ© Ù„Ù„Ø´Ø§Øª
        let currentRoomName = "Ø§Ù„Ø¹Ø§Ù…Ø©";
        let allRoomsData = { "Ø§Ù„Ø¹Ø§Ù…Ø©": [] }; // Ù‡Ù†Ø§ ÙŠØªÙ… ÙØµÙ„ ÙƒÙ„ ØºØ±ÙØ© Ø¹Ù† Ø§Ù„Ø£Ø®Ø±Ù‰
        let masterName = "Ø§Ù„Ø¨Ø±Ù†Ø³";

        function openM(id) { document.getElementById(id).style.display = 'flex'; }
        function closeM(id) { document.getElementById(id).style.display = 'none'; }

        // ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ ÙˆØ§Ù„ÙŠÙˆØªÙŠÙˆØ¨
        function sendMsg() {
            const inp = document.getElementById('user-input');
            if(!inp.value.trim()) return;

            // ÙƒØ´Ù ÙŠÙˆØªÙŠÙˆØ¨
            if(inp.value.includes('youtube.com') || inp.value.includes('youtu.be')) {
                const vidId = inp.value.split('v=')[1] || inp.value.split('/').pop();
                document.getElementById('yt-float').style.display = 'block';
                document.getElementById('yt-content').innerHTML = `<iframe width="100%" height="180" src="https://www.youtube.com/embed/${vidId.split('&')[0]}?autoplay=1" frameborder="0" allowfullscreen></iframe>`;
                inp.value = ''; return;
            }

            // Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…ØªÙˆÙ‡Ø¬Ø©
            const msgHtml = `
                <div class="msg">
                    <span class="m-master">${masterName}:</span>
                    <div class="m-text">${inp.value}</div>
                </div>`;
            
            allRoomsData[currentRoomName].push(msgHtml);
            renderMessages();
            inp.value = '';
        }

        // Ø¥Ù†Ø´Ø§Ø¡ ØºØ±ÙØ© Ø¬Ø¯ÙŠØ¯Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ©
        function saveRoom() {
            const name = document.getElementById('new-room-inp').value;
            if(name && !allRoomsData[name]) {
                allRoomsData[name] = [];
                const btn = document.createElement('div');
                btn.className = 'room-tab';
                btn.innerHTML = `<b>${name}</b>`;
                btn.onclick = function() { changeRoom(name, this); };
                document.getElementById('rooms-list').appendChild(btn);
                closeM('room-m');
                document.getElementById('new-room-inp').value = '';
            }
        }

        // Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙØ¹Ù„ÙŠ Ø¨ÙŠÙ† Ø§Ù„ØºØ±Ù
        function changeRoom(name, element) {
            currentRoomName = name;
            // ØªØºÙŠÙŠØ± Ø´ÙƒÙ„ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
            document.querySelectorAll('.room-tab').forEach(t => t.classList.remove('active'));
            element.classList.add('active');
            // ØªØ­Ù…ÙŠÙ„ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØºØ±ÙØ© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© ÙÙ‚Ø·
            renderMessages();
        }

        // ØªØ­Ø¯ÙŠØ« Ø´Ø§Ø´Ø© Ø§Ù„Ø´Ø§Øª
        function renderMessages() {
            const box = document.getElementById('msg-box');
            box.innerHTML = allRoomsData[currentRoomName].join('');
            box.scrollTop = box.scrollHeight;
        }

        // ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„
        function saveProfile() {
            const n = document.getElementById('change-name-inp').value;
            if(n) {
                masterName = n;
                document.getElementById('display-name').innerText = n;
            }
            closeM('profile-m');
        }

        function closeYt() { document.getElementById('yt-float').style.display = 'none'; document.getElementById('yt-content').innerHTML = ''; }

        // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±
        document.getElementById('user-input').onkeypress = (e) => { if(e.key === 'Enter') sendMsg(); };
    </script>
</body>
</html>
