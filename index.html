<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¥ØµØ¯Ø§Ø± Ø§Ù„ÙˆØ­Ø´ | MASTER PRO</title>
    <style>
        :root { --main-color: #00ffcc; --dark-bg: #0a0b10; --glass: rgba(255, 255, 255, 0.05); }
        
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; }
        
        body { background: var(--dark-bg); color: #fff; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }

        /* --- Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø²Ø¬Ø§Ø¬ÙŠ --- */
        header { 
            height: 70px; background: rgba(0,0,0,0.8); backdrop-filter: blur(15px);
            border-bottom: 1px solid var(--main-color); display: flex; justify-content: space-between; 
            align-items: center; padding: 0 20px; z-index: 1000; box-shadow: 0 5px 20px rgba(0,255,204,0.1);
        }

        .master-logo { font-size: 22px; font-weight: 900; letter-spacing: 3px; color: var(--main-color); text-shadow: 0 0 10px var(--main-color); }

        /* --- Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ --- */
        .app-body { flex: 1; display: flex; overflow: hidden; position: relative; }

        /* --- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© (Ø§Ù„ØºØ±Ù) --- */
        #side-nav { 
            width: 280px; background: #0e0f15; border-left: 1px solid #1f222d;
            display: flex; flex-direction: column; transition: 0.4s; z-index: 999;
        }

        .nav-header { padding: 20px; font-size: 14px; color: #555; border-bottom: 1px solid #1f222d; }

        .room-item { 
            padding: 15px 20px; cursor: pointer; display: flex; align-items: center; gap: 12px;
            transition: 0.3s; border-right: 3px solid transparent;
        }
        .room-item:hover, .room-item.active { background: var(--glass); border-right-color: var(--main-color); color: var(--main-color); }

        /* --- Ø³Ø§Ø­Ø© Ø§Ù„Ø´Ø§Øª --- */
        #chat-main { flex: 1; display: flex; flex-direction: column; background: #0a0b10; position: relative; }

        #messages-flow { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; }

        /* --- ØªØµÙ…ÙŠÙ… Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„ÙØ®Ù… --- */
        .msg-bubble { 
            display: flex; gap: 15px; max-width: 80%; animation: slideUp 0.4s ease;
        }
        .u-avatar { width: 50px; height: 50px; border-radius: 15px; border: 2px solid var(--main-color); padding: 2px; }
        .u-content { background: var(--glass); padding: 12px 18px; border-radius: 0 20px 20px 20px; position: relative; }
        .u-info { font-size: 13px; font-weight: bold; color: var(--main-color); margin-bottom: 5px; display: flex; gap: 10px; }
        .u-rank { background: #ff004c; color: #fff; font-size: 9px; padding: 2px 6px; border-radius: 4px; text-transform: uppercase; }

        /* --- Ù…Ø´ØºÙ„ ÙŠÙˆØªÙŠÙˆØ¨ Ø¹Ø§Ø¦Ù… --- */
        #yt-float {
            position: absolute; top: 20px; left: 20px; width: 350px; background: #000;
            border: 1px solid var(--main-color); border-radius: 15px; display: none; z-index: 2000;
            box-shadow: 0 20px 50px rgba(0,0,0,0.8); overflow: hidden;
        }
        .yt-nav { background: #111; padding: 10px; display: flex; justify-content: space-between; cursor: move; }

        /* --- ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ÙƒØªØ§Ø¨Ø© --- */
        .input-container { padding: 20px; background: #0e0f15; display: flex; gap: 15px; align-items: center; }
        #chat-input { 
            flex: 1; padding: 15px 25px; background: #1a1c26; border: 1px solid #2d3142; 
            color: #fff; border-radius: 15px; outline: none; transition: 0.3s;
        }
        #chat-input:focus { border-color: var(--main-color); box-shadow: 0 0 15px rgba(0,255,204,0.1); }
        .send-btn { background: var(--main-color); color: #000; border: none; width: 55px; height: 55px; border-radius: 15px; cursor: pointer; font-weight: bold; }

        /* --- Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ --- */
        @media (max-width: 768px) {
            #side-nav { position: absolute; right: -280px; height: 100%; }
            #side-nav.open { right: 0; }
            .msg-bubble { max-width: 95%; }
            #yt-float { width: 90%; left: 5%; }
        }

        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <header>
        <button onclick="toggleSide()" style="background:none; border:none; color:var(--main-color); font-size:24px; cursor:pointer;">â˜°</button>
        <div class="master-logo">PRINCE MASTER</div>
        <div onclick="openProfile()" style="cursor:pointer; border:1px solid var(--main-color); padding:5px 10px; border-radius:8px; font-size:12px;">ğŸ‘¤ Ù…Ù„ÙÙŠ</div>
    </header>

    <div class="app-body">
        <div id="side-nav">
            <div class="nav-header">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØºØ±Ù</div>
            <div id="rooms-list">
                <div class="room-item active" onclick="switchRoom('Ø§Ù„Ø¹Ø§Ù…Ø©', this)"><span>#</span> Ø§Ù„ØºØ±ÙØ© Ø§Ù„Ø¹Ø§Ù…Ø©</div>
                <div class="room-item" onclick="switchRoom('Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª', this)"><span>#</span> Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª</div>
            </div>
            <button onclick="createNewRoom()" style="margin:20px; padding:12px; background:var(--main-color); border:none; border-radius:10px; font-weight:bold; cursor:pointer;">â• Ø¥Ø¶Ø§ÙØ© ØºØ±ÙØ©</button>
            
            <div class="nav-header">Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„Ù†ÙŠÙˆÙ†</div>
            <div style="padding:0 20px; display:flex; gap:10px;">
                <div onclick="changeTheme('#00ffcc')" style="width:25px; height:25px; background:#00ffcc; border-radius:5px; cursor:pointer;"></div>
                <div onclick="changeTheme('#ff00ff')" style="width:25px; height:25px; background:#ff00ff; border-radius:5px; cursor:pointer;"></div>
                <div onclick="changeTheme('#ffcc00')" style="width:25px; height:25px; background:#ffcc00; border-radius:5px; cursor:pointer;"></div>
            </div>
        </div>

        <div id="chat-main">
            <div id="yt-float">
                <div class="yt-nav">
                    <span style="font-size:12px;">ğŸ“º Ø§Ù„Ù…Ø§Ø³ØªØ± ØªÙŠ ÙÙŠ</span>
                    <div>
                        <span onclick="minVid()" style="cursor:pointer; margin-left:10px;">-</span>
                        <span onclick="closeVid()" style="cursor:pointer; color:red;">X</span>
                    </div>
                </div>
                <div id="yt-area"></div>
            </div>

            <div id="messages-flow">
                <div style="text-align:center; color:#333; font-size:12px; margin-top:50px;">ğŸ’ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ Ù…Ø¯ÙŠØ±.. Ø§Ù„Ù†Ø¸Ø§Ù… Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØ­ÙƒÙ… ğŸ’</div>
            </div>

            <div class="input-container">
                <input type="text" id="chat-input" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø© Ø£Ùˆ Ø±Ø§Ø¨Ø· ÙŠÙˆØªÙŠÙˆØ¨...">
                <button class="send-btn" onclick="processMsg()">â–¶</button>
            </div>
        </div>
    </div>

    <script>
        let currentRoom = "Ø§Ù„Ø¹Ø§Ù…Ø©";
        let roomsStore = { "Ø§Ù„Ø¹Ø§Ù…Ø©": [], "Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª": [] };
        let masterProfile = { name: "Ø§Ù„Ø¨Ø±Ù†Ø³", color: "#00ffcc" };

        function toggleSide() { document.getElementById('side-nav').classList.toggle('open'); }

        function processMsg() {
            const inp = document.getElementById('chat-input');
            if(!inp.value.trim()) return;

            // ÙƒØ´Ù ÙŠÙˆØªÙŠÙˆØ¨
            if(inp.value.includes('youtube.com') || inp.value.includes('youtu.be')) {
                const vidId = inp.value.split('v=')[1] || inp.value.split('/').pop();
                document.getElementById('yt-float').style.display = 'block';
                document.getElementById('yt-area').innerHTML = `<iframe width="100%" height="200" src="https://www.youtube.com/embed/${vidId.split('&')[0]}?autoplay=1" frameborder="0" allowfullscreen></iframe>`;
                inp.value = ''; return;
            }

            const msgHtml = `
                <div class="msg-bubble">
                    <img src="https://cdn-icons-png.flaticon.com/512/149/149071.png" class="u-avatar">
                    <div class="u-content">
                        <div class="u-info">${masterProfile.name} <span class="u-rank">Master</span></div>
                        <div>${inp.value}</div>
                    </div>
                </div>`;
            
            roomsStore[currentRoom].push(msgHtml);
            renderChat();
            inp.value = '';
        }

        function renderChat() {
            const box = document.getElementById('messages-flow');
            box.innerHTML = roomsStore[currentRoom].join('');
            box.scrollTop = box.scrollHeight;
        }

        function switchRoom(name, el) {
            currentRoom = name;
            document.querySelectorAll('.room-item').forEach(r => r.classList.remove('active'));
            el.classList.add('active');
            renderChat();
            if(window.innerWidth < 768) toggleSide();
        }

        function createNewRoom() {
            const n = prompt("Ø§Ø³Ù… Ø§Ù„ØºØ±ÙØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:");
            if(n && !roomsStore[n]) {
                roomsStore[n] = [];
                const div = document.createElement('div');
                div.className = 'room-item';
                div.innerHTML = `<span>#</span> ${n}`;
                div.onclick = function() { switchRoom(n, this); };
                document.getElementById('rooms-list').appendChild(div);
            }
        }

        function changeTheme(color) {
            document.documentElement.style.setProperty('--main-color', color);
            masterProfile.color = color;
        }

        function closeVid() { document.getElementById('yt-float').style.display = 'none'; document.getElementById('yt-area').innerHTML = ''; }
        function minVid() { 
            const f = document.getElementById('yt-float');
            f.style.height = (f.style.height === '45px') ? 'auto' : '45px';
        }

        document.getElementById('chat-input').onkeypress = (e) => { if(e.key === 'Enter') processMsg(); };
    </script>
</body>
</html>
