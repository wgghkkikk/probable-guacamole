<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‘‘ Ù…Ù…Ù„ÙƒØ© Ø¹Ù„ÙˆØ´ | Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù…Ø³ØªÙ‚Ø±</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        :root { --gold: #d4af37; }
        body { margin: 0; font-family: sans-serif; background: #000 url('https://images.unsplash.com/photo-1518709268805-4e9042af9f23?q=80&w=1920') no-repeat center center fixed; background-size: cover; color: white; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }
        #overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.6); z-index: -1; }
        header { background: rgba(0,0,0,0.9); padding: 10px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--gold); }
        .nav-btn { background: #111; border: 1px solid var(--gold); color: var(--gold); padding: 5px 10px; border-radius: 5px; cursor: pointer; }
        #wrapper { flex: 1; display: flex; position: relative; overflow: hidden; }
        #messages { flex: 1; overflow-y: auto; padding: 20px; background: rgba(0,0,0,0.3); backdrop-filter: blur(5px); }
        .line { border-bottom: 1px solid rgba(255,255,255,0.1); padding: 8px 0; word-wrap: break-word; }
        .sidebar { position: absolute; top: 0; width: 250px; height: 100%; background: #000; transition: 0.3s; z-index: 1001; border: 1px solid #333; }
        #color-panel { right: -260px; } #admin-panel { right: -260px; top: 50px; height: auto; }
        .open { right: 0 !important; }
        #emoji-box { position: absolute; bottom: 70px; right: 10px; width: 280px; height: 250px; background: #111; border: 2px solid var(--gold); display: none; flex-direction: column; z-index: 2000; border-radius: 10px; }
        .emoji-scroll { overflow-y: auto; display: grid; grid-template-columns: repeat(5, 1fr); padding: 10px; gap: 5px; }
        footer { padding: 10px; background: #000; border-top: 1px solid var(--gold); display: flex; gap: 5px; align-items: center; }
        #msg-in { flex: 1; padding: 10px; border-radius: 5px; border: 1px solid #444; background: #111; color: #fff; }
        /* ØªØ£Ø«ÙŠØ±Ø§Øª */
        .fire { color: #ff4500; font-weight: bold; text-shadow: 0 0 8px #f00; }
        .gold-flow { color: var(--gold); font-weight: bold; text-shadow: 0 0 8px #fff; }
    </style>
</head>
<body>
    <div id="overlay"></div>
    <header>
        <button class="nav-btn" onclick="toggleSide('admin-panel')">âš™ï¸ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</button>
        <div style="color: var(--gold); font-weight: bold;">ğŸ‘‘ Ù…Ù€Ù…Ù€Ù„Ù€ÙƒÙ€Ø© Ø¹Ù€Ù„Ù€ÙˆØ´</div>
        <button class="nav-btn" onclick="toggleSide('color-panel')">ğŸ¨ Ø§Ù„ØµØ¨Øº</button>
    </header>

    <div id="wrapper">
        <div id="admin-panel" class="sidebar">
            <div style="padding:15px;">
                <button class="nav-btn" onclick="viewLogs()" style="width:100%">ğŸ‘ï¸ Ø³Ø¬Ù„ Ø§Ù„Ø²ÙˆØ§Ø±</button><br><br>
                <button class="nav-btn" onclick="clearDB()" style="width:100%; color:red;">ğŸ§¹ Ù…Ø³Ø­ Ø§Ù„Ø´Ø§Øª</button>
            </div>
        </div>
        <div id="color-panel" class="sidebar">
            <div style="padding:15px;">
                <label>Ø§Ù„Ù†Ùƒ:</label>
                <input type="text" id="my-name" value="Ø¹Ù„ÙˆØ´" style="width:90%; margin-bottom:10px;"><br>
                <label>Ø§Ù„ØªØ£Ø«ÙŠØ±:</label>
                <select id="f-anim" onchange="updateS()" style="width:100%">
                    <option value="">Ø¹Ø§Ø¯ÙŠ</option>
                    <option value="fire">ğŸ”¥ Ù†Ø§Ø±</option>
                    <option value="gold-flow">ğŸ’° Ø°Ù‡Ø¨</option>
                </select><br><br>
                <input type="color" id="f-color" value="#ffffff" onchange="updateS()" style="width:100%">
            </div>
        </div>
        <div id="messages"></div>
        <div id="emoji-box"><div class="emoji-scroll" id="emoji-list"></div></div>
    </div>

    <footer>
        <button class="nav-btn" onclick="toggleEmoji()">ğŸ˜Š</button>
        <input type="text" id="msg-in" placeholder="Ø§ÙƒØªØ¨ Ù‡Ù†Ø§...">
        <button class="nav-btn" onclick="sendMsg()" style="background:var(--gold); color:#000;">Ø¥Ø±Ø³Ø§Ù„</button>
    </footer>

    <script>
        // Ø§Ù…Ù„Ø£ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ§ÙŠØ±Ø¨ÙŠØ³ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ Ù‡Ù†Ø§
        const firebaseConfig = { databaseURL: "https://alloush-kingdom-default-rtdb.firebaseio.com" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        let myStyle = { c: '#ffffff', a: '' };

        function updateS() { 
            myStyle.c = document.getElementById('f-color').value; 
            myStyle.a = document.getElementById('f-anim').value; 
        }

        function toggleSide(id) { document.getElementById(id).classList.toggle('open'); }
        function toggleEmoji() { 
            const b = document.getElementById('emoji-box');
            b.style.display = (b.style.display === 'flex') ? 'none' : 'flex'; 
        }

        // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø©
        function sendMsg() {
            const inp = document.getElementById('msg-in');
            const name = document.getElementById('my-name').value;
            if(inp.value.trim()) {
                db.ref("messages").push().set({
                    u: name, t: inp.value, s: myStyle, time: new Date().toLocaleTimeString()
                });
                inp.value = "";
            }
        }

        // Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
        db.ref("messages").limitToLast(30).on("child_added", (snap) => {
            const d = snap.val();
            const div = document.createElement('div');
            div.className = 'line';
            div.innerHTML = `<b style="color:var(--gold)">${d.u}:</b> <span class="${d.s.a}" style="color:${d.s.c}">${d.t}</span>`;
            const box = document.getElementById('messages');
            box.appendChild(div);
            box.scrollTop = box.scrollHeight;
        });

        // ØªØ¹Ù‚Ø¨ Ø§Ù„Ø²ÙˆØ§Ø±
        function track() {
            const name = document.getElementById('my-name').value;
            db.ref("activity_log").push().set({ user: name, time: new Date().toLocaleString() });
        }

        function viewLogs() {
            db.ref("activity_log").limitToLast(5).once("value", (s) => {
                let res = "Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„:\n";
                s.forEach(c => { res += c.val().user + " - " + c.val().time + "\n"; });
                alert(res);
            });
        }

        // ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠØ§Øª
        const eList = document.getElementById('emoji-list');
        const emojis = ["ğŸ˜‚","ğŸ˜","ğŸ”¥","ğŸ‘‘","ğŸ’","â¤ï¸","âœ¨","ğŸ‘","âœ”ï¸","âš”ï¸","ğŸ›¡ï¸","ğŸ¦"];
        emojis.forEach(e => {
            let span = document.createElement('span');
            span.innerText = e; span.style.cursor="pointer"; span.style.fontSize="25px";
            span.onclick = () => { document.getElementById('msg-in').value += e; };
            eList.appendChild(span);
        });

        function clearDB() { if(confirm("Ù…Ø³Ø­ØŸ")) db.ref("messages").remove(); location.reload(); }
        document.getElementById('msg-in').onkeypress = (e) => { if(e.key==='Enter') sendMsg(); };
        
        window.onload = track;
    </script>
</body>
</html>
