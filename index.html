<style>
    .master-panel {
        position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
        background: #1a1a1a; border: 2px solid #d4af37; padding: 20px;
        border-radius: 15px; box-shadow: 0 0 30px rgba(0,0,0,0.8);
        display: none; z-index: 10000; text-align: center; color: white; width: 250px;
    }
    .master-btn {
        width: 100%; padding: 10px; margin: 5px 0; border: none; border-radius: 8px;
        cursor: pointer; font-weight: bold; color: white;
    }
    .btn-kick { background: #e74c3c; } /* Ø£Ø­Ù…Ø± Ù„Ù„Ø·Ø±Ø¯ */
    .btn-mute { background: #f1c40f; color: #000; } /* Ø£ØµÙØ± Ù„Ù„ÙƒØªÙ… */
</style>

<div id="master-panel" class="master-panel">
    <h3 id="target-name">Ø§Ø³Ù… Ø§Ù„Ø¹Ø¶Ùˆ</h3>
    <button class="master-btn btn-kick" onclick="kickUser(currentSelectedUser)">Ø·Ø±Ø¯ Ù†Ù‡Ø§Ø¦ÙŠ â›”</button>
    <button class="master-btn btn-mute" onclick="muteUser(currentSelectedUser)">ÙƒØªÙ… Ø§Ù„ØµÙˆØª ğŸ”‡</button>
    <button onclick="closePanel()" style="background:none; color:#888; border:none; cursor:pointer; margin-top:10px;">Ø¥ØºÙ„Ø§Ù‚</button>
</div>

<script>
    // --- Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠ ---
    const db = firebase.database();
    let myName = "Ø¹Ù„ÙˆØ´"; 
    let iAmTheMaster = false;
    let currentSelectedUser = "";

    // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù†Ùƒ "Ø¹Ù„ÙˆØ´" Ø§Ù„Ù…Ø¹ØªÙ…Ø¯ ÙÙŠ Ø§Ù„Ø³ÙŠØ±ÙØ±
    db.ref('master').on('value', (snapshot) => {
        if (snapshot.val() === myName) {
            iAmTheMaster = true;
            console.log("ØªÙ… ØªÙØ¹ÙŠÙ„ ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ± Ø¹Ù„ÙˆØ´ ğŸ‘‘");
        }
    });

    // ÙˆØ¸ÙŠÙØ© ØªÙØªØ­ Ø§Ù„Ù„ÙˆØ­Ø© Ù„Ù…Ø§ ØªØ¶ØºØ· Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø£ÙŠ Ø´Ø®Øµ
    function openAdminMenu(user) {
        if (iAmTheMaster) {
            currentSelectedUser = user;
            document.getElementById('target-name').innerText = user;
            document.getElementById('master-panel').style.display = 'block';
        }
    }

    function closePanel() { document.getElementById('master-panel').style.display = 'none'; }

    // --- ØªÙ†ÙÙŠØ° Ø§Ù„Ø£ÙˆØ§Ù…Ø± ÙÙŠ Ø§Ù„Ø³ÙŠØ±ÙØ± ---
    function kickUser(target) {
        db.ref('actions/' + target).set({ type: 'KICK', admin: myName, time: Date.now() });
        alert("ØªÙ… Ø·Ø±Ø¯ " + target);
        closePanel();
    }

    function muteUser(target) {
        db.ref('actions/' + target).set({ type: 'MUTE', admin: myName, time: Date.now() });
        alert("ØªÙ… ÙƒØªÙ… " + target);
        closePanel();
    }
</script>
