<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>MASTER RG - MEGA BOT</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700&display=swap" rel="stylesheet">
    <style>
        :root { --neon: #00f2ff; --gold: #ffd700; --bg: #000; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: 'Cairo', sans-serif; }
        body { margin: 0; background: #000; color: #fff; overflow: hidden; position: fixed; width: 100%; height: 100%; }
        header { height: 60px; background: #111; border-bottom: 2px solid var(--neon); display: flex; justify-content: space-between; align-items: center; padding: 0 15px; z-index: 1000; position: relative; }
        .page { position: absolute; top: 60px; bottom: 0; left: 0; right: 0; background: #000; display: none; }
        .lobby-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; padding: 15px; }
        .room-card { background: #111; padding: 30px 10px; border-radius: 15px; border: 1px solid #333; text-align: center; color: var(--neon); cursor: pointer; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
        .chat-msgs { position: absolute; top: 0; bottom: 80px; width: 100%; overflow-y: auto; padding: 15px; background: #050505; }
        .msg { display: flex; margin-bottom: 12px; animation: slide 0.3s ease; }
        @keyframes slide { from { transform: translateX(20px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        .bubble { background: #1a1a1a; padding: 10px 15px; border-radius: 15px; max-width: 80%; border: 0.5px solid #333; }
        .input-bar { position: absolute; bottom: 0; width: 100%; height: 80px; background: #111; display: flex; align-items: center; padding: 0 15px; }
        #mInp { flex: 1; background: #000; border: 1px solid #444; color: #fff; padding: 12px; border-radius: 12px; text-align: right; }
        .s-btn { background: var(--neon); border: none; padding: 10px 20px; border-radius: 12px; margin-right: 10px; font-weight: bold; }
    </style>
</head>
<body>

<header>
    <b style="color:var(--gold)">MASTER RG ğŸ‘‘</b>
    <div id="on-count" style="font-size:11px; color:var(--neon)">Ù…ØªØµÙ„..</div>
</header>

<div id="lobby-page" class="page" style="display: block;">
    <div class="lobby-grid">
        <div class="room-card" onclick="go('main')">ğŸ‘‘ Ø§Ù„Ø¹Ø±Ø´</div>
        <div class="room-card" onclick="go('game')">ğŸ® Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª</div>
        <div class="room-card" onclick="go('vip')">ğŸ’ Ø§Ù„Ø¯ÙŠÙˆØ§Ù†</div>
        <div class="room-card" onclick="go('elite')">ğŸ¤ Ø§Ù„Ù†Ø®Ø¨Ø©</div>
    </div>
</div>

<div id="chat-page" class="page">
    <div id="msgs" class="chat-msgs"></div>
    <div class="input-bar">
        <input type="text" id="mInp" placeholder="Ø³ÙˆÙ„Ù ÙˆÙŠÙ‡ Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ù…ØªÙØ§Ø¹Ù„...">
        <button onclick="send()" class="s-btn">Ø¥Ø±Ø³Ø§Ù„</button>
        <button onclick="home()" style="background:#333; border:none; padding:10px; border-radius:10px; margin-right:5px; color:#fff">ğŸ </button>
    </div>
</div>

<script>
    const config = { databaseURL: "https://masterchat-f2da9-default-rtdb.firebaseio.com" };
    firebase.initializeApp(config);
    const db = firebase.database();

    let myN = localStorage.getItem('rg_n') || "";
    if(!myN) { myN = prompt("Ø§Ø³Ù…Ùƒ Ø§Ù„Ù…Ø³ØªØ¹Ø§Ø±ØŸ"); if(myN) localStorage.setItem('rg_n', myN); else location.reload(); }

    // ğŸ”¥ Ù…Ø® Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ù…ØªÙØ§Ø¹Ù„
    const botBrain = [
        { key: ["Ù‡Ù„Ùˆ", "Ù‡Ù„Ø§", "Ø³Ù„Ø§Ù…"], res: ["ÙŠØ§ Ù‡Ù„Ø§ ÙˆØºÙ„Ø§ Ø¨Ù†ÙˆØ± Ø¹ÙŠÙˆÙ†ÙŠ ğŸŒ¹", "Ù‡Ù„ÙˆØ§Øª ÙŠØ§ Ø·ÙŠØ¨ØŒ Ù†ÙˆØ±Øª Ø§Ù„Ø´Ø§Øª ÙƒÙ„Ù‡", "Ø£Ø·Ù„Ù‚ Ù‡Ù„Ùˆ Ù…Ù† Ø£Ø·Ù„Ù‚ Ø¹Ø¶Ùˆ!"] },
        { key: ["Ø´Ù„ÙˆÙ†Ùƒ", "Ø§Ø®Ø¨Ø§Ø±Ùƒ"], res: ["Ø¨Ø®ÙŠØ± ÙŠØ§ Ø¨Ø¹Ø¯ Ø±ÙˆØ­ÙŠØŒ Ø£Ù†Øª Ø´Ù„ÙˆÙ†ÙƒØŸ", "Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ØŒ Ù…Ù† Ø´ÙØª Ø§Ø³Ù…Ùƒ ØµØ±Øª ØªÙ…Ø§Ù…", "Ø¨Ø®ÙŠØ± ÙˆØ¹Ø§ÙÙŠØ© ÙŠØ§ ÙˆØ±Ø¯Ø©"] },
        { key: ["Ù‡Ù‡Ù‡Ù‡", "Ø®Ø®Ø®"], res: ["Ø¯ÙˆÙ… Ø§Ù„Ø¶Ø­ÙƒØ© Ø§Ù„Ø­Ù„ÙˆØ© ÙŠØ§Ø±Ø¨ ğŸ˜‚", "ÙØ¯ÙˆØ© Ù„Ù‡Ø§Ù„Ø¶Ø­ÙƒØ©ØŒ Ø§Ù†Ø±ØªÙ†Ø§", "Ø¹Ø³Ù‰ Ø¯ÙˆÙ… Ù…ØªØ¨Ø³Ù…!"] },
        { key: ["Ù…Ù†ÙˆØ±", "Ù†ÙˆØ±Øª"], res: ["Ù†ÙˆØ±Ùƒ Ù‡Ø°Ø§ Ø¹Ø§ÙƒØ³ ÙŠØ§ Ø°Ù‡Ø¨", "Ø£Ù†Øª Ø£ØµÙ„ Ø§Ù„Ù†ÙˆØ± ÙˆØ§Ù„Ø¬Ù…Ø§Ù„", "Ø§Ù„Ø´Ø§Øª Ù…Ù†ÙˆØ± Ø¨ÙˆØ¬ÙˆØ¯Ùƒ ÙŠØ§ ØºØ§Ù„ÙŠ"] },
        { key: ["ÙƒÙÙˆ", "Ø³Ø¨Ø¹"], res: ["ÙƒÙÙˆ Ù…Ù†Ùƒ ÙˆÙ…Ù† Ø£ØµÙ„Ùƒ Ø§Ù„Ø·ÙŠØ¨ Ø°ÙŠØ¨!", "Ø£Ù†Øª Ø§Ù„Ø³Ø¨Ø¹ ÙˆØ§Ù„Ù„Ù‡ ÙŠØ§ Ø¨Ø·Ù„", "ØªØ³ØªØ§Ù‡Ù„ Ù„Ù‚Ø¨ Ø§Ù„ÙƒÙÙˆ"] },
        { key: ["Ø¶ÙˆØ¬Ø©", "Ù…Ù„Ù„"], res: ["Ù„ÙŠØ´ Ø§Ù„Ø¶ÙˆØ¬Ø©ØŸ Ø³ÙˆÙ„Ù ÙˆÙŠØ§Ù†Ø§ ÙˆØ§Ù†Ø³Ù‰ Ø§Ù„Ù‡Ù… ğŸ’™", "Ø§ÙƒØªØ¨ 'Ø³Ø¤Ø§Ù„' ÙˆØ®Ù„ÙŠÙ†Ø§ Ù†ØªØ³Ù„Ù‰"ØŒ "Ø§Ù„Ø¶ÙˆØ¬Ø© ØªÙ…ÙˆØª Ø¨ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…Ø§Ø³ØªØ±!"] }
    ];

    function go(id) {
        curRoom = id;
        document.getElementById('lobby-page').style.display = 'none';
        document.getElementById('chat-page').style.display = 'block';
        load();
    }

    function home() {
        document.getElementById('chat-page').style.display = 'none';
        document.getElementById('lobby-page').style.display = 'block';
    }

    let curRoom = "";
    function send() {
        let t = document.getElementById('mInp').value.trim(); if(!t) return;
        db.ref('rooms/'+curRoom).push({ u: myN, t: t });
        
        // Ø°ÙƒØ§Ø¡ Ø§Ù„Ø±Ø¯
        botBrain.forEach(item => {
            if(item.key.some(k => t.toLowerCase().includes(k))) {
                let r = item.res[Math.floor(Math.random()*item.res.length)];
                setTimeout(() => {
                    db.ref('rooms/'+curRoom).push({ u: "ğŸ¤– BOT", t: r, bot: true });
                }, 800);
            }
        });
        document.getElementById('mInp').value = "";
    }

    function load() {
        db.ref('rooms/'+curRoom).off();
        let box = document.getElementById('msgs'); box.innerHTML = "";
        db.ref('rooms/'+curRoom).limitToLast(30).on('child_added', snap => {
            let m = snap.val();
            let div = document.createElement('div'); div.className = 'msg';
            div.innerHTML = `<div class="bubble"><b style="color:${m.bot?'var(--gold)':'var(--neon)'}">${m.u}</b><br>${m.t}</div>`;
            box.appendChild(div); box.scrollTop = box.scrollHeight;
        });
    }

    // Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†
    db.ref('online/'+myN).set(true); db.ref('online/'+myN).onDisconnect().remove();
    db.ref('online').on('value', snap => {
        document.getElementById('on-count').innerText = snap.numChildren() + " Ù…ØªØµÙ„";
    });
</script>
</body>
</html>
