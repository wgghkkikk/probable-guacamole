// دالة التحكم التلقائي عند الكتابة
const msgInput = document.getElementById('msg-in');

msgInput.addEventListener('input', function() {
    const usersPanel = document.getElementById('users-panel');
    const settingsPanel = document.getElementById('settings-panel');
    const chatContainer = document.getElementById('chat-container');

    if (this.value.length > 0) {
        // إخفاء الأجنحة وتوسيع الشات عند البدء بالكتابة
        usersPanel.classList.add('panel-hidden');
        settingsPanel.classList.add('panel-hidden');
        chatContainer.style.margin = "0 20px"; 
    } else {
        // إعادة الأجنحة عند مسح النص
        usersPanel.classList.remove('panel-hidden');
        settingsPanel.classList.remove('panel-hidden');
        chatContainer.style.margin = "0 240px";
    }
});

// تعديل دالة الإرسال لإعادة الوضع الطبيعي
function send() {
    const inp = document.getElementById('msg-in');
    if(inp.value.trim()) {
        renderMessage({u: "علوش", t: "꧁ " + inp.value + " ꧂"});
        triggerRoyalEffects(); // تأثيرات الزلزال والبرق
        
        // إعادة الأجنحة بعد الإرسال
        inp.value = "";
        document.getElementById('users-panel').classList.remove('panel-hidden');
        document.getElementById('settings-panel').classList.remove('panel-hidden');
        document.getElementById('chat-container').style.margin = "0 240px";
    }
}
