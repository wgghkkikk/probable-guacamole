<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ğŸ‘‘ Ø¥Ø¯Ø§Ø±Ø© Ù…Ù…Ù„ÙƒØ© Ø¹Ù„ÙˆØ´ Ø§Ù„Ø¹Ù„ÙŠØ§</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { margin: 0; font-family: Tahoma, sans-serif; background: #eee; display: flex; flex-direction: column; height: 100vh; }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„Ù…Ù„ÙƒÙŠ */
        #news-bar { background: #000; color: gold; padding: 5px; text-align: center; font-size: 13px; border-bottom: 2px solid gold; }

        header { background: #333; color: white; padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; }
        
        #main-area { display: flex; flex: 1; overflow: hidden; }
        
        /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ */
        #user-sidebar { width: 200px; background: #222; color: #ccc; border-left: 2px solid gold; overflow-y: auto; }
        .u-item { padding: 10px; border-bottom: 1px solid #333; font-size: 13px; display: flex; align-items: center; gap: 5px; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© */
        #chat-window { flex: 1; display: flex; flex-direction: column; background: #fff; position: relative; }
        #messages { flex: 1; overflow-y: auto; padding: 15px; }
        .line { border-bottom: 1px dotted #ddd; padding: 5px 0; font-size: 14px; }
        .k-text { color: #d44d06; font-weight: bold; } /* Ù„ÙˆÙ† Ø®Ø· Ø§Ù„Ù…Ù„Ùƒ */

        /* Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© (Ù„Ù„Ù…Ù„Ùƒ ÙÙ‚Ø·) */
        #king-panel { width: 180px; background: #f9f9f9; border-right: 1px solid #ccc; padding: 10px; font-size: 12px; }
        .admin-btn { width: 100%; margin-bottom: 8px; padding: 8px; cursor: pointer; background: #444; color: white; border: none; border-radius: 4px; }
        .admin-btn:hover { background: gold; color: black; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */
        footer { background: #ddd; padding: 15px; display: flex; gap: 10px; border-top: 2px solid gold; }
        #msg-in { flex: 1; padding: 10px; border-radius: 5px; border: 1px solid #999; }
        .send-btn { background: #222; color: gold; border: none; padding: 0 30px; cursor: pointer; font-weight: bold; border-radius: 5px; }
    </style>
</head>
<body>

    <div id="news-bar"><marquee id="marq">ğŸ‘‘ Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ø´Ø§Øª Ù…Ù…Ù„ÙƒØ© Ø¹Ù„ÙˆØ´ Ø§Ù„Ø±Ø³Ù…ÙŠ.. Ù†ÙˆØ±ØªÙˆÙ†Ø§ ğŸ‘‘</marquee></div>

    <header>
        <span>ğŸ›¡ï¸ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù…Ù„ÙƒÙŠØ©</span>
        <span id="king-status" style="color:gold;">Ø§Ù„Ù…Ù„Ùƒ: Ù…ØªØµÙ„ âœ…</span>
    </header>

    <div id="main-area">
        <div id="king-panel">
            <b style="color:red;">âš™ï¸ Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ù„Ùƒ:</b>
            <hr>
            <button class="admin-btn" onclick="clearAll()">ğŸ§¹ Ù…Ø³Ø­ Ø§Ù„Ø´Ø§Øª</button>
            <button class="admin-btn" onclick="changeNews()">ğŸ“¢ ØªØºÙŠÙŠØ± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†</button>
            <button class="admin-btn" onclick="alert('Ø³ÙŠØªÙ… Ù‚ÙÙ„ Ø§Ù„Ø´Ø§Øª Ø¨Ø§Ù„ÙƒØ§Ù…Ù„')">ğŸ”’ Ù‚ÙÙ„ Ø§Ù„Ø´Ø§Øª</button>
            <button class="admin-btn" onclick="setKingColor()">ğŸ¨ ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø®Ø·ÙŠ</button>
        </div>

        <div id="chat-window">
            <div id="messages"></div>
        </div>

        <div id="user-sidebar">
            <div style="background:#000; padding:5px; font-size:11px; text-align:center;">Ø§Ù„Ù…ØªÙˆØ§Ø¬Ø¯ÙˆÙ† Ø­Ø§Ù„ÙŠØ§Ù‹</div>
            <div class="u-item">ğŸ‘‘ Ø¹Ù„ÙˆØ´ (Ø£Ø¯Ù…Ù†)</div>
        </div>
    </div>

    <footer>
        <input type="text" id="msg-in" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ ÙŠØ§ Ù…Ù„Ùƒ...">
        <button class="send-btn" onclick="send()">Ø¥Ø±Ø³Ø§Ù„</button>
    </footer>

    <script>
        const firebaseConfig = { databaseURL: "https://alloush-kingdom-default-rtdb.firebaseio.com" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù…Ø¹ Ø§Ù„Ø±ØªØ¨Ø©
        function send() {
            const inp = document.getElementById('msg-in');
            if(inp.value.trim() !== "") {
                db.ref("messages").push().set({
                    user: "Ø¹Ù„ÙˆØ´",
                    text: inp.value,
                    rank: "Ø§Ù„Ù…Ù„Ùƒ",
                    color: localStorage.getItem('kColor') || "red"
                });
                inp.value = "";
            }
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø¨Ù†Ø¸Ø§Ù… Ø§Ù„Ø³ÙƒØ±Ø¨Øª Ø§Ù„ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠ
        db.ref("messages").on("child_added", (snap) => {
            const data = snap.val();
            const div = document.createElement('div');
            div.className = 'line';
            div.innerHTML = `<span style="color:gray; font-size:10px;">[${new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})}]</span> 
                             <b style="color:${data.color};">[${data.rank}] ${data.user}:</b> ${data.text}`;
            document.getElementById('messages').appendChild(div);
            document.getElementById('messages').scrollTop = document.getElementById('messages').scrollHeight;
        });

        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
        function clearAll() { if(confirm("Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø´Ø§ØªØŸ")) db.ref("messages").remove(); location.reload(); }
        
        function changeNews() {
            let n = prompt("Ø§ÙƒØªØ¨ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„Ø¬Ø¯ÙŠØ¯:");
            if(n) { document.getElementById('marq').innerText = n; }
        }

        function setKingColor() {
            let c = prompt("Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ù„ÙˆÙ† Ø¨Ø§Ù„Ø§Ù†Ø¬Ù„ÙŠØ²ÙŠ (blue, red, gold, green):");
            if(c) localStorage.setItem('kColor', c);
        }

        document.getElementById('msg-in').onkeypress = (e) => { if(e.key === 'Enter') send(); };
    </script>
</body>
</html>
