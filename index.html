// Ù…ÙŠØ²Ø© 1: ØªÙŠÙƒ ØªÙˆÙƒ Ø§Ù„Ù…Ù…Ù„ÙƒØ© (Ù…Ù‚Ø§Ø·Ø¹ Ø¨Ù„Ø§ Ù†Ù‡Ø§ÙŠØ© + Ø¨Ø­Ø«)
function openTikTok() {
    const win = document.getElementById('royal-window');
    win.style.display = 'block';
    
    // ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªÙŠÙƒ ØªÙˆÙƒ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©
    document.getElementById('window-body').innerHTML = `
        <div id="tiktok-container" style="height: 75vh; overflow-y: scroll; scroll-snap-type: y mandatory; background: #000; border-radius: 15px; position: relative;">
            
            <div style="position: sticky; top: 0; z-index: 100; background: rgba(0,0,0,0.7); padding: 10px; display: flex; gap: 5px;">
                <input type="text" id="user-search" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø´Ø®Øµ Ù„Ù…ØªØ§Ø¨Ø¹ØªÙ‡..." style="flex-grow:1; background:#222; border:1px solid gold; color:white; border-radius:15px; padding:5px 15px;">
                <button onclick="searchUser()" style="background:gold; border:none; border-radius:15px; padding:5px 15px; cursor:pointer; font-weight:bold;">Ø¨Ø­Ø«</button>
            </div>

            <div id="video-feed">
                </div>
            
            <div id="loading-trigger" style="text-align:center; padding:20px; color:gold;">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…Ù‚Ø§Ø·Ø¹ Ø§Ù„Ù…Ù„ÙƒÙŠØ©...</div>
        </div>
    `;

    loadMoreVideos(); // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰
}

// Ù‚Ø§Ø¦Ù…Ø© ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© (Ø³ÙŠØªÙ… Ø²ÙŠØ§Ø¯ØªÙ‡Ø§ Ù„ØªÙƒÙˆÙ† Ù„Ø§Ù†Ù‡Ø§Ø¦ÙŠØ©)
let videoSources = [
    "https://www.w3schools.com/html/mov_bbb.mp4",
    "https://www.w3schools.com/html/horse.mp4",
    "https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4"
];

function loadMoreVideos() {
    const feed = document.getElementById('video-feed');
    for(let i=0; i<5; i++) { // ØªØ­Ù…ÙŠÙ„ 5 Ù…Ù‚Ø§Ø·Ø¹ ÙÙŠ ÙƒÙ„ Ù…Ø±Ø©
        let src = videoSources[Math.floor(Math.random() * videoSources.length)];
        let videoPost = document.createElement('div');
        videoPost.style.height = "100%";
        videoPost.style.scrollSnapAlign = "start";
        videoPost.style.position = "relative";
        videoPost.style.borderBottom = "2px solid #111";
        
        videoPost.innerHTML = `
            <video width="100%" height="100%" loop onclick="this.paused ? this.play() : this.pause()" style="object-fit: cover;">
                <source src="${src}" type="video/mp4">
            </video>
            <div style="position: absolute; right: 10px; bottom: 100px; display: flex; flex-direction: column; gap: 20px; align-items: center;">
                <div onclick="this.style.color='red'" style="cursor:pointer; font-size:25px;">â¤ï¸</div>
                <div onclick="openComments()" style="cursor:pointer; font-size:25px;">ğŸ’¬</div>
                <div onclick="alert('ØªÙ…Øª Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©')" style="background:gold; color:black; border-radius:50%; width:30px; height:30px; display:flex; align-items:center; justify-content:center; font-weight:bold; cursor:pointer;">+</div>
            </div>
            <div style="position: absolute; bottom: 20px; left: 10px; text-shadow: 1px 1px 5px black;">
                <b>@user_king_${Math.floor(Math.random()*100)}</b>
                <p>ÙˆØµÙ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ù…Ù„ÙƒÙŠ #Ù…Ù…Ù„ÙƒØ©_Ø¹Ù„ÙˆØ´</p>
            </div>
        `;
        feed.appendChild(videoPost);
    }
}

// Ù…ÙŠØ²Ø© Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø´Ø®Øµ
function searchUser() {
    const user = document.getElementById('user-search').value;
    const feed = document.getElementById('video-feed');
    if(user) {
        feed.innerHTML = `
            <div style="padding:20px; text-align:center;">
                <img src="https://via.placeholder.com/100" style="border-radius:50%; border:2px solid gold;">
                <h2>${user}</h2>
                <button onclick="alert('ØªÙ…Øª Ù…ØªØ§Ø¨Ø¹Ø© ${user}')" style="background:gold; border:none; padding:10px 30px; border-radius:20px; cursor:pointer;">Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø¢Ù†</button>
                <p style="margin-top:20px;">Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ù…Ù‚Ø§Ø·Ø¹ ${user}...</p>
            </div>
        `;
        setTimeout(loadMoreVideos, 1500); // Ù…Ø­Ø§ÙƒØ§Ø© Ø¬Ù„Ø¨ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„Ø´Ø®Øµ
    }
}
