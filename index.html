// Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù‚Ø§Ø·Ø¹ - ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© Ø±ÙˆØ§Ø¨Ø· ÙÙŠØ¯ÙŠÙˆÙ‡Ø§ØªÙƒ Ù‡Ù†Ø§
let tiktokData = [
    { id: 1, src: "https://www.w3schools.com/html/mov_bbb.mp4", user: "Ø¹Ù„ÙˆØ´_Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±", likes: 1200, comments: [] },
    { id: 2, src: "https://www.w3schools.com/html/horse.mp4", user: "ÙØ§Ø±Ø³_Ø§Ù„Ù…Ù…Ù„ÙƒØ©", likes: 850, comments: [] },
    { id: 3, src: "https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4", user: "Ø±Ø¹Ø¯_Ø¨ØºØ¯Ø§Ø¯", likes: 3000, comments: [] }
];

function openTikTok() {
    const win = document.getElementById('royal-display');
    win.style.display = 'block';
    document.getElementById('view-title').innerText = "ğŸ¬ ØªÙŠÙƒ ØªÙˆÙƒ Ø§Ù„Ù…Ù…Ù„ÙƒØ© - Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ";
    
    // Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
    document.getElementById('display-content').innerHTML = `
        <div id="tiktok-wrapper" style="height: 70vh; overflow-y: scroll; scroll-snap-type: y mandatory; background: #000; border-radius: 15px;">
            <div id="video-stream"></div>
        </div>
    `;
    renderTikToks(); // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø±Ù†Ø¯Ø±
}

function renderTikToks() {
    const stream = document.getElementById('video-stream');
    stream.innerHTML = ""; 

    tiktokData.forEach((video) => {
        const post = document.createElement('div');
        post.className = 'tiktok-post';
        post.style = "height: 100%; scroll-snap-align: start; position: relative; border-bottom: 5px solid #111;";
        
        // Ø¨Ù†Ø§Ø¡ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù…Ø¹ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
        post.innerHTML = `
            <video width="100%" height="100%" loop autoplay muted style="object-fit:cover;">
                <source src="${video.src}" type="video/mp4">
            </video>
            
            <div style="position:absolute; right:15px; bottom:100px; display:flex; flex-direction:column; gap:20px; align-items:center; z-index:100;">
                <div onclick="handleLike(${video.id})" style="cursor:pointer; text-align:center;">
                    <span id="heart-${video.id}" style="font-size:30px; color:white;">â¤ï¸</span>
                    <small id="l-count-${video.id}" style="display:block; color:white;">${video.likes}</small>
                </div>
                <div onclick="showCommentBox(${video.id})" style="cursor:pointer; text-align:center;">
                    <span style="font-size:30px; color:white;">ğŸ’¬</span>
                    <small id="c-count-${video.id}" style="display:block; color:white;">${video.comments.length}</small>
                </div>
                <div onclick="alert('ØªÙ…Øª Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©')" style="background:gold; color:black; border-radius:50%; width:35px; height:35px; display:flex; align-items:center; justify-content:center; font-weight:bold; cursor:pointer;">+</div>
            </div>

            <div style="position:absolute; bottom:30px; left:15px; text-shadow:2px 2px 5px #000; z-index:100;">
                <h4 style="margin:0; color:gold;">@${video.user}</h4>
                <p style="margin:5px 0; font-size:14px; color:white;">ÙÙŠØ¯ÙŠÙˆ Ù…Ù„ÙƒÙŠ Ø­ØµØ±ÙŠ ğŸ‘‘</p>
            </div>

            <div id="comment-box-${video.id}" style="display:none; position:absolute; bottom:0; width:100%; background:rgba(0,0,0,0.95); padding:10px; z-index:200; border-top:1px solid gold;">
                <div id="list-${video.id}" style="max-height:80px; overflow-y:auto; margin-bottom:10px; font-size:12px; color:white;"></div>
                <div style="display:flex; gap:5px;">
                    <input type="text" id="input-${video.id}" placeholder="Ø§ÙƒØªØ¨ ØªØ¹Ù„ÙŠÙ‚Ùƒ..." style="flex-grow:1; background:#222; border:1px solid gold; color:white; border-radius:10px; padding:5px;">
                    <button onclick="postComment(${video.id})" style="background:gold; border:none; padding:5px 10px; border-radius:10px; cursor:pointer; font-weight:bold;">Ù†Ø´Ø±</button>
                </div>
            </div>
        `;
        stream.appendChild(post);
    });
}

// Ø¯Ø§Ù„Ø© Ø§Ù„Ù„Ø§ÙŠÙƒ Ø§Ù„Ù…ØµØ­Ø­Ø©
function handleLike(id) {
    const video = tiktokData.find(v => v.id === id);
    video.likes += 1;
    document.getElementById(`heart-${id}`).style.color = "red";
    document.getElementById(`l-count-${id}`).innerText = video.likes;
}

// Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø§Ù„Ù…ØµØ­Ø­Ø©
function showCommentBox(id) {
    const box = document.getElementById(`comment-box-${id}`);
    box.style.display = box.style.display === 'none' ? 'block' : 'none';
}

function postComment(id) {
    const input = document.getElementById(`input-${id}`);
    const list = document.getElementById(`list-${id}`);
    const video = tiktokData.find(v => v.id === id);
    
    if(input.value.trim() !== "") {
        video.comments.push(input.value);
        const div = document.createElement('div');
        div.style = "padding:3px; border-bottom:1px solid #333; color:white;";
        div.innerHTML = `<span style="color:gold;">Ø§Ù„Ù…Ù„Ùƒ:</span> ${input.value}`;
        list.appendChild(div);
        document.getElementById(`c-count-${id}`).innerText = video.comments.length;
        input.value = "";
    }
}
