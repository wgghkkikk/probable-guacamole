<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ø§Ù„Ù…Ø§Ø³ØªØ± - Ø§Ù„Ø¨Ø« Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ</title>
    <script src="https://cdn.pubnub.com/sdk/javascript/pubnub.4.29.9.min.js"></script>
    <style>
        :root { --glow: #00f2ff; --master: #ff004c; }
        body { background: #000; color: #fff; margin: 0; display: flex; flex-direction: column; height: 100vh; font-family: 'Segoe UI', Tahoma, sans-serif; overflow: hidden; }
        header { height: 60px; border-bottom: 2px solid var(--glow); text-align: center; line-height: 60px; color: var(--glow); font-weight: bold; font-size: 22px; text-shadow: 0 0 15px var(--glow); }
        .wrapper { display: flex; flex: 1; overflow: hidden; }
        
        /* Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„ÙŠÙ…Ù†Ù‰: Ø§Ù„ØºØ±Ù ÙˆØ§Ù„Ø£Ø¯ÙˆØ§Øª */
        #right { width: 240px; background: #050505; border-left: 1px solid #222; padding: 15px; display: flex; flex-direction: column; }
        
        /* Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„ÙŠØ³Ø±Ù‰: Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† */
        #left { width: 240px; background: #050505; border-right: 1px solid #222; padding: 15px; }
        
        /* Ø§Ù„ÙˆØ³Ø·: Ø§Ù„Ø´Ø§Øª */
        #center { flex: 1; display: flex; flex-direction: column; background: #0a0a0a; position: relative; }
        #msgs { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
        
        .btn { background: var(--glow); color: #000; border: none; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: bold; margin-bottom: 10px; width: 100%; }
        .room-btn { background: #111; color: #fff; border: 1px solid #333; padding: 8px; margin-top: 5px; border-radius: 5px; cursor: pointer; text-align: right; width: 100%; }
        .room-btn:hover { border-color: var(--glow); }

        /* Ø±ØªØ¨Ø© Ø§Ù„Ù…Ø§Ø³ØªØ± */
        .user-card { background: #111; padding: 15px; border-radius: 12px; text-align: center; border: 1px solid #222; }
        .rank { background: var(--master); font-size: 11px; padding: 3px 10px; border-radius: 20px; animation: pulse 1s infinite; display: inline-block; box-shadow: 0 0 10px var(--master); }
        .name { color: var(--glow); font-weight: bold; display: block; margin-top: 10px; font-size: 18px; text-shadow: 0 0 5px var(--glow); animation: move 2s infinite ease-in-out; }
        
        @keyframes pulse { 50% { opacity: 0.6; transform: scale(1.05); } }
        @keyframes move { 50% { transform: translateX(7px); } }

        .msg-line { background: rgba(255,255,255,0.07); padding: 12px; border-radius: 10px; border-right: 4px solid var(--glow); max-width: 90%; align-self: flex-start; }
        .input-bar { padding: 15px; background: #000; display: flex; gap: 10px; border-top: 1px solid #222; }
        #msgInput { flex: 1; background: #111; border: 1px solid #333; color: #fff; padding: 12px; border-radius: 30px; outline: none; }
        
        .icons { margin-top: 15px; font-size: 20px; display: flex; justify-content: center; gap: 15px; border-top: 1px solid #222; padding-top: 10px; }
        .icon { cursor: pointer; transition: 0.3s; }
        .icon:hover { transform: scale(1.3); filter: drop-shadow(0 0 5px var(--glow)); }
    </style>
</head>
<body>

<header>MASTER SYSTEM - Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</header>

<div class="wrapper">
    <div id="right">
        <div style="color:var(--glow); font-size:14px; margin-bottom:10px; font-weight:bold;">ğŸ“ Ø§Ù„ØºØ±Ù Ø§Ù„Ù†Ø´Ø·Ø©</div>
        <button class="btn" onclick="addNewRoom()">+ Ø¥Ù†Ø´Ø§Ø¡ ØºØ±ÙØ© Ø¬Ø¯ÙŠØ¯Ø©</button>
        <div id="rooms-list">
            <button class="room-btn" style="border-color:var(--glow)"># Ø§Ù„ØºØ±ÙØ© Ø§Ù„Ø¹Ø§Ù…Ø©</button>
        </div>
    </div>

    <div id="center">
        <div id="msgs"></div>
        <div class="input-bar">
            <input type="text" id="msgInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§ ÙŠØ§ Ù…Ø§Ø³ØªØ±...">
            <button class="btn" style="width:100px; margin-bottom:0;" onclick="send()">Ø¥Ø±Ø³Ø§Ù„</button>
        </div>
    </div>

    <div id="left">
        <div style="color:var(--glow); font-size:14px; text-align:center; margin-bottom:15px; font-weight:bold;">ğŸ‘¤ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ÙˆØ§Ù„Ù…ØªØµÙ„ÙˆÙ†</div>
        <div class="user-card">
            <span class="rank">ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Øª</span>
            <span class="name">Ø§Ù„Ù…Ø§Ø³ØªØ±</span>
            <div class="icons">
                <span class="icon" title="Ø®Ø§Øµ">ğŸ“©</span>
                <span class="icon" title="ØµØ¯Ø§Ù‚Ø©">ğŸ¤</span>
                <span class="icon" title="Ø¥Ø¹Ø¬Ø§Ø¨" onclick="this.style.color='red'">â¤ï¸</span>
            </div>
        </div>
    </div>
</div>

<script>
    // Ù…Ø­Ø±Ùƒ Ø§Ù„Ø±Ø¨Ø· Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ
    const pubnub = new PubNub({
        publishKey: 'pub-c-db838685-3004-4363-9524-7667858c0394',
        subscribeKey: 'sub-c-576a166e-c14d-11eb-a010-02da5302672a',
        uuid: "Master_" + Math.floor(Math.random() * 9999)
    });

    pubnub.subscribe({ channels: ['master_pro_chat'] });

    pubnub.addListener({
        message: function(s) {
            let m = document.getElementById('msgs');
            m.innerHTML += `<div class="msg-line"><b style="color:var(--master)">[Ø§Ù„Ù…Ø§Ø³ØªØ±]:</b> ${s.message.text}</div>`;
            m.scrollTop = m.scrollHeight;
        }
    });

    function send() {
        let i = document.getElementById('msgInput');
        if(i.value.trim() !== "") {
            pubnub.publish({ channel: 'master_pro_chat', message: { text: i.value } });
            i.value = '';
        }
    }

    // Ø®Ø§ØµÙŠØ© Ø­ÙØ¸ Ø§Ù„ØºØ±Ù Ù„ÙƒÙŠ Ù„Ø§ ØªØ®ØªÙÙŠ
    function loadRooms() {
        let savedRooms = JSON.parse(localStorage.getItem('chatRooms')) || [];
        savedRooms.forEach(room => {
            document.getElementById('rooms-list').innerHTML += `<button class="room-btn"># ${room}</button>`;
        });
    }

    function addNewRoom() {
        let n = prompt("Ø§Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„ØºØ±ÙØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:");
        if(n) {
            let savedRooms = JSON.parse(localStorage.getItem('chatRooms')) || [];
            savedRooms.push(n);
            localStorage.setItem('chatRooms', JSON.stringify(savedRooms));
            document.getElementById('rooms-list').innerHTML += `<button class="room-btn"># ${n}</button>`;
        }
    }

    // ØªØ´ØºÙŠÙ„ Ø¹Ù†Ø¯ Ø§Ù„ÙØªØ­
    window.onload = loadRooms;
    document.getElementById('msgInput').onkeypress = (e) => { if(e.key === 'Enter') send(); };
</script>

</body>
</html>
