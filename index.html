<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DRAGON CHAT V20 ğŸ”¥</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@800;900&display=swap');
        :root { --fire: linear-gradient(90deg, #ff4b2b, #ff416c); --gold: #ffcc00; }
        * { box-sizing: border-box; font-family: 'Cairo', sans-serif; margin: 0; padding: 0; }
        
        body { background: #0a0000; color: #fff; overflow: hidden; height: 100vh; }
        .fire-bg { position: fixed; inset: 0; background: radial-gradient(circle at top, #330000 0%, #000 100%); z-index: -1; }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ù†Ø§Ø±ÙŠ */
        .header {
            height: 65px; background: rgba(20,0,0,0.9);
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 15px; border-bottom: 3px solid #ff4b2b;
            box-shadow: 0 0 20px rgba(255, 75, 43, 0.4);
        }

        /* Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ø¹Ù„ÙˆÙŠ */
        #top-alert {
            position: fixed; top: 70px; width: 90%; left: 5%;
            background: var(--fire); color: white; padding: 8px;
            border-radius: 10px; text-align: center; font-size: 12px;
            display: none; z-index: 5000; animation: fadeInDown 0.5s;
        }

        /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø´Ø§Øª */
        #fire-chat {
            height: calc(100vh - 150px); overflow-y: auto; padding: 15px;
            display: flex; flex-direction: column; gap: 12px;
        }

        .dragon-msg {
            background: rgba(40,0,0,0.6); border: 1px solid #440000;
            padding: 12px; border-radius: 20px 20px 0 20px;
            max-width: 80%; align-self: flex-start;
            position: relative; animation: slideIn 0.3s forwards;
        }

        .owner-border { border: 2px solid; border-image: linear-gradient(45deg, gold, red) 1; animation: glow 1s infinite alternate; }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ÙƒØªØ§Ø¨Ø© */
        .footer {
            height: 85px; background: #111; display: flex; align-items: center;
            padding: 10px; gap: 10px; border-top: 2px solid #ff4b2b;
        }

        #in { flex: 1; height: 45px; background: #222; border: 1px solid #444; border-radius: 10px; color: #fff; padding: 0 15px; outline: none; }
        .btn-fire { background: var(--fire); border: none; width: 50px; height: 45px; border-radius: 10px; cursor: pointer; color: white; font-weight: 900; }

        @keyframes glow { from { box-shadow: 0 0 5px gold; } to { box-shadow: 0 0 15px red; } }
        @keyframes slideIn { from { opacity: 0; transform: translateX(50px); } to { opacity: 1; transform: translateX(0); } }
        @keyframes fadeInDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="fire-bg"></div>
<div id="top-alert">ğŸ”¥ Ø§Ù†ØªØ¨Ù‡: Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ± Ø¹Ù„ÙˆØ´ Ø¯Ø®Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø´ ğŸ”¥</div>

<div class="header">
    <button onclick="clearChat()" style="background:none; border:none; color:#ff4b2b; font-size:20px;">ğŸ—‘ï¸</button>
    <div style="font-weight: 900; font-size: 22px; color: var(--gold); text-shadow: 0 0 10px red;">DRAGON CHAT V20</div>
    <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" style="width:40px; border-radius:50%; border:2px solid gold;">
</div>

<div id="fire-chat"></div>

<div class="footer">
    <button style="background:none; border:none; font-size:25px;">ğŸ²</button>
    <input type="text" id="in" placeholder="Ø£Ø·Ù„Ù‚ Ù„Ù‡Ø¨Ùƒ Ù‡Ù†Ø§..." onkeypress="if(event.key==='Enter') send()">
    <button class="btn-fire" onclick="send()">Ø¥Ø±Ø³Ø§Ù„</button>
</div>

<script>
    const config = { databaseURL: "https://masterchat-f2da9-default-rtdb.firebaseio.com" };
    firebase.initializeApp(config);
    const db = firebase.database();

    let me = { name: "Ø¹Ù„ÙˆØ´", rank: "Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ± ğŸ”¥" };

    function send() {
        let val = document.getElementById('in').value;
        if(!val) return;
        db.ref('dragon_msgs').push({
            user: me.name,
            text: val,
            rank: me.rank,
            isOwner: true
        });
        document.getElementById('in').value = "";
    }

    db.ref('dragon_msgs').limitToLast(40).on('child_added', s => {
        let d = s.val();
        let box = document.getElementById('fire-chat');
        let div = document.createElement('div');
        div.className = "dragon-msg " + (d.isOwner ? "owner-border" : "");
        div.innerHTML = `
            <b style="color:var(--gold); font-size:12px;">${d.user} [${d.rank}]</b>
            <div style="margin-top:5px;">${d.text}</div>
        `;
        box.appendChild(div);
        box.scrollTop = box.scrollHeight;
    });

    function clearChat() { if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø®Ù…Ø§Ø¯ Ø§Ù„Ù†ÙŠØ±Ø§Ù† ÙˆÙ…Ø³Ø­ Ø§Ù„Ø´Ø§ØªØŸ")) db.ref('dragon_msgs').remove(); }

    // ØªÙ†Ø¨ÙŠÙ‡ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø§Ù„Ùƒ
    setTimeout(() => {
        let alert = document.getElementById('top-alert');
        alert.style.display = 'block';
        setTimeout(() => alert.style.display = 'none', 4000);
    }, 2000);
</script>
</body>
</html>
