<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <style>
        :root { --king-gold: #ffd700; --royal-red: #ff0000; }
        body { background: #000; color: white; margin: 0; overflow: hidden; font-family: 'Segoe UI', Tahoma, sans-serif; }

        /* 1. Ø§Ù„Ø£Ø¬Ù†Ø­Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ© (ØªÙ†Ø³Ø¯ ÙˆØªÙ†ÙØªØ­ Ø¨Ø°ÙƒØ§Ø¡) */
        .side-panel {
            position: fixed; top: 80px; width: 240px; height: 70%;
            background: rgba(0,0,0,0.95); border: 2px solid var(--king-gold);
            border-radius: 20px; transition: 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 2000; box-shadow: 0 0 30px rgba(255, 215, 0, 0.3);
        }
        #users-panel { right: 15px; } 
        #settings-panel { left: 15px; }
        .panel-hidden { transform: scaleX(0); opacity: 0; pointer-events: none; }

        /* 2. Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ ÙˆØ§Ù„Ø²Ø± Ø§Ù„Ù…Ù‚Ù„ÙˆØ¨ Ø§Ù„Ù…ØµØ­Ø­ */
        .input-bar {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            width: 90%; display: flex; flex-direction: row-reverse; /* Ø§Ù„Ø²Ø± ÙŠØ³Ø§Ø±Ø§Ù‹ */
            background: #1a1a1a; border: 2px solid var(--king-gold);
            border-radius: 50px; padding: 10px 20px; align-items: center; z-index: 3000;
        }
        #send-btn {
            background: var(--royal-red); color: white; border: 2px solid var(--king-gold);
            border-radius: 40px; padding: 12px 30px; cursor: pointer;
            font-weight: bold; font-size: 18px; white-space: nowrap;
        }

        /* 3. Ø¨Ø­Ø± Ø§Ù„Ø¢Ù„Ø§Ù Ø§Ù„Ù…Ø¤Ù„ÙØ© (Ø¨Ù…Ù†ØªØµÙ Ø§Ù„Ø´Ø§Ø´Ø©) */
        #mega-emoji-box {
            position: fixed; top: 45%; left: 50%; transform: translate(-50%, -50%);
            width: 85%; height: 60%; background: rgba(0,0,0,0.98);
            border: 4px double var(--king-gold); border-radius: 25px;
            display: none; grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));
            overflow-y: auto; padding: 25px; z-index: 10000;
        }
        .emoji-item { font-size: 35px; cursor: pointer; text-align: center; padding: 10px; transition: 0.2s; }
        .emoji-item:hover { transform: scale(1.3); background: rgba(255,215,0,0.2); border-radius: 10px; }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù…Ù„ÙƒÙŠØ© */
        .royal-toggle {
            position: fixed; top: 20px; background: #222; color: var(--king-gold);
            border: 1px solid var(--king-gold); padding: 10px 20px; border-radius: 15px;
            cursor: pointer; z-index: 4000; font-weight: bold;
        }
    </style>
</head>
<body onload="buildKingdom()">

    <button class="royal-toggle" style="right: 20px;" onclick="toggleWing('users-panel')">ğ“†© Ø§Ù„Ø±Ø¹ÙŠØ© ğ“†ª</button>
    <button class="royal-toggle" style="left: 20px;" onclick="toggleWing('settings-panel')">ğ“†© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ğ“†ª</button>

    <div id="users-panel" class="side-panel">
        <div style="color:var(--king-gold); text-align:center; padding:15px; border-bottom:1px solid gold; font-weight:bold;">
            ğŸ‘¥ Ø§Ù„Ø±Ø¹ÙŠØ© Ø§Ù„Ù…ØªÙˆØ§Ø¬Ø¯Ø©: <span id="online-count">0</span>
        </div>
        <div id="user-list"></div>
    </div>

    <div id="settings-panel" class="side-panel">
        <div style="color:var(--king-gold); text-align:center; padding:15px;">âš™ï¸ Ù†Ø¸Ø§Ù… Ø§Ù„Ù‚ØµØ± Ø§Ù„Ù…Ù„ÙƒÙŠ</div>
        <button style="width:90%; margin:5%; padding:12px; background:white; color:black; font-weight:bold; border-radius:10px;">Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ù„ÙƒÙŠ ğŸ›¡ï¸</button>
    </div>

    <div id="mega-emoji-box"></div>

    <div class="input-bar">
        <button id="send-btn" onclick="sendRoyalMessage()">Ø¥Ø±Ø³Ø§Ù„ âŸ¸</button>
        <input type="text" id="msg-in" style="flex:1; background:none; border:none; color:white; padding:15px; text-align:right; outline:none;" placeholder="Ù€ï®©ï®©Ù¨ï®©ï®©ğŸ‘‘ Ù…Ø±Ø³ÙˆÙ… Ø§Ù„Ù…Ù„Ùƒ Ø¹Ù„ÙˆØ´ ğŸ‘‘ï®©ï®©Ù¨ï®©ï®©Ù€">
        <div onclick="openMegaMenu()" style="cursor:pointer; font-size:35px; margin-right:15px;">ğŸ˜Š</div>
    </div>

    <script>
        // 1. ØªÙØ¹ÙŠÙ„ Ø­Ø±ÙƒØ© Ø§Ù„Ø£Ø¬Ù†Ø­Ø© (Ø§Ù„ÙØªØ­ ÙˆØ§Ù„ØºÙ„Ù‚)
        function toggleWing(id) {
            document.getElementById(id).classList.toggle('panel-hidden');
        }

        // 2. ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¢Ù„Ø§Ù Ø§Ù„Ù…Ø¤Ù„ÙØ© (Ø¨Ø­Ø± Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠØ§Øª ÙˆØ§Ù„Ø²Ø®Ø§Ø±Ù)
        function openMegaMenu() {
            const box = document.getElementById('mega-emoji-box');
            if(box.innerHTML === "") {
                let html = "";
                // ØªÙˆÙ„ÙŠØ¯ Ø¢Ù„Ø§Ù Ø§Ù„Ø±Ù…ÙˆØ²
                for(let i=0x1F600; i<0x1F64F; i++) html += `<div class="emoji-item" onclick="add('${String.fromCodePoint(i)}')">${String.fromCodePoint(i)}</div>`;
                // Ø¥Ø¶Ø§ÙØ© Ø²Ø®Ø§Ø±Ù Ø§Ù„Ù„Ø§ÙˆØ§Øª Ø§Ù„Ø­ØµØ±ÙŠØ©
                const kings = ["ğ“†©", "ğ“†ª", "å", "äº—", "ê§", "ê§‚", "ğŸ”¥", "ğŸ’", "âš”ï¸", "ğŸ‘‘", "ğŸ§¿"];
                kings.forEach(k => html += `<div class="emoji-item" onclick="add('${k}')" style="color:gold;">${k}</div>`);
                box.innerHTML = html;
            }
            box.style.display = (box.style.display === "none" ? "grid" : "none");
        }

        function add(v) { document.getElementById('msg-in').value += v; }

        // 3. ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù…Ø¹ Ø§Ù„Ø±Ø¹Ø¯ ÙˆØ§Ù„Ø²Ø®Ø±ÙØ©
        function sendRoyalMessage() {
            const input = document.getElementById('msg-in');
            if(input.value.trim()) {
                alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ù…Ø±Ø³ÙˆÙ… Ù…Ø²Ø®Ø±Ù: ê§ " + input.value + " ê§‚");
                input.value = "";
                // ØªÙØ¹ÙŠÙ„ ØªØ£Ø«ÙŠØ± Ø§Ù„Ø²Ù„Ø²Ø§Ù„ Ø§Ù„Ù…Ù„ÙƒÙŠ
            }
        }
    </script>
</body>
</html>
