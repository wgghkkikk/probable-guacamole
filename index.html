// Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„Ù…Ù„ÙƒÙŠØ©
var tiktokData = [
    { id: 1, src: "https://www.w3schools.com/html/mov_bbb.mp4", user: "Ø¹Ù„ÙˆØ´_Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±", likes: 1250, comments: 48 },
    { id: 2, src: "https://www.w3schools.com/html/horse.mp4", user: "ÙØ§Ø±Ø³_Ø§Ù„Ù…Ù…Ù„ÙƒØ©", likes: 920, comments: 15 },
    { id: 3, src: "https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4", user: "Ø±Ø¹Ø¯_Ø¨ØºØ¯Ø§Ø¯", likes: 4500, comments: 120 }
];

function openTikTok() {
    var win = document.getElementById('royal-display');
    win.style.display = 'block';
    document.getElementById('view-title').innerText = "ğŸ¬ ØªÙŠÙƒ ØªÙˆÙƒ Ø§Ù„Ù…Ù…Ù„ÙƒØ© - Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø´ØºØ§Ù„";
    
    // Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø­Ø§ÙˆÙŠØ©
    document.getElementById('display-content').innerHTML = '<div id="tiktok-wrapper" style="height:75vh; overflow-y:scroll; scroll-snap-type:y mandatory; background:#000; border-radius:15px;"><div id="video-stream"></div></div>';
    
    renderTikToks();
}

function renderTikToks() {
    var stream = document.getElementById('video-stream');
    stream.innerHTML = ""; 

    tiktokData.forEach(function(video) {
        var post = document.createElement('div');
        post.className = 'tiktok-post';
        post.style = "height:100%; scroll-snap-align:start; position:relative; border-bottom:5px solid #111;";
        
        // Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ ÙŠØ¯ÙˆÙŠØ§Ù‹ Ù„Ø¶Ù…Ø§Ù† Ø¸Ù‡ÙˆØ± Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„Ø£ÙƒÙˆØ§Ø¯
        var html = '';
        html += '<video width="100%" height="100%" loop autoplay muted style="object-fit:cover;"><source src="' + video.src + '" type="video/mp4"></video>';
        
        // Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙØ§Ø¹Ù„
        html += '<div style="position:absolute; right:15px; bottom:100px; display:flex; flex-direction:column; gap:20px; align-items:center; z-index:100;">';
        html += '  <div onclick="handleLike(' + video.id + ')" style="cursor:pointer; text-align:center;">';
        html += '    <span id="heart-' + video.id + '" style="font-size:35px; color:white;">â¤ï¸</span>';
        html += '    <small id="l-count-' + video.id + '" style="display:block; color:white;">' + video.likes + '</small>';
        html += '  </div>';
        html += '  <div onclick="alert(\'Ù†Ø¸Ø§Ù… ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ù‚ÙŠØ¯ Ø§Ù„ØªØ´ØºÙŠÙ„\')" style="cursor:pointer; text-align:center;">';
        html += '    <span style="font-size:35px; color:white;">ğŸ’¬</span>';
        html += '    <small style="display:block; color:white;">' + video.comments + '</small>';
        html += '  </div>';
        html += '  <div onclick="this.style.background=\'white\'; this.style.color=\'black\';" style="background:gold; color:black; border-radius:50%; width:35px; height:35px; display:flex; align-items:center; justify-content:center; font-weight:bold; cursor:pointer;">+</div>';
        html += '</div>';

        // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        html += '<div style="position:absolute; bottom:30px; left:15px; text-shadow:2px 2px 5px #000; z-index:100;">';
        html += '  <h4 style="margin:0; color:gold; font-size:18px;">@' + video.user + '</h4>';
        html += '  <p style="margin:5px 0; font-size:14px; color:white;">ÙÙŠØ¯ÙŠÙˆ Ù…Ù„ÙƒÙŠ Ø­ØµØ±ÙŠ ÙÙŠ Ù…Ù…Ù„ÙƒØªÙƒ ğŸ‘‘</p>';
        html += '</div>';

        post.innerHTML = html;
        stream.appendChild(post);
    });
}

// Ø¯Ø§Ù„Ø© Ø§Ù„Ù„Ø§ÙŠÙƒ - ØªØ¹Ù…Ù„ ÙÙˆØ±Ø§Ù‹ ÙˆØªØºÙŠØ± Ø§Ù„Ø±Ù‚Ù…
function handleLike(id) {
    var countLabel = document.getElementById('l-count-' + id);
    var heartIcon = document.getElementById('heart-' + id);
    var currentLikes = parseInt(countLabel.innerText);
    
    countLabel.innerText = currentLikes + 1;
    heartIcon.style.color = "red";
    heartIcon.style.transform = "scale(1.2)";
    setTimeout(function(){ heartIcon.style.transform = "scale(1)"; }, 200);
}
