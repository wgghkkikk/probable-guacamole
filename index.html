<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>ğŸ‘‘ Ù…Ù…Ù„ÙƒØ© Ø¹Ù„ÙˆØ´ - Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ù…Ù„ÙƒÙŠØ© ğŸ‘‘</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        :root { --main-gold: #d4af37; --royal-bg: #0a0a0a; }
        body { background: var(--royal-bg); color: gold; font-family: 'Segoe UI', sans-serif; margin: 0; overflow-x: hidden; }
        
        /* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ù…Ù„ÙƒÙŠ */
        #royal-header { background: linear-gradient(to bottom, #d4af37, #8a6d3b); color: #000; padding: 15px; font-weight: bold; font-size: 24px; text-align: center; box-shadow: 0 4px 15px var(--main-gold); cursor: pointer; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ (Profile) */
        #profile-section { 
            width: 90%; max-width: 400px; margin: 20px auto; 
            background: #1a1a1a; border: 2px solid var(--main-gold); 
            border-radius: 15px; overflow: hidden; position: relative;
        }
        .cover-photo { 
            width: 100%; height: 120px; background: #333; 
            background-size: cover; background-position: center; 
            border-bottom: 2px solid var(--main-gold);
        }
        .avatar-photo { 
            width: 80px; height: 80px; border-radius: 50%; 
            border: 3px solid var(--main-gold); position: absolute; 
            top: 80px; left: 20px; background: #222; 
            background-size: cover; z-index: 10;
        }
        .profile-info { padding: 50px 20px 15px; text-align: left; }
        .profile-info h3 { margin: 0; color: gold; font-size: 20px; }
        .profile-info p { margin: 5px 0; color: #aaa; font-size: 14px; }

        /* Ø§Ù„Ø´Ø§Øª */
        #chat-screen { height: 40vh; overflow-y: auto; background: rgba(0,0,0,0.8); border: 2px solid var(--main-gold); margin: 10px auto; width: 90%; padding: 15px; border-radius: 15px; text-align: left; }
        .msg { margin-bottom: 10px; border-bottom: 1px solid #222; padding: 8px; }

        /* Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… */
        #admin-panel { position: fixed; top: 70px; right: 10px; width: 180px; background: #000; border: 1px solid gold; padding: 10px; border-radius: 10px; display: none; z-index: 100; }
        .admin-btn { width: 100%; margin: 5px 0; padding: 5px; background: gold; color: #000; font-weight: bold; border: none; cursor: pointer; font-size: 12px; }

        #input-area { position: fixed; bottom: 15px; width: 100%; display: flex; justify-content: center; gap: 10px; }
        input#chat-input { width: 65%; padding: 12px; border-radius: 25px; border: 2px solid var(--main-gold); background: #111; color: #fff; outline: none; }
        .send-btn { padding: 10px 25px; border-radius: 25px; background: var(--main-gold); color: #000; font-weight: bold; border: none; cursor: pointer; }
    </style>
</head>
<body>

    <div id="royal-header" onclick="toggleAdmin()">ğŸ‘‘ Ù…Ù…Ù„ÙƒØ© Ø¹Ù„ÙˆØ´: Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ù…Ù„ÙƒÙŠØ©</div>

    <div id="profile-section">
        <div id="cover-img" class="cover-photo" style="background-image: url('https://via.placeholder.com/400x120/d4af37/000000?text=Alloush+Kingdom');"></div>
        <div id="avatar-img" class="avatar-photo" style="background-image: url('https://via.placeholder.com/80/gold/black?text=ğŸ‘‘');"></div>
        
        <div class="profile-info">
            <h3 id="display-name">Ø§Ù„Ù…Ù„Ùƒ Ø¹Ù„ÙˆØ´</h3>
            <p id="display-rank">Ø§Ù„Ø­Ø§ÙƒÙ… Ø§Ù„Ù…Ø·Ù„Ù‚ Ù„Ù„Ù…Ù…Ù„ÙƒØ©</p>
        </div>
    </div>

    <div id="admin-panel">
        <p style="font-size:12px; margin:0;">âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ù„Ùƒ</p>
        <button class="admin-btn" onclick="updatePhotos()">ØªØºÙŠÙŠØ± Ø§Ù„ØµÙˆØ±</button>
        <button class="admin-btn" onclick="clearAll()">ØªØµÙÙŠØ± Ø§Ù„Ø´Ø§Øª</button>
        <button class="admin-btn" onclick="toggleAdmin()">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>

    <div id="chat-screen"></div>
    
    <div id="input-area">
        <input id="chat-input" type="text" placeholder="Ø§ÙƒØªØ¨ Ù…Ø±Ø³ÙˆÙ…Ùƒ Ø§Ù„Ù…Ù„ÙƒÙŠ...">
        <button class="send-btn" onclick="sendMsg()">Ø¥Ø±Ø³Ø§Ù„ âœ¨</button>
    </div>

    <script>
        const firebaseConfig = { databaseURL: "https://alloush-kingdom-default-rtdb.firebaseio.com" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // ØªÙØ¹ÙŠÙ„ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø¯ÙˆÙ† Ø£Ø³Ø¦Ù„Ø© ÙƒØ«ÙŠØ±Ø© (ÙÙ‚Ø· Ø¨Ø¶ØºØ·Ø©)
        function toggleAdmin() {
            let panel = document.getElementById('admin-panel');
            panel.style.display = panel.style.display === "none" ? "block" : "none";
        }

        // ØªØºÙŠÙŠØ± ØµÙˆØ± Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
        function updatePhotos() {
            let cover = prompt("Ø¶Ø¹ Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø±Ø¨Ø¹Ø© (Ø§Ù„ØºÙ„Ø§Ù):");
            let avatar = prompt("Ø¶Ø¹ Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…ØµØºØ±Ø© (Ø§Ù„Ø±Ù…Ø²ÙŠØ©):");
            if(cover) {
                document.getElementById('cover-img').style.backgroundImage = `url('${cover}')`;
                localStorage.setItem('alloush_cover', cover);
            }
            if(avatar) {
                document.getElementById('avatar-img').style.backgroundImage = `url('${avatar}')`;
                localStorage.setItem('alloush_avatar', avatar);
            }
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¯Ø®ÙˆÙ„
        window.onload = function() {
            let savedCover = localStorage.getItem('alloush_cover');
            let savedAvatar = localStorage.getItem('alloush_avatar');
            if(savedCover) document.getElementById('cover-img').style.backgroundImage = `url('${savedCover}')`;
            if(savedAvatar) document.getElementById('avatar-img').style.backgroundImage = `url('${savedAvatar}')`;
        };

        function sendMsg() {
            let input = document.getElementById('chat-input');
            if(input.value.trim() !== "") {
                db.ref("messages").push().set({ user: "ğŸ‘‘ Ø¹Ù„ÙˆØ´", text: input.value });
                input.value = "";
            }
        }

        db.ref("messages").limitToLast(15).on("child_added", (snapshot) => {
            let msg = snapshot.val();
            document.getElementById('chat-screen').innerHTML += `
                <div class="msg"><b style="color:gold;">${msg.user}:</b> <span style="color:white;">${msg.text}</span></div>`;
            document.getElementById('chat-screen').scrollTop = document.getElementById('chat-screen').scrollHeight;
        });

        function clearAll() { if(confirm("Ù…Ø³Ø­ Ø§Ù„Ø´Ø§ØªØŸ")) db.ref("messages").remove(); location.reload(); }
    </script>
</body>
</html>
