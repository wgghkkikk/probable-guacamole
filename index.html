<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <style>
        :root { --gold: #ffd700; }
        body { background: #000; color: white; font-family: sans-serif; overflow: hidden; margin: 0; }

        /* 1. Ø§Ù„Ø£Ø¬Ù†Ø­Ø© (ØªÙ†Ø³Ø¯ ÙˆØªÙ†ÙØªØ­ ÙØ¹Ù„ÙŠØ§Ù‹) */
        .side-panel {
            position: fixed; top: 70px; width: 230px; height: 75%;
            background: rgba(0,0,0,0.95); border: 2px solid var(--gold);
            transition: 0.5s ease-in-out; z-index: 2000; border-radius: 15px;
            box-shadow: 0 0 20px purple;
        }
        #users-panel { right: 10px; }
        #settings-panel { left: 10px; }
        .panel-hidden { transform: scaleX(0); opacity: 0; pointer-events: none; }

        /* 2. Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù„ÙƒÙŠ ÙˆØ§Ù„Ø²Ø± Ø§Ù„Ù…Ù‚Ù„ÙˆØ¨ */
        .royal-bar {
            position: fixed; bottom: 15px; left: 50%; transform: translateX(-50%);
            width: 90%; display: flex; flex-direction: row-reverse;
            background: #1a1a1a; border: 2px solid var(--gold); border-radius: 50px;
            padding: 8px 15px; z-index: 3000; align-items: center;
        }
        #send-btn {
            background: red; color: white; border: 2px solid var(--gold);
            border-radius: 30px; padding: 12px 25px; cursor: pointer;
            font-weight: bold; font-size: 18px; direction: rtl;
        }

        /* 3. Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø¢Ù„Ø§Ù Ø§Ù„Ù…Ø¤Ù„ÙØ© (ØªØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ù…Ù†ØªØµÙ) */
        #mega-palace {
            position: fixed; top: 45%; left: 50%; transform: translate(-50%, -50%);
            width: 85%; height: 60%; background: #000; border: 4px double var(--gold);
            display: none; grid-template-columns: repeat(auto-fill, minmax(45px, 1fr));
            overflow-y: auto; padding: 20px; z-index: 10000; border-radius: 20px;
        }
        .item { font-size: 30px; cursor: pointer; padding: 5px; text-align: center; }
        
        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø£Ø¬Ù†Ø­Ø© */
        .toggle-btn {
            position: fixed; top: 20px; z-index: 4000;
            background: #222; color: var(--gold); border: 1px solid var(--gold);
            padding: 8px 15px; cursor: pointer; border-radius: 10px;
        }
    </style>
</head>
<body onload="initKingdom()">

    <button class="toggle-btn" style="right: 20px;" onclick="togglePanel('users-panel')">â˜° Ø§Ù„Ø±Ø¹ÙŠØ©</button>
    <button class="toggle-btn" style="left: 20px;" onclick="togglePanel('settings-panel')">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>

    <div id="users-panel" class="side-panel">
        <div style="color:var(--gold); text-align:center; padding:10px; border-bottom: 1px solid gold;">
            ğŸ‘¥ Ø§Ù„Ø±Ø¹ÙŠØ©: <span id="online-count">0</span>
        </div>
        <div id="user-list" style="padding: 10px;"></div>
    </div>

    <div id="settings-panel" class="side-panel">
        <div style="color:var(--gold); text-align:center; padding:10px;">âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ù…Ù„ÙƒØ©</div>
        <button style="width:90%; margin:5%; padding:10px; background:white; color:black;">Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ù„ÙƒÙŠ ğŸ›¡ï¸</button>
    </div>

    <div id="mega-palace"></div>

    <div class="royal-bar">
        <button id="send-btn" onclick="sendArt()">Ø¥Ø±Ø³Ø§Ù„ âŸ¸</button>
        <input type="text" id="msg-in" style="flex:1; background:none; border:none; color:white; padding:10px; text-align:right;" placeholder="Ù€ï®©ï®©Ù¨ï®©ï®©ğŸ‘‘ Ù…Ø±Ø³ÙˆÙ… Ø§Ù„Ù…Ù„Ùƒ Ø¹Ù„ÙˆØ´ ğŸ‘‘ï®©ï®©Ù¨ï®©ï®©Ù€">
        <span onclick="toggleMega()" style="cursor:pointer; font-size:30px; margin-right:10px;">ğŸ˜Š</span>
    </div>

    <script>
        // 1. ØªÙØ¹ÙŠÙ„ Ø­Ø±ÙƒØ© Ø§Ù„Ø£Ø¬Ù†Ø­Ø© (ØªÙ†Ø³Ø¯ ÙˆØªÙ†ÙØªØ­)
        function togglePanel(id) {
            document.getElementById(id).classList.toggle('panel-hidden');
        }

        // 2. ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¢Ù„Ø§Ù Ø§Ù„Ù…Ø¤Ù„ÙØ© (Ø¨Ø­Ø± Ù…Ù† Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠØ§Øª ÙˆØ§Ù„Ø²Ø®Ø§Ø±Ù)
        function toggleMega() {
            const p = document.getElementById('mega-palace');
            if(p.innerHTML === "") {
                let s = "";
                // ØªÙˆÙ„ÙŠØ¯ Ø¢Ù„Ø§Ù Ø§Ù„Ø±Ù…ÙˆØ²
                for(let i=0x1F600; i<0x1F64F; i++) s += `<div class="item" onclick="add('${String.fromCodePoint(i)}')">${String.fromCodePoint(i)}</div>`;
                // Ø¥Ø¶Ø§ÙØ© Ø²Ø®Ø§Ø±Ù Ø§Ù„Ù„Ø§ÙˆØ§Øª ÙˆØ§Ù„Ù†Ø¬ÙˆÙ…
                const dec = ["ğ“†©", "ğ“†ª", "å", "äº—", "ê§‚", "ê§", "ğŸ”¥", "ğŸ’", "âš”ï¸", "ğŸ‘‘"];
                dec.forEach(d => s += `<div class="item" onclick="add('${d}')" style="color:gold;">${d}</div>`);
                p.innerHTML = s;
            }
            p.style.display = (p.style.display === 'none' ? 'grid' : 'none');
        }

        function add(v) { document.getElementById('msg-in').value += v; }

        // 3. ØªÙØ¹ÙŠÙ„ Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù„ÙƒÙŠ
        function sendArt() {
            const val = document.getElementById('msg-in').value;
            if(val) {
                alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ù…Ø±Ø³ÙˆÙ… Ù…Ø²Ø®Ø±Ù: ê§ " + val + " ê§‚");
                document.getElementById('msg-in').value = "";
            }
        }
    </script>
</body>
</html>
