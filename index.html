function initKingdom() {
    const name = document.getElementById('my-name').value;
    db.ref("activity_log").push().set({ user: name, time: new Date().toLocaleString('ar-EG') });
    
    const eList = document.getElementById('emoji-list');
    eList.innerHTML = ""; // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø³Ø±Ø¹Ø©

    // 1. Ù‚Ø³Ù… Ø§Ù„Ù…Ù„ØµÙ‚Ø§Øª Ø§Ù„Ù…Ù„ÙƒÙŠØ© (Ø­Ø±ÙƒØ© Ù†Ø¨Ø¶ + ØªØ£Ø«ÙŠØ± Ù†Ø§Ø± Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ·)
    const fireStickers = ["ğŸ‘‘", "ğŸ”¥", "ğŸ’", "âœ¨", "ğŸŒŸ", "ğŸš€", "âš”ï¸", "ğŸ›¡ï¸", "ğŸ§¿", "ğŸ’°"];
    fireStickers.forEach(stk => {
        let s = document.createElement('span');
        s.className = 'emoji-item';
        s.style.fontSize = "40px"; // Ø­Ø¬Ù… ÙƒØ¨ÙŠØ± Ù„Ù„Ù…Ù„ØµÙ‚Ø§Øª
        s.style.display = "inline-block";
        s.style.animation = "pulse 1.5s infinite"; // Ø­Ø±ÙƒØ© Ø§Ù„Ù†Ø¨Ø¶ Ø§Ù„Ù…Ø³ØªÙ…Ø±Ø©
        s.style.filter = "drop-shadow(0 0 8px gold)"; // Ù„Ù…Ø¹Ø© Ø°Ù‡Ø¨ÙŠØ©
        s.innerText = stk;
        s.onclick = () => { 
            document.getElementById('msg-in').value += stk;
            makeItRain(); // ØªØ´ØºÙŠÙ„ Ù…Ø·Ø± Ø§Ù„Ù†Ø§Ø± Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ·
        };
        eList.appendChild(s);
    });

    // 2. Ø¥Ø¶Ø§ÙØ© Ø¢Ù„Ø§Ù Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠØ§Øª Ø§Ù„Ø¹Ø§Ø¯ÙŠØ© (Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©)
    const ranges = [
        [0x1F600, 0x1F64F], // Ø§Ù„ÙˆØ¬ÙˆÙ‡
        [0x1F300, 0x1F5FF], // Ø§Ù„Ø±Ù…ÙˆØ²
        [0x1F680, 0x1F6FF], // Ø§Ù„Ù…ÙˆØ§ØµÙ„Ø§Øª
        [0x1F900, 0x1F9FF], // Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª Ø§Ù„Ø­Ø¯ÙŠØ«Ø©
        [0x1F1E6, 0x1F1FF]  // Ø§Ù„Ø£Ø¹Ù„Ø§Ù…
    ];

    ranges.forEach(range => {
        for (let i = range[0]; i <= range[1]; i++) {
            let s = document.createElement('span');
            s.className = 'emoji-item';
            s.innerText = String.fromCodePoint(i); // ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯ Ø¥Ù„Ù‰ Ø¥ÙŠÙ…ÙˆØ¬ÙŠ
            s.onclick = () => { document.getElementById('msg-in').value += s.innerText; }; // Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù†Øµ
            eList.appendChild(s);
        }
    });
}

// Ø¯Ø§Ù„Ø© Ù…Ø·Ø± Ø§Ù„Ù†Ø§Ø± Ø§Ù„Ù…Ù„ÙƒÙŠ
function makeItRain() {
    for (let i = 0; i < 20; i++) {
        const fire = document.createElement('div');
        fire.innerText = "ğŸ”¥";
        fire.style.position = 'fixed';
        fire.style.left = Math.random() * 100 + 'vw';
        fire.style.top = '-50px';
        fire.style.fontSize = Math.random() * 20 + 20 + 'px';
        fire.style.zIndex = '9999';
        fire.style.transition = 'transform 2s linear, opacity 2s';
        document.body.appendChild(fire);
        
        setTimeout(() => {
            fire.style.transform = `translateY(${window.innerHeight + 100}px) rotate(${Math.random() * 360}deg)`;
            fire.style.opacity = '0';
        }, 100);
        
        setTimeout(() => fire.remove(), 2500);
    }
}
