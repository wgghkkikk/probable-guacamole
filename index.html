<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø´Ø§Øª Ø§Ù„Ø¨Ø±Ù†Ø³ | Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø·Ù„Ù‚</title>
    <style>
        :root { --main-color: #00ffcc; --admin-red: #ff3e3e; --bg-dark: #0a0a0c; --panel-bg: #141417; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; }
        
        body { background: var(--bg-dark); color: #fff; height: 100vh; display: flex; overflow: hidden; }

        /* --- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© Ø§Ù„Ù…Ø¨ØªÙƒØ±Ø© --- */
        #sideMenu { 
            width: 300px; background: var(--panel-bg); border-left: 2px solid #222;
            transition: 0.5s cubic-bezier(0.7, 0, 0.3, 1); display: flex; flex-direction: column;
        }
        #sideMenu.closed { margin-right: -300px; }

        /* --- Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© --- */
        .app-content { flex: 1; display: flex; flex-direction: column; position: relative; }

        header { 
            height: 65px; background: rgba(0,0,0,0.8); backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--main-color); display: flex; justify-content: space-between; align-items: center; padding: 0 20px;
        }

        #chatDisplay { 
            flex: 1; padding: 25px; overflow-y: auto; 
            background: linear-gradient(rgba(10,10,12,0.9), rgba(10,10,12,0.9)), url('https://www.transparenttextures.com/patterns/carbon-fibre.png');
        }

        /* --- ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ù„ÙƒÙŠ --- */
        .msg-frame { display: flex; gap: 15px; margin-bottom: 25px; animation: slideUp 0.4s ease; }
        .u-img { width: 55px; height: 55px; border-radius: 50%; border: 2px solid var(--main-color); padding: 2px; box-shadow: 0 0 15px var(--main-color); }
        .u-bubble { background: #1c1c21; padding: 15px; border-radius: 0 20px 20px 20px; border-right: 4px solid var(--admin-red); position: relative; flex: 1; }
        .u-name { font-weight: bold; color: var(--admin-red); font-size: 14px; margin-bottom: 5px; display: flex; justify-content: space-between; }
        .u-sig { font-size: 11px; color: var(--main-color); margin-top: 10px; border-top: 1px solid #333; padding-top: 5px; font-style: italic; }

        /* --- Ù…Ø´ØºÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø°ÙƒÙŠ --- */
        #playerWrap {
            position: absolute; top: 80px; left: 20px; width: 350px; background: #000;
            border: 1px solid var(--main-color); border-radius: 12px; display: none; z-index: 1000;
            box-shadow: 0 20px 50px rgba(0,0,0,0.9);
        }
        .vid-nav { background: #1a1a1a; padding: 8px 15px; display: flex; justify-content: space-between; font-size: 12px; cursor: move; }
        .vid-nav span { cursor: pointer; font-weight: bold; }
        #vidFrame { height: 200px; }
        #playerWrap.minimized { height: 40px; width: 150px; }
        #playerWrap.minimized #vidFrame { display: none; }

        /* --- Ø´Ø±ÙŠØ· Ø§Ù„ØºØ±Ù --- */
        .rooms-track { display: flex; gap: 10px; padding: 12px; background: #0f0f12; border-bottom: 1px solid #222; }
        .room-tab { background: #1c1c21; padding: 6px 18px; border-radius: 50px; font-size: 12px; cursor: pointer; border: 1px solid #333; transition: 0.3s; }
        .room-tab.active { border-color: var(--main-color); color: var(--main-color); box-shadow: 0 0 10px var(--main-color); }

        /* --- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ÙƒØªØ§Ø¨Ø© --- */
        .input-bar { padding: 20px; background: #141417; display: flex; gap: 15px; border-top: 1px solid #222; }
        #mainInput { flex: 1; padding: 15px; background: #000; border: 1px solid #333; color: #fff; border-radius: 12px; outline: none; transition: 0.3s; }
        #mainInput:focus { border-color: var(--main-color); }
        .btn-send { background: var(--main-color); color: #000; border: none; width: 55px; height: 55px; border-radius: 12px; cursor: pointer; font-weight: bold; }

        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div id="sideMenu">
        <div style="padding: 30px; text-align: center; border-bottom: 1px solid #222;">
            <img id="profileImg" src="https://cdn-icons-png.flaticon.com/512/149/149452.png" style="width: 100px; height: 100px; border-radius: 50%; border: 3px solid var(--main-color);">
            <h3 id="masterName" style="margin-top: 15px; color: var(--admin-red);">Ø³Ù„Ø·Ø§Ù† Ø§Ù„Ø´Ø§Øª</h3>
            <p id="masterStatus" style="font-size: 12px; color: #00ff00;">â— Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù†</p>
        </div>
        
        <div style="padding: 20px; flex: 1; overflow-y: auto;">
            <label style="font-size: 11px; color: #666;">Ø¥Ø¹Ø¯Ø§Ø¯Ø§ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ©</label>
            <input type="file" id="changeImg" style="font-size: 10px; margin: 10px 0;">
            <input type="text" id="sigInp" placeholder="ØªÙˆÙ‚ÙŠØ¹Ùƒ (Ù…Ø«Ø§Ù„: Ù…Ù†ÙˆØ±ÙŠÙ† Ø­Ø¨Ø§ÙŠØ¨)" style="width:100%; padding:8px; background:#000; border:1px solid #333; color:#fff; border-radius:5px; margin-bottom:15px;">
            
            <label style="font-size: 11px; color: #666;">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØºØ±Ù</label>
            <button onclick="createNewRoom()" style="width:100%; padding:10px; background:var(--main-color); border:none; border-radius:5px; cursor:pointer; font-weight:bold; margin-top:5px;">â• Ø¥Ø¶Ø§ÙØ© ØºØ±ÙØ© Ø¬Ø¯ÙŠØ¯Ø©</button>
            <button onclick="document.getElementById('chatDisplay').innerHTML=''" style="width:100%; padding:10px; background:#333; color:red; border:none; border-radius:5px; cursor:pointer; margin-top:10px;">ğŸ§¹ ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø´Ø§Øª</button>
        </div>
    </div>

    <div class="app-content">
        <header>
            <div onclick="toggleSide()" style="cursor:pointer; font-size: 24px; color: var(--main-color);">â˜°</div>
            <h2 style="font-weight: 200; letter-spacing: 5px;">PRINCE <span style="font-weight: 900; color:var(--main-color);">CHAT</span></h2>
            <div style="width: 40px;"></div>
        </header>

        <div class="rooms-track" id="roomsBox">
            <div class="room-tab active">ØºØ±ÙØ© Ø§Ù„Ù…Ø§Ø³ØªØ±</div>
        </div>

        <div id="chatDisplay">
            <div style="text-align: center; color: #444; margin-top: 50px;">--- Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´ÙÙŠØ± Ù…ÙØ¹Ù„ | Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ Ù…Ø¯ÙŠØ± ---</div>
        </div>

        <div id="playerWrap">
            <div class="vid-nav">
                <span style="color:var(--main-color);">ğŸ“º Ø¨Ø« Ù…Ø¨Ø§Ø´Ø±</span>
                <div>
                    <span onclick="toggleMin()" style="margin-right:15px;">-</span>
                    <span onclick="closeVid()" style="color:red;">X</span>
                </div>
            </div>
            <div id="vidFrame"></div>
        </div>

        <div class="input-bar">
            <input type="text" id="mainInput" placeholder="Ø£Ø±Ø³Ù„ Ø±Ø³Ø§Ù„Ø© Ø£Ùˆ Ø±Ø§Ø¨Ø· ÙŠÙˆØªÙŠÙˆØ¨...">
            <button class="btn-send" onclick="broadcastMsg()">â–¶</button>
        </div>
    </div>

    <script>
        let myData = { name: "Ø§Ù„Ø¨Ø±Ù†Ø³", photo: "https://cdn-icons-png.flaticon.com/512/149/149452.png", sig: "Ø¥Ø¯Ø§Ø±Ø© Ø´Ø§Øª Ø§Ù„Ø¨Ø±Ù†Ø³" };

        function toggleSide() { document.getElementById('sideMenu').classList.toggle('closed'); }

        function broadcastMsg() {
            const inp = document.getElementById('mainInput');
            const box = document.getElementById('chatDisplay');
            if(!inp.value.trim()) return;

            // ÙƒØ´Ù ÙŠÙˆØªÙŠÙˆØ¨
            if(inp.value.includes('youtube.com') || inp.value.includes('youtu.be')) {
                const vidId = inp.value.split('v=')[1] || inp.value.split('/').pop();
                document.getElementById('playerWrap').style.display = 'block';
                document.getElementById('vidFrame').innerHTML = `<iframe width="100%" height="100%" src="https://www.youtube.com/embed/${vidId.split('&')[0]}?autoplay=1" frameborder="0" allowfullscreen></iframe>`;
                inp.value = ''; return;
            }

            const currentSig = document.getElementById('sigInp').value || myData.sig;
            const msgHtml = `
                <div class="msg-frame">
                    <img src="${myData.photo}" class="u-img">
                    <div class="u-bubble">
                        <div class="u-name">${myData.name} <span>(Ù…Ø§Ø³ØªØ±)</span></div>
                        <div class="u-text">${inp.value}</div>
                        <div class="u-sig">âœï¸ ${currentSig}</div>
                    </div>
                </div>`;
            box.innerHTML += msgHtml;
            inp.value = '';
            box.scrollTop = box.scrollHeight;
        }

        function createNewRoom() {
            const r = prompt("Ù…Ø§ Ù‡Ùˆ Ø§Ø³Ù… Ø§Ù„ØºØ±ÙØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©ØŸ");
            if(r) {
                const tab = document.createElement('div');
                tab.className = 'room-tab';
                tab.innerText = r;
                tab.onclick = function() {
                    document.querySelectorAll('.room-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                };
                document.getElementById('roomsBox').appendChild(tab);
            }
        }

        function toggleMin() { document.getElementById('playerWrap').classList.toggle('minimized'); }
        function closeVid() { document.getElementById('playerWrap').style.display = 'none'; document.getElementById('vidFrame').innerHTML=''; }

        document.getElementById('changeImg').onchange = function(e) {
            const reader = new FileReader();
            reader.onload = function() {
                myData.photo = reader.result;
                document.getElementById('profileImg').src = reader.result;
            };
            reader.readAsDataURL(e.target.files[0]);
        };

        document.getElementById('mainInput').onkeypress = (e) => { if(e.key === 'Enter') broadcastMsg(); };
    </script>
</body>
</html>
