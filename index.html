function initKingdom() {
    const name = document.getElementById('my-name').value;
    db.ref("activity_log").push().set({ user: name, time: new Date().toLocaleString('ar-EG') });
    
    // --- محرك الإيموجيات العملاق (الآلاف المؤلفة) ---
    const eList = document.getElementById('emoji-list');
    
    // نطاقات الإيموجيات العالمية (وجوه، حيوانات، طعام، رياضة، رموز، أعلام)
    const ranges = [
        [0x1F600, 0x1F64F], // الوجوه (Smileys)
        [0x1F680, 0x1F6C5], // المواصلات (Transport)
        [0x1F300, 0x1F5FF], // أشياء ورموز (Misc Symbols)
        [0x1F900, 0x1F9FF], // إضافات حديثة (Supplemental)
        [0x2600, 0x26FF],   // رموز منوعة (Signs)
        [0x1F1E6, 0x1F1FF]  // الأعلام (Flags)
    ];

    ranges.forEach(range => {
        for(let i = range[0]; i <= range[1]; i++) {
            let s = document.createElement('span');
            s.className = 'emoji-item';
            s.innerText = String.fromCodePoint(i);
            s.onclick = () => { document.getElementById('msg-in').value += s.innerText; };
            eList.appendChild(s);
        }
    });
}
