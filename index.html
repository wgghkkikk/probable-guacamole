<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù…Ù…Ù„ÙƒØ© Ø¹Ù„ÙˆØ´ ğŸ‘‘</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        body { background: #000; color: #ffd700; font-family: sans-serif; display: flex; justify-content: center; padding: 20px; }
        .box { background: #111; padding: 20px; border-radius: 15px; border: 2px solid #ffd700; width: 100%; max-width: 450px; box-shadow: 0 0 20px #ffd70033; }
        #msg-box { height: 400px; overflow-y: auto; background: #0a0a0a; border-radius: 10px; padding: 10px; border: 1px solid #222; margin-bottom: 10px; }
        .msg { margin-bottom: 12px; padding: 8px; border-radius: 8px; background: #1a1a1a; }
        .admin-msg { border-right: 4px solid #ffd700; }
        input { width: 80%; padding: 12px; border-radius: 8px; border: 1px solid #333; background: #222; color: #fff; }
        .btn { padding: 12px 20px; background: #ffd700; color: #000; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; }
        .admin-panel { display: none; background: #ffd700; color: #000; padding: 10px; border-radius: 8px; margin-top: 10px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>

    <div id="chat-screen" class="box">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <h3 style="margin:0">ØºØ±ÙØ© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© ğŸ‘‘</h3>
            <div id="admin-tag" class="admin-panel" onclick="alert('Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ± Ø¹Ù„ÙˆØ´ ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…')">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… âš™ï¸</div>
        </div>
        
        <div id="msg-box"></div>
        
        <div style="display: flex; gap: 5px;">
            <input type="text" id="m-text" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ ÙŠØ§ Ù…Ù„Ùƒ...">
            <button class="btn" onclick="send()">Ø¥Ø±Ø³Ø§Ù„</button>
        </div>
        <button onclick="firebase.auth().signOut()" style="background:none; border:none; color:red; margin-top:15px; cursor:pointer;">Ø®Ø±ÙˆØ¬ Ù…Ù† Ø§Ù„Ù…Ù…Ù„ÙƒØ©</button>
    </div>

<script>
    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§ØªÙƒ Ø§Ù„Ø±Ø³Ù…ÙŠØ©
    const config = {
        apiKey: "AIzaSyDpjqkb4U-RF71r_Zv3tHAV9wWWe2L3nEQ", 
        authDomain: "masterchat-f2da9.firebaseapp.com",
        databaseURL: "https://masterchat-f2da9-default-rtdb.firebaseio.com",
        projectId: "masterchat-f2da9"
    };
    firebase.initializeApp(config);

    const auth = firebase.auth();
    const db = firebase.database();

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±
    auth.onAuthStateChanged(user => {
        if (user) {
            // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ù‡Ùˆ Ø¥ÙŠÙ…ÙŠÙ„ÙƒØŒ ØªØ¸Ù‡Ø± Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
            if(user.email === "rgrghh77@gmail.com") {
                document.getElementById('admin-tag').style.display = 'block';
            }
            load();
        } else {
            window.location.href = "index.html"; // Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ø°Ø§ Ø®Ø±Ø¬
        }
    });

    function send() {
        const t = document.getElementById('m-text').value;
        const user = auth.currentUser;
        if(t) {
            db.ref('msgs').push({
                u: user.email.split('@')[0],
                t: t,
                isAdmin: user.email === "rgrghh77@gmail.com",
                time: Date.now()
            });
            document.getElementById('m-text').value = '';
        }
    }

    function load() {
        const box = document.getElementById('msg-box');
        db.ref('msgs').limitToLast(50).on('child_added', snap => {
            const d = snap.val();
            const isAdmin = d.isAdmin ? "ğŸ‘‘ " : "";
            const adminClass = d.isAdmin ? "admin-msg" : "";
            
            box.innerHTML += `
                <div class="msg ${adminClass}">
                    <span style="color:gold; font-size:12px;">${isAdmin}@${d.u}</span><br>
                    <span style="color:white">${d.t || ""}</span>
                </div>`;
            box.scrollTop = box.scrollHeight;
        });
    }
</script>
</body>
</html>
