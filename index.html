<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø´Ø§Øª Ø§Ù„Ø¨Ø±Ù†Ø³ | Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø§Ø³ØªØ± Ø¨Ø§Ù„ØµÙˆØ±</title>
    <style>
        :root { --gold: #ff9800; --bg: #0b0b0b; --panel: #1a1a1a; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Tahoma', sans-serif; }
        body { background: var(--bg); color: #fff; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }

        /* --- Ø´Ø§Ø´Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ --- */
        #login-screen { position: fixed; inset: 0; background: #000; z-index: 2000; display: flex; justify-content: center; align-items: center; }
        .login-box { background: var(--panel); padding: 40px; border-radius: 15px; border: 2px solid var(--gold); text-align: center; width: 350px; }
        .login-box input { width: 100%; padding: 12px; margin: 20px 0; background: #000; border: 1px solid #444; color: var(--gold); border-radius: 5px; text-align: center; }

        /* --- Ø§Ù„Ù‡ÙŠØ¯Ø± --- */
        header { background: #000; padding: 10px 20px; border-bottom: 2px solid var(--gold); display: flex; justify-content: space-between; align-items: center; }
        
        .main-app { display: flex; flex: 1; overflow: hidden; }

        /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† (ÙŠÙ…ÙŠÙ†) */
        .sidebar { width: 260px; background: var(--panel); border-left: 1px solid #333; display: flex; flex-direction: column; }
        .user-card { padding: 15px; border-bottom: 1px solid #222; display: flex; align-items: center; cursor: pointer; }
        .user-card img { width: 35px; height: 35px; border-radius: 50%; margin-left: 10px; border: 1px solid var(--gold); object-fit: cover; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø´Ø§Øª ÙˆØ§Ù„Ø±Ø³Ø§Ø¦Ù„ */
        .chat-view { flex: 1; display: flex; flex-direction: column; background: #050505; }
        #chat-box { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; }
        
        .join-msg { background: rgba(255, 152, 0, 0.1); color: var(--gold); padding: 10px; text-align: center; border-radius: 10px; font-weight: bold; border: 1px dashed var(--gold); }

        /* Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù…Ø¹ Ø§Ù„ØµÙˆØ±Ø© */
        .msg-container { display: flex; align-items: flex-start; gap: 10px; animation: fadeIn 0.3s ease; }
        .msg-avatar { width: 40px; height: 40px; border-radius: 50%; border: 1px solid var(--gold); object-fit: cover; }
        .msg-content { background: #1a1a1a; padding: 10px 15px; border-radius: 15px; border-bottom-right-radius: 2px; max-width: 70%; }
        .msg-header { font-size: 12px; font-weight: bold; color: red; margin-bottom: 5px; display: block; }
        .msg-text { color: #00ff00; font-size: 14px; line-height: 1.4; word-break: break-all; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* --- Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ --- */
        .profile-modal { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #222; border: 2px solid var(--gold); width: 320px; padding: 25px; border-radius: 15px; display: none; z-index: 3000; text-align: center; }
        .profile-modal img { width: 100px; height: 100px; border-radius: 50%; border: 3px solid var(--gold); margin-bottom: 15px; object-fit: cover; }
        .upload-btn { background: var(--gold); color: #000; padding: 8px 15px; border-radius: 5px; cursor: pointer; font-size: 12px; display: inline-block; margin-bottom: 15px; font-weight: bold; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ÙƒØªØ§Ø¨Ø© */
        .input-area { padding: 15px; background: #111; border-top: 1px solid #333; display: flex; gap: 10px; }
        #msgInput { flex: 1; padding: 12px; background: #000; border: 1px solid #444; color: #fff; border-radius: 5px; outline: none; }
        .btn-send { background: var(--gold); border: none; padding: 0 25px; border-radius: 5px; font-weight: bold; cursor: pointer; }

    </style>
</head>
<body>

    <div id="login-screen">
        <div class="login-box">
            <h2 style="color:var(--gold); margin-bottom:10px;">Ø´Ø§Øª Ø§Ù„Ø¨Ø±Ù†Ø³</h2>
            <p style="color:#888; font-size:12px;">Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø§Ø³ØªØ±</p>
            <input type="text" id="userNameInput" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„Ø´Ø®ØµÙŠ">
            <button class="btn-send" style="width:100%; height:45px;" onclick="initChat()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø´Ø§Øª</button>
        </div>
    </div>

    <header>
        <div style="color:var(--gold); font-weight:bold;">ğŸ‘‘ ÙƒÙ†ØªØ±ÙˆÙ„ Ø§Ù„Ù…Ø§Ø³ØªØ±</div>
        <div onclick="toggleProfile()" style="cursor:pointer">ğŸ‘¤ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ù„ÙÙŠ</div>
    </header>

    <div class="main-app">
        <div class="sidebar">
            <div style="padding:10px; background:#222; text-align:center; font-size:12px; color:var(--gold)">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØªÙˆØ§Ø¬Ø¯ÙŠÙ†</div>
            <div class="user-card" onclick="toggleProfile()">
                <img id="side-avatar" src="https://cdn-icons-png.flaticon.com/512/149/149071.png">
                <div>
                    <div id="side-name" style="font-weight:bold; color:red;">Ø§Ù„Ù…Ø¯ÙŠØ±</div>
                    <div style="font-size:10px; color:#00ff00;">Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù†</div>
                </div>
            </div>
        </div>

        <div class="chat-view">
            <div id="chat-box"></div>
            <div class="input-area">
                <input type="text" id="msgInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ø§Ù„Ù‚ÙŠØ§Ø¯ÙŠØ© Ù‡Ù†Ø§...">
                <button class="btn-send" onclick="sendMessage()">Ø¥Ø±Ø³Ø§Ù„</button>
            </div>
        </div>
    </div>

    <div id="profileModal" class="profile-modal">
        <h3 style="color:var(--gold); margin-bottom:15px;">Ù…Ù„ÙÙƒ Ø§Ù„Ø´Ø®ØµÙŠ</h3>
        <img id="profile-img-preview" src="https://cdn-icons-png.flaticon.com/512/149/149071.png">
        <br>
        <label class="upload-btn">
            ğŸ“ Ø§Ø®ØªØ± ØµÙˆØ±Ø© Ù…Ù† Ø¬Ù‡Ø§Ø²Ùƒ
            <input type="file" id="imageUpload" hidden accept="image/*">
        </label>
        <div id="display-name" style="font-weight:bold; font-size:18px; margin-bottom:5px;">Ø§Ù„Ø§Ø³Ù…</div>
        <p style="color:red; font-size:12px; margin-bottom:20px;">Ø§Ù„Ø±ØªØ¨Ø©: ØµØ§Ø­Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹</p>
        <button class="btn-send" style="width:100%;" onclick="toggleProfile()">Ø­ÙØ¸ ÙˆØ¥ØºÙ„Ø§Ù‚</button>
    </div>

    <script>
        let myName = "";
        let myPhoto = "https://cdn-icons-png.flaticon.com/512/149/149071.png";

        function initChat() {
            const nameInp = document.getElementById('userNameInput').value;
            if(!nameInp.trim()) return alert("ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø§Ø³Ù…");
            
            myName = nameInp;
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('display-name').innerText = myName;
            document.getElementById('side-name').innerText = myName;

            const chatBox = document.getElementById('chat-box');
            chatBox.innerHTML += `<div class="join-msg">âœ¨ ØªÙ… Ø§Ù†Ø¶Ù…Ø§Ù… ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Øª : ( ${myName} ) âœ¨</div>`;
        }

        function sendMessage() {
            const inp = document.getElementById('msgInput');
            const box = document.getElementById('chat-box');
            if(!inp.value.trim()) return;

            // Ø¨Ù†Ø§Ø¡ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù…Ø¹ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ©
            const msgHtml = `
                <div class="msg-container">
                    <img src="${myPhoto}" class="msg-avatar">
                    <div class="msg-content">
                        <span class="msg-header">${myName}</span>
                        <span class="msg-text">${inp.value}</span>
                    </div>
                </div>
            `;

            box.innerHTML += msgHtml;
            inp.value = '';
            box.scrollTop = box.scrollHeight;
        }

        function toggleProfile() {
            const modal = document.getElementById('profileModal');
            modal.style.display = (modal.style.display === 'block') ? 'none' : 'block';
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© ÙˆØ­ÙØ¸Ù‡Ø§ ÙÙŠ Ø§Ù„Ù…ØªØºÙŠØ± myPhoto Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§ ÙÙŠ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
        document.getElementById('imageUpload').addEventListener('change', function(e) {
            const reader = new FileReader();
            reader.onload = function() {
                myPhoto = reader.result;
                document.getElementById('profile-img-preview').src = myPhoto;
                document.getElementById('side-avatar').src = myPhoto;
            }
            reader.readAsDataURL(e.target.files[0]);
        });

        document.getElementById('msgInput').addEventListener('keypress', (e) => {
            if(e.key === 'Enter') sendMessage();
        });
    </script>
</body>
</html>
