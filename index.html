<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø§Ø³ØªØ± v5</title>
    <style>
        :root { --glow: #00f2ff; --bg: #050505; --card: #111; --admin: #ff004c; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Tahoma', sans-serif; }
        
        body { background: var(--bg); color: #fff; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }

        /* --- Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ --- */
        header { 
            height: 60px; background: #000; border-bottom: 2px solid var(--glow);
            display: flex; justify-content: space-between; align-items: center; padding: 0 15px;
            box-shadow: 0 0 20px rgba(0, 242, 255, 0.2); z-index: 1000;
        }

        /* --- ØªÙˆØ²ÙŠØ¹ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© --- */
        .main-wrapper { flex: 1; display: flex; overflow: hidden; position: relative; }

        /* --- Ø´Ø±ÙŠØ· Ø§Ù„ØºØ±Ù Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ (Ø¯Ø§Ø¦Ù… ÙÙŠ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±ØŒ Ù…Ø®ÙÙŠ ÙÙŠ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„) --- */
        #rooms-sidebar { 
            width: 80px; background: #000; border-left: 1px solid #222; 
            display: flex; flex-direction: column; align-items: center; padding: 15px 0; gap: 15px;
            transition: 0.3s;
        }

        /* --- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø´Ø§Øª --- */
        #chat-section { flex: 1; display: flex; flex-direction: column; background: radial-gradient(circle at center, #111, #000); }
        #messages-container { flex: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }

        /* --- ØªØµÙ…ÙŠÙ… Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…ØªÙˆÙ‡Ø¬Ø© --- */
        .msg-neon { 
            background: rgba(255,255,255,0.02); padding: 12px; border-radius: 12px;
            border-right: 4px solid var(--glow); max-width: 85%; align-self: flex-start;
            animation: slideIn 0.3s ease; box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        .u-rank { font-weight: bold; font-size: 13px; text-shadow: 0 0 10px var(--admin); color: var(--admin); }

        /* --- Ù…Ø´ØºÙ„ ÙŠÙˆØªÙŠÙˆØ¨ Ø§Ù„Ø¹Ø§Ø¦Ù… --- */
        #video-player {
            position: absolute; top: 10px; left: 10px; width: 320px; background: #000;
            border: 2px solid var(--glow); border-radius: 10px; display: none; z-index: 5000;
        }
        .vid-head { background: #222; padding: 5px 10px; display: flex; justify-content: space-between; font-size: 11px; cursor: move; }

        /* --- Ø§Ù„Ù†ÙˆØ§ÙØ° (Ø¨Ø±ÙˆÙØ§ÙŠÙ„ØŒ Ø«ÙŠÙ…Ø§ØªØŒ ØºØ±Ù) --- */
        .modal-overlay { 
            position: fixed; inset: 0; background: rgba(0,0,0,0.8); 
            display: none; justify-content: center; align-items: center; z-index: 9999;
        }
        .modal-box { 
            background: #111; border: 2px solid var(--glow); width: 90%; max-width: 350px;
            padding: 20px; border-radius: 20px; text-align: center; box-shadow: 0 0 30px var(--glow);
        }

        /* --- Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ØºØ±ÙØ© --- */
        .room-btn { 
            width: 55px; height: 55px; background: #1a1a1a; border: 1px solid #333; 
            border-radius: 15px; cursor: pointer; display: flex; align-items: center; 
            justify-content: center; font-size: 10px; text-align: center; color: #666;
        }
        .room-btn.active { border-color: var(--glow); color: var(--glow); box-shadow: 0 0 10px var(--glow); }

        /* --- Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ --- */
        .input-bar { padding: 10px; background: #000; display: flex; gap: 10px; border-top: 1px solid #222; }
        #main-input { flex: 1; padding: 12px; background: #111; border: 1px solid #333; color: #fff; border-radius: 30px; outline: none; }
        .send-btn { background: var(--glow); color: #000; border: none; padding: 0 20px; border-radius: 30px; font-weight: bold; cursor: pointer; }

        /* --- Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ --- */
        @media (max-width: 768px) {
            #rooms-sidebar { width: 60px; }
            #video-player { width: 95%; left: 2.5%; }
        }

        @keyframes slideIn { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }
    </style>
</head>
<body>

    <header>
        <div onclick="openModal('modal-rooms')" style="cursor:pointer; color:var(--glow)">â•<br>ØºØ±ÙØ©</div>
        <h2 id="logo" style="text-shadow: 0 0 10px var(--glow);">MASTER PRO</h2>
        <div onclick="openModal('modal-profile')" style="cursor:pointer; color:var(--glow)">ğŸ‘¤<br>Ù…Ù„ÙÙŠ</div>
    </header>

    <div class="main-wrapper">
        <div id="rooms-sidebar">
            <div class="room-btn active" onclick="switchRoom('Ø§Ù„Ø¹Ø§Ù…Ø©', this)">ØºØ±ÙØ©<br>Ø¹Ø§Ù…Ø©</div>
        </div>

        <div id="chat-section">
            <div id="messages-container">
                <div style="text-align:center; color:#444; font-size:11px; margin-top:50px;">-- Ø¨ÙˆØ§Ø¨ØªÙƒ ÙƒØ£Ø¯Ù…Ù† Ù…ÙØ¹Ù„Ø© --</div>
            </div>

            <div id="video-player">
                <div class="vid-head">
                    <span>ğŸ“º Ø¨Ø« Ù…Ø¨Ø§Ø´Ø±</span>
                    <div>
                        <span onclick="minVid()" style="cursor:pointer; margin-left:10px;">-</span>
                        <span onclick="closeVid()" style="cursor:pointer; color:red;">X</span>
                    </div>
                </div>
                <div id="vid-body"></div>
            </div>

            <div class="input-bar">
                <input type="text" id="main-input" placeholder="Ø§ÙƒØªØ¨ Ù‡Ù†Ø§ Ø£Ùˆ Ø¶Ø¹ Ø±Ø§Ø¨Ø· ÙŠÙˆØªÙŠÙˆØ¨...">
                <button class="send-btn" onclick="handleSend()">Ø¥Ø±Ø³Ø§Ù„</button>
            </div>
        </div>
    </div>

    <div id="modal-profile
