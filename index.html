// Ù…ÙŠØ²Ø© 1: ØªÙŠÙƒ ØªÙˆÙƒ Ø§Ù„Ù…Ù…Ù„ÙƒØ© (Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ù…Ø·ÙˆØ±)
let tiktokData = [
    { id: 1, src: "https://www.w3schools.com/html/mov_bbb.mp4", user: "Ø¹Ù„ÙˆØ´_Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±", likes: 1200, comments: [] },
    { id: 2, src: "https://www.w3schools.com/html/horse.mp4", user: "ÙØ§Ø±Ø³_Ø§Ù„Ù…Ù…Ù„ÙƒØ©", likes: 850, comments: [] },
    { id: 3, src: "https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4", user: "Ø±Ø¹Ø¯_Ø¨ØºØ¯Ø§Ø¯", likes: 3000, comments: [] }
];

function openTikTok() {
    const win = document.getElementById('royal-display');
    win.style.display = 'block';
    document.getElementById('view-title').innerText = "ğŸ¬ ØªÙŠÙƒ ØªÙˆÙƒ Ø§Ù„Ù…Ù…Ù„ÙƒØ© - Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ";
    
    document.getElementById('display-content').innerHTML = `
        <div id="tiktok-wrapper" style="height: 70vh; overflow-y: scroll; scroll-snap-type: y mandatory; background: #000; border-radius: 15px;">
            <div id="video-stream"></div>
        </div>
    `;
    renderTikToks();
}

function renderTikToks() {
    const stream = document.getElementById('video-stream');
    stream.innerHTML = ""; // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø´Ø§Ø´Ø© Ù‚Ø¨Ù„ Ø§Ù„Ø±Ù†Ø¯Ø±

    tiktokData.forEach((video, index) => {
        const post = document.createElement('div');
        post.className = 'tiktok-post';
        post.style = "height: 100%; scroll-snap-align: start; position: relative; border-bottom: 5px solid #111;";
        
        post.innerHTML = `
            <video width="100%" height="100%" loop autoplay muted style="object-fit:cover;">
                <source src="${video.src}" type="video/mp4">
            </video>
            
            <div style="position:absolute; right:15px; bottom:100px; display:flex; flex-direction:column; gap:20px; align-items:center; z-index:100;">
                <div id="like-${video.id}" onclick="handleLike(${video.id})" style="cursor:pointer; font-size:30px; color:white;">â¤ï¸ <small style="font-size:12px; display:block; text-align:center;">${video.likes}</small></div>
                <div onclick="showCommentBox(${video.id})" style="cursor:pointer; font-size:30px; color:white;">ğŸ’¬ <small style="font-size:12px; display:block; text-align:center;">${video.comments.length}</small></div>
                <div onclick="this.style.background='white'; this.style.color='black';" style="background:gold; color:black; border-radius:50%; width:35px; height:35px; display:flex; align-items:center; justify-content:center; font-weight:bold; cursor:pointer;">+</div>
            </div>

            <div style="position:absolute; bottom:30px; left:15px; text-shadow:2px 2px 5px #000; z-index:100;">
                <h4 style="margin:0; color:gold;">@${video.user}</h4>
                <p style="margin:5px 0; font-size:14px;">ÙÙŠØ¯ÙŠÙˆ Ø­ØµØ±ÙŠ ÙÙŠ #Ù…Ù…Ù„ÙƒØ©_Ø¹Ù„ÙˆØ´ ğŸ‘‘</p>
            </div>

            <div id="comment-box-${video.id}" style="display:none; position:absolute; bottom:0; width:100%; background:rgba(0,0,0,0.9); padding:10px; z-index:200; border-top:1px solid gold;">
                <div id="list-${video.id}" style="max-height:100px; overflow-y:auto; margin-bottom:10px; font-size:12px;"></div>
                <div style="display:flex; gap:5px;">
                    <input type="text" id="input-${video.id}" placeholder="Ø§ÙƒØªØ¨ ØªØ¹Ù„ÙŠÙ‚Ùƒ..." style="flex-grow:1; background:#222; border:1px solid gold; color:white; border-radius:10px; padding:5px;">
                    <button onclick="postComment(${video.id})" style="background:gold; border:none; padding:5px 10px; border-radius:10px; cursor:pointer;">Ù†Ø´Ø±</button>
                </div>
                <button onclick="this.parentElement.style.display='none'" style="width:100%; background:none; color:gray; border:none; margin-top:5px; cursor:pointer;">Ø¥ØºÙ„Ø§Ù‚</button>
            </div>
        `;
        stream.appendChild(post);
    });
}

// Ø¯Ø§Ù„Ø© Ø§Ù„Ù„Ø§ÙŠÙƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©
function handleLike(id) {
    const video = tiktokData.find(v => v.id === id);
    video.likes += 1;
    const btn = document.getElementById(`like-${id}`);
    btn.style.color = "red";
    btn.querySelector('small').innerText = video.likes;
}

// Ø¯Ø§Ù„Ø© Ø¥Ø¸Ù‡Ø§Ø± ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª
function showCommentBox(id) {
    const box = document.getElementById(`comment-box-${id}`);
    box.style.display = box.style.display === 'none' ? 'block' : 'none';
}

// Ø¯Ø§Ù„Ø© Ù†Ø´Ø± Ø§Ù„ØªØ¹Ù„ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
function postComment(id) {
    const input = document.getElementById(`input-${id}`);
    const list = document.getElementById(`list-${id}`);
    const video = tiktokData.find(v => v.id === id);
    
    if(input.value.trim() !== "") {
        video.comments.push(input.value);
        const div = document.createElement('div');
        div.style = "padding:3px; border-bottom:1px solid #333;";
        div.innerHTML = `<span style="color:gold;">Ø§Ù„Ù…Ù„Ùƒ:</span> ${input.value}`;
        list.appendChild(div);
        input.value = "";
    }
}
