<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Master RG Empire</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        :root { --main: #00f2ff; --pink: #ff004c; --bg: #050505; }
        body { background: var(--bg); color: #fff; font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        
        /* ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø´Ø§Ø´Ø© - Ø§Ù„ÙŠÙ…ÙŠÙ† Ù…ØªØµÙ„ÙŠÙ† - Ø§Ù„ÙŠØ³Ø§Ø± Ù…Ù„Ù Ø´Ø®ØµÙŠ */
        .app-container { display: flex; flex: 1; overflow: hidden; }
        .side-menu { width: 220px; background: #111; padding: 15px; border: 1px solid #222; display: flex; flex-direction: column; gap: 15px; }
        #chat-section { flex: 1; display: flex; flex-direction: column; background: #000; border-left: 1px solid #222; border-right: 1px solid #222; }
        #chat-display { flex: 1; padding: 15px; overflow-y: auto; }

        /* Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ (Ø¬Ù‡Ø© Ø§Ù„ÙŠØ³Ø§Ø±) */
        .profile-box { background: #1a1a1a; border-radius: 12px; border: 1px solid var(--main); overflow: hidden; text-align: center; }
        .cover-img { width: 100%; height: 50px; background: linear-gradient(to right, var(--main), var(--pink)); cursor: pointer; }
        .user-p-img { width: 55px; height: 55px; border-radius: 50%; border: 2px solid var(--main); margin: -25px auto 5px; cursor: pointer; background: #333; }
        
        /* Ø§Ù„Ø±Ø³Ø§ÙŠÙ„ Ù…Ø¹ Ø§Ù„ØµÙˆØ± */
        .message-row { display: flex; gap: 10px; margin-bottom: 15px; }
        .m-avatar { width: 45px; height: 45px; border-radius: 50%; border: 1px solid var(--main); }
        .m-body { background: #151515; padding: 10px; border-radius: 10px; flex: 1; position: relative; }
        .m-user { color: var(--main); font-weight: bold; font-size: 13px; }
        .m-tools { margin-top: 5px; display: flex; gap: 6px; }
        .m-tools button { font-size: 10px; background: #222; border: 1px solid #444; color: #aaa; cursor: pointer; padding: 2px 6px; border-radius: 4px; }
        .m-tools .del-btn { color: #ff4444; }

        /* Ø®Ø§Ù†Ø© Ø§Ù„ÙƒØªØ§Ø¨Ø© */
        .write-area { padding: 15px; background: #111; display: flex; gap: 10px; }
        input { flex: 1; background: #000; border: 1px solid #333; color: #fff; padding: 10px 15px; border-radius: 25px; outline: none; }
        #send { background: var(--main); color: #000; border: none; padding: 0 20px; border-radius: 25px; font-weight: bold; cursor: pointer; }

        @media (max-width: 768px) { .side-menu { display: none; } }
    </style>
</head>
<body>

<div class="app-container">
    <div class="side-menu">
        <div style="color:var(--main); font-size:13px; border-bottom:1px solid #222; padding-bottom:5px;">Ø§Ù„Ù…ØªØµÙ„ÙˆÙ†</div>
        <div style="font-size:14px;">ğŸ‘‘ Ø§Ù„Ù…Ø§Ø³ØªØ± RG</div>
        <div style="font-size:14px; color:#777;">ğŸ‘¤ Ø²Ø§Ø¦Ø± 501</div>
    </div>

    <div id="chat-section">
        <div id="chat-display"></div>
        <div class="write-area">
            <input type="text" id="msgInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø©...">
            <button id="send" onclick="sendMsg()">Ø¥Ø±Ø³Ø§Ù„</button>
        </div>
    </div>

    <div class="side-menu">
        <div class="profile-box">
            <div class="cover-img" onclick="changeCover()"></div>
            <img src="https://via.placeholder.com/55" id="myAvatar" class="user-p-img" onclick="changeAvatar()">
            <input type="text" id="myName" value="Ø§Ù„Ù…Ø§Ø³ØªØ±_RG" style="width:80%; text-align:center; font-size:14px; margin-bottom:10px;">
        </div>
        <div style="color:var(--pink); font-size:13px;">Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª</div>
        <button style="font-size:11px; cursor:pointer;" onclick="changeAvatar()">ØªØºÙŠÙŠØ± Ø§Ù„ØµÙˆØ±Ø©</button>
        <button style="font-size:11px; cursor:pointer;" onclick="location.reload()">ØªØ­Ø¯ÙŠØ«</button>
    </div>
</div>

<script>
    const config = { databaseURL: "https://masterchat-f2da9-default-rtdb.firebaseio.com" };
    firebase.initializeApp(config);
    const db = firebase.database();

    let myImg = "https://via.placeholder.com/55";

    function changeAvatar() {
        let link = prompt("Ø¶Ø¹ Ø±Ø§Ø¨Ø· ØµÙˆØ±ØªÙƒ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:");
        if(link) { myImg = link; document.getElementById('myAvatar').src = link; }
    }

    function sendMsg() {
        const text = document.getElementById('msgInput').value;
        const name = document.getElementById('myName').value;
        if(text) {
            db.ref('messages').push({ user: name, text: text, img: myImg, time: new Date().toLocaleTimeString() });
            document.getElementById('msgInput').value = '';
        }
    }

    db.ref('messages').on('child_added', (snap) => {
        const m = snap.val();
        const id = snap.key;
        const div = document.createElement('div');
        div.className = 'message-row';
        div.innerHTML = `
            <img src="${m.img}" class="m-avatar">
            <div class="m-body">
                <div class="m-user">${m.user} <small style="color:#444; float:left;">${m.time}</small></div>
                <div style="margin-top:5px;">${m.text}</div>
                <div class="m-tools">
                    <button onclick="quote('${m.user}','${m.text}')">Ø§Ù‚ØªØ¨Ø§Ø³</button>
                    <button class="del-btn" onclick="del('${id}')">Ø­Ø°Ù</button>
                    <button onclick="alert('ØªÙ… ÙƒØªÙ… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…')">ÙƒØªÙ…</button>
                </div>
            </div>
        `;
        document.getElementById('chat-display').appendChild(div);
        document.getElementById('chat-display').scrollTop = document.getElementById('chat-display').scrollHeight;
    });

    function del(id) { db.ref('messages/'+id).remove(); location.reload(); }
    function quote(u, t) { document.getElementById('msgInput').value = `Ø±Ø¯ Ø¹Ù„Ù‰ ${u}: (${t}) -> `; }
</script>

</body>
</html>
